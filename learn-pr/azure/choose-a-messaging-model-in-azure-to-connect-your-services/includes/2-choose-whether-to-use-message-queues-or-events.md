<span data-ttu-id="ff7b8-101">Si supponga di dover pianificare l'architettura di un'applicazione distribuita per la condivisione di musica.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-101">Suppose you are planning the architecture of a distributed music-sharing application.</span></span> <span data-ttu-id="ff7b8-102">È necessario assicurarsi che l'applicazione sia il più possibile affidabile e scalabile e si prevede di usare tecnologie di Azure per creare un'infrastruttura di comunicazione solida.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-102">You want to ensure that the application is as reliable and scalable as possible and you intend to use Azure technologies to build a robust communication infrastructure.</span></span>

<span data-ttu-id="ff7b8-103">Prima di poter scegliere la tecnologia di Azure corretta, è necessario conoscere ogni singola comunicazione che si scambiano i componenti dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-103">Before you can choose the right Azure technology, you must understand each individual communication that the components of the application exchange.</span></span> <span data-ttu-id="ff7b8-104">Per ogni tipo di comunicazione è possibile scegliere una diversa tecnologia di Azure.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-104">For each communication you can choose a different Azure technology.</span></span>

<span data-ttu-id="ff7b8-105">La prima cosa da capire per una comunicazione è se invia messaggi o eventi.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-105">The first thing to understand about a communication is whether it sends messages or events.</span></span> <span data-ttu-id="ff7b8-106">Alcune tecnologie di Azure sono progettate per gli eventi e altre per i messaggi, quindi questa è una scelta fondamentale.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-106">Some Azure technologies target events and other target messages so this is a fundamental choice.</span></span>

## <a name="what-is-a-message"></a><span data-ttu-id="ff7b8-107">Che cos'è un messaggio?</span><span class="sxs-lookup"><span data-stu-id="ff7b8-107">What is a message?</span></span>

<span data-ttu-id="ff7b8-108">Nella terminologia delle applicazioni distribuite, i **messaggi** hanno le caratteristiche seguenti:</span><span class="sxs-lookup"><span data-stu-id="ff7b8-108">In the terminology of distributed applications, **messages** have the following characteristics:</span></span>

- <span data-ttu-id="ff7b8-109">Un messaggio contiene dati non elaborati, generati da un componente, che verranno utilizzati da un altro componente.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-109">A message contains raw data, produced by one component, that will be consumed by another component.</span></span>
- <span data-ttu-id="ff7b8-110">Un messaggio contiene i dati stessi, non solo un riferimento a tali dati.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-110">A message contains the data itself, not just a reference to that data.</span></span>
- <span data-ttu-id="ff7b8-111">Il componente di invio si aspetta che il contenuto del messaggio venga elaborato in un certo modo dal componente di destinazione.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-111">The sending component expects the message content to be processed in a certain way by the destination component.</span></span> <span data-ttu-id="ff7b8-112">L'integrità dell'intero sistema può dipendere dal fatto che sia il mittente che il destinatario eseguano un processo specifico.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-112">The integrity of the overall system may depend on both sender and receiver doing a specific job.</span></span>

<span data-ttu-id="ff7b8-113">Ad esempio, si supponga che un utente carichi un nuovo brano con l'app per dispositivi mobili per la condivisione di musica.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-113">For example, suppose a user uploads a new song by using the mobile music-sharing app.</span></span> <span data-ttu-id="ff7b8-114">L'app per dispositivi mobili deve inviare tale brano all'API Web eseguita in Azure.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-114">The mobile app must send that song to the web API that runs in Azure.</span></span> <span data-ttu-id="ff7b8-115">Deve essere inviato il file multimediale del brano stesso, non solo un avviso che indica che è stato aggiunto un nuovo brano.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-115">The song media file itself must be sent, not just an alert that indicates that a new song has been added.</span></span> <span data-ttu-id="ff7b8-116">L'app per dispositivi mobili si aspetta che l'API Web archivi il nuovo brano nel database e lo renda disponibile ad altri utenti.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-116">The mobile app expects that the web API will store the new song in the database and make it available to other users.</span></span> <span data-ttu-id="ff7b8-117">Ecco un esempio di messaggio.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-117">This is an example of a message.</span></span>

## <a name="what-is-an-event"></a><span data-ttu-id="ff7b8-118">Che cos'è un evento?</span><span class="sxs-lookup"><span data-stu-id="ff7b8-118">What is an event?</span></span>

<span data-ttu-id="ff7b8-119">Gli **eventi** sono più leggeri rispetto ai messaggi e vengono spesso usati per le comunicazioni broadcast.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-119">**Events** are lighter-weight than messages and are most often used for broadcast communications.</span></span> <span data-ttu-id="ff7b8-120">I componenti che inviano l'evento sono detti **componenti di pubblicazione** e i destinatari sono noti come **sottoscrittori**.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-120">The components sending the event are known as **publishers** and receivers are known as **subscribers**.</span></span>

<span data-ttu-id="ff7b8-121">Con gli eventi, i componenti di ricezione decideranno in genere a quali comunicazioni sono interessati e le "sottoscriveranno".</span><span class="sxs-lookup"><span data-stu-id="ff7b8-121">With events, receiving components will generally decide in which communications they are interested and "subscribe" to those.</span></span> <span data-ttu-id="ff7b8-122">La sottoscrizione viene in genere gestita da un intermediario, ad esempio Griglia di eventi di Azure o l'hub eventi di Azure.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-122">The subscription is usually managed by an intermediary like Azure Event Grid or Azure Event Hub.</span></span> <span data-ttu-id="ff7b8-123">Quando i componenti di pubblicazione inviano un evento, l'intermediario indirizzerà tale evento ai sottoscrittori interessati.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-123">When publishers send an event, the intermediary will route that event to interested subscribers.</span></span> <span data-ttu-id="ff7b8-124">Questa è nota come "architettura di pubblicazione-sottoscrizione" ed è il modo più comune per gestire gli eventi, anche se non è l'unico.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-124">This is known as a "publish-subscribe architecture", it is not the only way to deal with events, but it is the most common.</span></span>

<span data-ttu-id="ff7b8-125">Gli eventi hanno le caratteristiche seguenti:</span><span class="sxs-lookup"><span data-stu-id="ff7b8-125">Events have the following characteristics:</span></span>

- <span data-ttu-id="ff7b8-126">Un evento è una notifica leggera che indica che è accaduto qualcosa.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-126">An event is a lightweight notification that indicates that something happened.</span></span>
- <span data-ttu-id="ff7b8-127">L'evento può essere inviato a più destinatari o a nessuno.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-127">The event may be sent to multiple receivers or to none at all.</span></span>
- <span data-ttu-id="ff7b8-128">Gli eventi sono spesso destinati a una distribuzione estesa, ovvero hanno un numero elevato di sottoscrittori per ogni origine di pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-128">Events are often intended to "fan-out" or have a large number of subscribers for each publisher.</span></span>
- <span data-ttu-id="ff7b8-129">Il componente di pubblicazione dell'evento non ha aspettative sull'azione eseguita da un componente di ricezione.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-129">The publisher of the event has no expectation about the action a receiving component takes.</span></span>
- <span data-ttu-id="ff7b8-130">Alcuni eventi sono unità discrete e non correlate ad altri eventi.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-130">Some events are discrete units and unrelated to other events.</span></span> 
- <span data-ttu-id="ff7b8-131">Alcuni eventi fanno parte di una serie ordinata e correlata.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-131">Some events are part of a related and ordered series.</span></span>  

<span data-ttu-id="ff7b8-132">Si supponga, ad esempio, che il caricamento del file musicale sia stato completato e che il nuovo brano sia stato aggiunto al database.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-132">For example, suppose the music file upload has been completed and the new song has been added to the database.</span></span> <span data-ttu-id="ff7b8-133">Per informare gli utenti del nuovo file, l'API Web deve informare gli utenti del front-end Web e dell'app per dispositivi mobili del nuovo file.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-133">In order to inform users of the new file, the web API must inform the web front-end and mobile app users of the new file.</span></span> <span data-ttu-id="ff7b8-134">Gli utenti possono scegliere se ascoltare il nuovo brano, quindi la notifica iniziale non include il file musicale ma si limita a informare gli utenti che è presente il brano.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-134">The users can choose whether to listen to the new song, so the initial notification does not include the music file but only notifies users that the song exists.</span></span> <span data-ttu-id="ff7b8-135">Il mittente non ha aspettative specifiche su quello che faranno i destinatari dell'evento in risposta alla ricezione di questo evento.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-135">The sender does not have a specific expectation that the event receivers will do anything particular in response the receiving this event.</span></span>

<span data-ttu-id="ff7b8-136">Questo è un esempio di evento discreto.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-136">This is an example of a discrete event.</span></span>

## <a name="how-to-choose-messages-or-events"></a><span data-ttu-id="ff7b8-137">Come scegliere tra messaggi o eventi</span><span class="sxs-lookup"><span data-stu-id="ff7b8-137">How to choose messages or events</span></span>

<span data-ttu-id="ff7b8-138">È probabile che una singola applicazione usi gli eventi per certi scopi e i messaggi per altri.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-138">A single application is likely to use events for some purposes and messages for others.</span></span> <span data-ttu-id="ff7b8-139">Prima di scegliere, è necessario analizzare l'architettura dell'applicazione e tutti i relativi casi d'uso per identificare tutti i diversi scopi che hanno i relativi componenti per comunicare tra loro.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-139">Before you choose, you must analyze your application architecture and all its use cases to identify all the different purposes its components have to communicate with each other.</span></span> 

<span data-ttu-id="ff7b8-140">Gli eventi vengono più probabilmente usati per le trasmissioni e sono spesso temporanei, vale a dire che una comunicazione potrebbe non essere gestita da alcun destinatario se non ci sono sottoscrizioni.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-140">Events are more likely to be used for broadcasts and are often ephemeral, meaning a communication might not be handled by any receiver if none are currently subscribing.</span></span> <span data-ttu-id="ff7b8-141">È più probabile che i messaggi vengano usati quando l'applicazione distribuita richiede una garanzia di elaborazione della comunicazione.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-141">Messages are more likely to be used where the distributed application requires a guarantee that the communication will be processed.</span></span>

<span data-ttu-id="ff7b8-142">Per tutte le comunicazioni prendere in considerazione la domanda: il componente di invio si aspetta che la comunicazione venga elaborata in un modo specifico dal componente di destinazione?</span><span class="sxs-lookup"><span data-stu-id="ff7b8-142">For each communication consider the question: Does the sending component expect the communication to be processed in a particular way by the destination component?</span></span>

<span data-ttu-id="ff7b8-143">Se la risposta è sì, scegliere di usare un messaggio.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-143">If the answer is yes, choose to use a message.</span></span> <span data-ttu-id="ff7b8-144">Se la risposta è no, si potrebbe riuscire a usare gli eventi.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-144">If the answer is no, you may be able to use events.</span></span>

## <a name="summary"></a><span data-ttu-id="ff7b8-145">Summary</span><span class="sxs-lookup"><span data-stu-id="ff7b8-145">Summary</span></span>

<span data-ttu-id="ff7b8-146">I componenti di un'applicazione distribuita comunicano tra loro per numerosi scopi differenti.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-146">The components of a distributed application communicate with each other for many different purposes.</span></span> <span data-ttu-id="ff7b8-147">Per ognuno di questi scopi, è necessario scegliere se usare eventi o messaggi in modo che sia possibile scegliere una tecnologia di Azure progettata per tale scopo.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-147">For each of these purposes, you must choose whether to use events or messages so that you can choose an Azure technology that is designed for that purpose.</span></span> 

<span data-ttu-id="ff7b8-148">Dopo aver compreso il motivo per cui i componenti comunicano e se usano eventi o messaggi, è possibile procedere con la scelta tra code di archiviazione di Azure, hub eventi, griglie di eventi o bus di servizio per gestire gli scambi di informazioni.</span><span class="sxs-lookup"><span data-stu-id="ff7b8-148">Having understood why your components communicate and whether they use events or messages, you can proceed to choose from Azure Storage queues, Event Hubs, Event Grids, or Service Bus to exchange the information.</span></span>