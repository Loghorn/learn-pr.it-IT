<span data-ttu-id="82e3c-101">Si supponga di lavorare per un'agenzia di stampa che diffonde avvisi di notizie in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="82e3c-101">Imagine you work for a major news organization that reports breaking news alerts.</span></span> <span data-ttu-id="82e3c-102">L'azienda si avvale di una rete mondiale di giornalisti che inviano costantemente aggiornamenti attraverso un portale Web e un'app per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="82e3c-102">Our company employs a worldwide network of journalists that are constantly sending updates through a web portal and a mobile app.</span></span> <span data-ttu-id="82e3c-103">Un servizio Web di livello intermedio accetta gli aggiornamenti e li pubblica online tramite diversi canali.</span><span class="sxs-lookup"><span data-stu-id="82e3c-103">A middle tier web service layer then takes those alert updates and publishes them online through several channels.</span></span>

<span data-ttu-id="82e3c-104">Si è rilevato che il sistema non registra alcuni avvisi corrispondenti a eventi di importanza globale.</span><span class="sxs-lookup"><span data-stu-id="82e3c-104">However, it's been noticed the system is missing alerts when globally significant events occur.</span></span> <span data-ttu-id="82e3c-105">Si tratta di un problema _serio_, perché la concorrenza ottiene un vantaggio competitivo determinante.</span><span class="sxs-lookup"><span data-stu-id="82e3c-105">This is a _huge_ problem because we're being "scooped" by our competition!</span></span> <span data-ttu-id="82e3c-106">L'utente è stato selezionato come principale sviluppatore dell'azienda per identificare e risolvere il problema.</span><span class="sxs-lookup"><span data-stu-id="82e3c-106">You've been hand-selected as the company's top developer to identify and fix the problem.</span></span>

<span data-ttu-id="82e3c-107">Il livello intermedio fornisce capacità più che sufficiente per la gestione di carichi normali.</span><span class="sxs-lookup"><span data-stu-id="82e3c-107">The middle tier provides plenty of capacity to handle normal loads.</span></span> <span data-ttu-id="82e3c-108">Tuttavia un esame dei log dei server rivela che il sistema ha registrato un overload quando più giornalisti hanno provato a caricare contemporaneamente articoli di rilievo.</span><span class="sxs-lookup"><span data-stu-id="82e3c-108">However, a look at the server logs revealed the system was overloaded when several journalists tried to upload larger breaking stories at the same time.</span></span> <span data-ttu-id="82e3c-109">Alcuni autori hanno segnalato che il portale si bloccava e altri hanno detto che i loro articoli sono andati perduti.</span><span class="sxs-lookup"><span data-stu-id="82e3c-109">Some writers complained the portal became unresponsive, and others said they lost their stories altogether.</span></span> <span data-ttu-id="82e3c-110">Lo sviluppatore ha rilevato una correlazione diretta tra i problemi segnalati e il picco della domanda per i server di livello intermedio.</span><span class="sxs-lookup"><span data-stu-id="82e3c-110">You've spotted a direct correlation between the reported issues and the spike in demand on the middle tier servers.</span></span>

<span data-ttu-id="82e3c-111">Ovviamente è necessario un approccio per la gestione di questi picchi imprevisti.</span><span class="sxs-lookup"><span data-stu-id="82e3c-111">Clearly, you need a way to handle these unexpected peaks.</span></span> <span data-ttu-id="82e3c-112">Non si vuole aggiungere altre istanze del sito Web e del servizio Web di livello intermedio, perché sono soluzioni costose e ridondanti in condizioni normali.</span><span class="sxs-lookup"><span data-stu-id="82e3c-112">You don't want to add more instances of the website and middle tier web service because they're expensive and, under normal conditions, redundant.</span></span> <span data-ttu-id="82e3c-113">È possibile eseguire lo spin up dinamico delle istanze, ma questa soluzione richiede tempo e lo stesso problema può ripetersi con i nuovi server quando vengono messi online.</span><span class="sxs-lookup"><span data-stu-id="82e3c-113">We could dynamically spin up instances, but this takes time and we'd have the issue waiting for new servers to come online.</span></span>

<span data-ttu-id="82e3c-114">Il problema può essere risolto usando l'archiviazione code di Azure.</span><span class="sxs-lookup"><span data-stu-id="82e3c-114">You can solve this problem by using Azure Queue storage.</span></span> <span data-ttu-id="82e3c-115">Una coda di archiviazione è un buffer di messaggi ad alte prestazioni che può fare da broker tra i componenti front end ("producer") e il livello intermedio ("consumer").</span><span class="sxs-lookup"><span data-stu-id="82e3c-115">A storage queue is a high-performance message buffer that can act as a broker between the front-end components (the "producers") and the middle tier (the "consumer").</span></span> 

<span data-ttu-id="82e3c-116">I componenti front end inseriscono un messaggio per ogni nuovo avviso in una coda.</span><span class="sxs-lookup"><span data-stu-id="82e3c-116">Our front-end components place a message for each new alert into a queue.</span></span> <span data-ttu-id="82e3c-117">Quindi il livello intermedio recupera i messaggi dalla coda uno alla volta per l'elaborazione.</span><span class="sxs-lookup"><span data-stu-id="82e3c-117">The middle tier then retrieves these messages one at a time from the queue for processing.</span></span> <span data-ttu-id="82e3c-118">In fasi di elaborazione intensiva la lunghezza della coda può crescere, ma nessun articolo va perduto e l'applicazione rimane reattiva.</span><span class="sxs-lookup"><span data-stu-id="82e3c-118">At times of high-demand, the queue may grow in length, but no stories will be lost, and the application will remain responsive.</span></span> <span data-ttu-id="82e3c-119">Quando la richiesta torna a livelli normali, il servizio Web recupera ed elabora il backlog della coda.</span><span class="sxs-lookup"><span data-stu-id="82e3c-119">When demand drops back to normal levels, the web service will catch up by working through the queue backlog.</span></span>

<span data-ttu-id="82e3c-120">Le informazioni seguenti illustrano come usare l'Archiviazione code di Azure per gestire i picchi di domanda e migliorare la resilienza delle applicazioni distribuite.</span><span class="sxs-lookup"><span data-stu-id="82e3c-120">Let's learn how to use Azure Queue storage to handle high demand and improve resilience in your distributed applications.</span></span>

## <a name="learning-objectives"></a><span data-ttu-id="82e3c-121">Obiettivi di apprendimento</span><span class="sxs-lookup"><span data-stu-id="82e3c-121">Learning objectives</span></span>

- <span data-ttu-id="82e3c-122">Creare un account di Archiviazione di Azure che supporta le code.</span><span class="sxs-lookup"><span data-stu-id="82e3c-122">Create an Azure Storage account that supports queues.</span></span>
- <span data-ttu-id="82e3c-123">Creare una coda usando C# e la libreria client di Archiviazione di Azure per .NET.</span><span class="sxs-lookup"><span data-stu-id="82e3c-123">Create a queue using C# and the Azure Storage Client Library for .NET.</span></span>
- <span data-ttu-id="82e3c-124">Aggiungere, recuperare e rimuovere messaggi da una coda usando C# e la libreria client di Archiviazione di Azure per .NET.</span><span class="sxs-lookup"><span data-stu-id="82e3c-124">Add, retrieve, and remove messages from a queue using C# and the Azure Storage Client Library for .NET.</span></span>