<span data-ttu-id="74f44-101">Quando si sviluppa un'applicazione è importante offrire un'esperienza utente di alto livello e parte di questa esperienza è il recupero rapido dei dati.</span><span class="sxs-lookup"><span data-stu-id="74f44-101">When building an application, you want to provide a great user experience, and a part of that is quick data retrieval.</span></span> <span data-ttu-id="74f44-102">Il recupero dei dati da un database è in genere un processo lento e, se i dati vengono letti spesso, ciò può causare un'esperienza utente di scarsa qualità.</span><span class="sxs-lookup"><span data-stu-id="74f44-102">Retrieving data from a database is typically a slow process, and if this data is read often, this could provide a poor user experience.</span></span> <span data-ttu-id="74f44-103">Il modello cache-aside descrive come è possibile implementare una cache in combinazione con un database per restituire i dati usati più di frequente nel minor tempo possibile.</span><span class="sxs-lookup"><span data-stu-id="74f44-103">The cache-aside pattern describes how you can implement a cache in conjunction with a database, to return the most commonly accessed data as quickly as possible.</span></span>

<span data-ttu-id="74f44-104">Si vedrà come è possibile usare il modello cache-aside per assicurarsi che i dati importanti siano rapidamente accessibili.</span><span class="sxs-lookup"><span data-stu-id="74f44-104">Here, you'll learn how the cache-aside pattern can be used to ensure your important data is quickly accessible.</span></span>

## <a name="what-is-the-cache-aside-pattern"></a><span data-ttu-id="74f44-105">Che cos'è il modello cache-aside?</span><span class="sxs-lookup"><span data-stu-id="74f44-105">What is the cache-aside pattern?</span></span>

<span data-ttu-id="74f44-106">Il modello cache-aside stabilisce che, quando è necessario recuperare dati da un'origine dati, ad esempio un database relazionale, è prima necessario verificare se i dati sono disponibili nella cache.</span><span class="sxs-lookup"><span data-stu-id="74f44-106">The cache-aside pattern dictates that when you need to retrieve data from a data source, like a relational database, you should first check for the data in your cache.</span></span> <span data-ttu-id="74f44-107">In caso affermativo, vengono usati i dati nella cache.</span><span class="sxs-lookup"><span data-stu-id="74f44-107">If the data is in your cache, use it.</span></span> <span data-ttu-id="74f44-108">Se i dati non sono nella cache, viene eseguita una query sul database e quando i dati vengono restituiti all'utente, vengono aggiunti alla cache.</span><span class="sxs-lookup"><span data-stu-id="74f44-108">If the data is not in your cache, then query the database, and when you're returning the data back to the user, add it to your cache.</span></span> <span data-ttu-id="74f44-109">In questo modo i dati saranno accessibili dalla cache la volta successiva che sono necessari.</span><span class="sxs-lookup"><span data-stu-id="74f44-109">This will then allow you to access the data from your cache the next time it's needed.</span></span>

## <a name="when-to-implement-the-cache-aside-pattern"></a><span data-ttu-id="74f44-110">Quando implementare il modello cache-aside?</span><span class="sxs-lookup"><span data-stu-id="74f44-110">When to implement the cache-aside pattern?</span></span>

<span data-ttu-id="74f44-111">La lettura dei dati da un database è in genere un processo lento.</span><span class="sxs-lookup"><span data-stu-id="74f44-111">Reading data from a database is usually a slow process.</span></span> <span data-ttu-id="74f44-112">Questo processo implica la compilazione di una query complessa, la preparazione di un piano di esecuzione di query, l'esecuzione della query e quindi la preparazione del risultato.</span><span class="sxs-lookup"><span data-stu-id="74f44-112">It involves compilation of a complex query, preparation of a query execution plan, execution of the query, and then preparation of the result.</span></span> <span data-ttu-id="74f44-113">In alcuni casi, questo processo può anche richiedere la lettura dei dati dal disco.</span><span class="sxs-lookup"><span data-stu-id="74f44-113">In some cases, this process may read data from the disk as well.</span></span> <span data-ttu-id="74f44-114">Sono disponibili ottimizzazioni che possono essere eseguite a livello di database, come la precompilazione delle query e il caricamento di alcuni dati in memoria.</span><span class="sxs-lookup"><span data-stu-id="74f44-114">There are optimizations that can be done on the database level, like pre-compiling the queries, and loading some of the data in memory.</span></span> <span data-ttu-id="74f44-115">Tuttavia, l'esecuzione della query e la preparazione del risultato saranno sempre operazioni inevitabili durante il recupero dei dati da un database.</span><span class="sxs-lookup"><span data-stu-id="74f44-115">However, execution of the query and preparation of the result will always happen when retrieving data from a database.</span></span>

<span data-ttu-id="74f44-116">È possibile risolvere questo problema usando il modello cache-aside.</span><span class="sxs-lookup"><span data-stu-id="74f44-116">We can solve this problem by using the cache-aside pattern.</span></span> <span data-ttu-id="74f44-117">Con il modello cache-aside entrano in gioco ancora l'applicazione e il database, ma ora è presente anche una cache.</span><span class="sxs-lookup"><span data-stu-id="74f44-117">In the cache-aside pattern, we still have the application and the database, but now we also have a cache.</span></span> <span data-ttu-id="74f44-118">Una cache archivia i dati in memoria, in modo da non dover interagire con il file system.</span><span class="sxs-lookup"><span data-stu-id="74f44-118">A cache stores its data in memory, so it doesn't have to interact with the file system.</span></span> <span data-ttu-id="74f44-119">Le cache consentono inoltre di archiviare i dati in strutture di dati molto semplici, come coppie chiave-valore, in modo che non sia necessario eseguire query complesse per raccogliere i dati o gestire gli indici durante la scrittura dei dati.</span><span class="sxs-lookup"><span data-stu-id="74f44-119">Caches also store data in very simple data structures, like key value pairs, so they don't have to execute complex queries to gather data or maintain indexes when writing data.</span></span> <span data-ttu-id="74f44-120">Per questo motivo, una cache offre in genere prestazioni migliori rispetto a un database.</span><span class="sxs-lookup"><span data-stu-id="74f44-120">Because of this, a cache is typically more performant than a database.</span></span> <span data-ttu-id="74f44-121">Quando si usa un'applicazione, questa tenterà di leggere i dati dalla cache prima di tutto.</span><span class="sxs-lookup"><span data-stu-id="74f44-121">When you use an application, it will try to read data from the cache first.</span></span> <span data-ttu-id="74f44-122">Se i dati richiesti non sono presenti nella cache, l'applicazione li recupererà dal database, come sempre.</span><span class="sxs-lookup"><span data-stu-id="74f44-122">If the requested data is not in the cache, the application will retrieve it from the database, like it always has done.</span></span> <span data-ttu-id="74f44-123">Questi dati vengono tuttavia archiviati nella cache per richieste successive.</span><span class="sxs-lookup"><span data-stu-id="74f44-123">However, then it stores the data in the cache for subsequent requests.</span></span> <span data-ttu-id="74f44-124">La volta successiva che un utente richiede i dati, verranno restituiti direttamente dalla cache.</span><span class="sxs-lookup"><span data-stu-id="74f44-124">Next time when any user requests the data, it will return it from the cache directly.</span></span>

![Diagramma del caricamento dei dati nella cache](../media/8-cache-aside-set-cache.png)

### <a name="how-to-manage-updating-data"></a><span data-ttu-id="74f44-126">Come gestire l'aggiornamento dei dati</span><span class="sxs-lookup"><span data-stu-id="74f44-126">How to manage updating data</span></span>

<span data-ttu-id="74f44-127">Con l'implementazione del modello cache-aside si introduce un piccolo problema.</span><span class="sxs-lookup"><span data-stu-id="74f44-127">When you implement the cache-aside pattern, you introduce a small problem.</span></span> <span data-ttu-id="74f44-128">Dato che i dati sono ora archiviati in una cache e in un archivio dati, possono verificarsi problemi quando si tenta di eseguire un aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="74f44-128">Since your data is now stored in a cache and a data store, you can run into problems when you try to make an update.</span></span> <span data-ttu-id="74f44-129">Per aggiornare i dati, ad esempio, è necessario aggiornare sia la cache che l'archivio dati.</span><span class="sxs-lookup"><span data-stu-id="74f44-129">For example, to update your data, you would need to update both the cache and the data store.</span></span>

<span data-ttu-id="74f44-130">La soluzione per questo problema nel modello cache-aside consiste nell'invalidare i dati nella cache.</span><span class="sxs-lookup"><span data-stu-id="74f44-130">The solution to this problem in the cache-aside pattern is to invalidate the data in the cache.</span></span> <span data-ttu-id="74f44-131">Quando si aggiornano i dati nell'applicazione, è prima necessario eliminare i dati nella cache e quindi apportare le modifiche all'origine dati direttamente.</span><span class="sxs-lookup"><span data-stu-id="74f44-131">When you update data in your application, you should first delete the data in the cache and then make the changes to the data source directly.</span></span> <span data-ttu-id="74f44-132">In questo modo, la volta successiva che vengono richiesti, i dati non saranno presenti nella cache e il processo verrà ripetuto.</span><span class="sxs-lookup"><span data-stu-id="74f44-132">By doing this, next time the data is requested, it won't be present in the cache, and the process will repeat.</span></span> 

![Diagramma dell'invalidamento dei dati memorizzati nella cache](../media/8-cache-aside-invalidate.png)

## <a name="considerations-for-using-the-cache-aside-pattern"></a><span data-ttu-id="74f44-134">Considerazioni per l'uso del modello cache-aside</span><span class="sxs-lookup"><span data-stu-id="74f44-134">Considerations for using the cache-aside pattern</span></span>

<span data-ttu-id="74f44-135">Valutare attentamente quali dati è opportuno inserire nella cache.</span><span class="sxs-lookup"><span data-stu-id="74f44-135">Carefully consider which data to put in the cache.</span></span> <span data-ttu-id="74f44-136">Non tutti i dati sono adatti alla memorizzazione nella cache.</span><span class="sxs-lookup"><span data-stu-id="74f44-136">Not all data is suitable to be cached.</span></span>

- <span data-ttu-id="74f44-137">**Durata**: per rendere efficace la strategia di cache-aside, assicurarsi che i criteri di scadenza corrispondano alla frequenza di accesso dei dati.</span><span class="sxs-lookup"><span data-stu-id="74f44-137">**Lifetime**: For cache-aside to be effective, make sure that the expiration policy matches the access frequency of the data.</span></span> <span data-ttu-id="74f44-138">Se si imposta un periodo di scadenza troppo breve, le applicazioni potrebbero recuperare continuamente i dati dall'archivio dati e aggiungerli alla cache.</span><span class="sxs-lookup"><span data-stu-id="74f44-138">Making the expiration period too short can cause applications to continually retrieve data from the data store and add it to the cache.</span></span>

- <span data-ttu-id="74f44-139">**Rimozione**: le dimensioni della maggior parte delle cache è limitata rispetto agli archivi dati standard, quindi i dati verranno rimossi all'occorrenza.</span><span class="sxs-lookup"><span data-stu-id="74f44-139">**Evicting**: Caches have a limited size compared to typical data stores, and they'll evict data if necessary.</span></span> <span data-ttu-id="74f44-140">Assicurarsi di scegliere criteri di rimozione appropriati per i dati.</span><span class="sxs-lookup"><span data-stu-id="74f44-140">Make sure you choose an appropriate eviction policy for your data.</span></span>

- <span data-ttu-id="74f44-141">**Priming**: per rendere efficace il modello cache-aside, molte soluzioni eseguono il prepopolamento della cache con i dati che si presume saranno soggetti ad accessi frequenti.</span><span class="sxs-lookup"><span data-stu-id="74f44-141">**Priming**: To make the cache-aside pattern effective, many solutions will prepopulate the cache with data that they think will be accessed often.</span></span>

- <span data-ttu-id="74f44-142">**Coerenza**: l'implementazione del modello cache-aside non garantisce la coerenza tra l'archivio dati e la cache.</span><span class="sxs-lookup"><span data-stu-id="74f44-142">**Consistency**: Implementing the cache-aside pattern doesn't guarantee consistency between the data store and the cache.</span></span> <span data-ttu-id="74f44-143">I dati in un archivio dati possono essere modificati senza notifica alla cache.</span><span class="sxs-lookup"><span data-stu-id="74f44-143">Data in a data store can be changed without notifying the cache.</span></span> <span data-ttu-id="74f44-144">Questo può causare problemi gravi di sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="74f44-144">This can lead to serious synchronization issues.</span></span>

<span data-ttu-id="74f44-145">Il modello cache-aside è utile quando è necessario accedere ai dati frequentemente da un'origine dati che usa un disco.</span><span class="sxs-lookup"><span data-stu-id="74f44-145">The cache-aside pattern is useful when you're required to access data frequently from a data source that uses a disk.</span></span> <span data-ttu-id="74f44-146">L'uso del modello cache-aside consentirà di archiviare i dati importanti in una cache per aumentare la velocità di recupero.</span><span class="sxs-lookup"><span data-stu-id="74f44-146">Using the cache-aside pattern, you'll store important data in a cache to help increase the speed of retrieving it.</span></span> 