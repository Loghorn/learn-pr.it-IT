<span data-ttu-id="3f87e-101">Per l'autenticazione degli utenti e delle applicazioni che tentano di accedere a un insieme di credenziali, Azure Key Vault usa **Azure Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="3f87e-101">Azure Key Vault uses **Azure Active Directory** to authenticate users and applications that try to access a vault.</span></span> <span data-ttu-id="3f87e-102">Per concedere l'accesso delle applicazioni web all'insieme di credenziali, è necessario innanzitutto registrare l'app con Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="3f87e-102">To grant our web application access to the vault, we first need to register our app with Azure Active Directory.</span></span> <span data-ttu-id="3f87e-103">La registrazione consente di creare un'identità per l'app.</span><span class="sxs-lookup"><span data-stu-id="3f87e-103">Registering creates an identity for the app.</span></span> <span data-ttu-id="3f87e-104">Quando l'app ha ottenuto un'identità, è possibile assegnare le autorizzazioni dell'insieme di credenziali.</span><span class="sxs-lookup"><span data-stu-id="3f87e-104">Once the app has an identity, we can assign vault permissions to it.</span></span>

<span data-ttu-id="3f87e-105">Le app e gli utenti eseguono l'autenticazione a Key Vault usando un token di autenticazione di Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="3f87e-105">Apps and users authenticate to Key Vault using an Azure Active Directory authentication token.</span></span> <span data-ttu-id="3f87e-106">Ottenere un token da Azure Active Directory implica la richiesta di un segreto o certificato, perché tutti gli utenti con un token usano l'identità dell'applicazione per accedere a tutti i segreti nell'insieme di credenziali.</span><span class="sxs-lookup"><span data-stu-id="3f87e-106">Getting a token from Azure Active Directory requires a secret or certificate, because anyone with a token could use the application identity to access all of the secrets in the vault.</span></span>

<span data-ttu-id="3f87e-107">I segreti dell'applicazione sono protetti nell'insieme di credenziali, ma è comunque necessario mantenere un segreto o un certificato all'esterno dell'insieme di credenziali per potervi accedere.</span><span class="sxs-lookup"><span data-stu-id="3f87e-107">Our application secrets are secure in the vault, but we still need to keep a secret or certificate outside of the vault in order to access them!</span></span> <span data-ttu-id="3f87e-108">Questo problema viene definito *problema di bootstrap* e Azure offre una soluzione.</span><span class="sxs-lookup"><span data-stu-id="3f87e-108">This problem is called the *bootstrapping problem*, and Azure has a solution for it.</span></span>

## <a name="managed-identities-for-azure-resources"></a><span data-ttu-id="3f87e-109">Identità gestite per le risorse di Azure</span><span class="sxs-lookup"><span data-stu-id="3f87e-109">Managed identities for Azure resources</span></span>

<span data-ttu-id="3f87e-110">Identità gestite per le risorse di Azure è una funzionalità di Azure che l'app può usare per accedere a Key Vault e ad altri servizi di Azure senza dover gestire alcun segreto all'esterno dell'insieme di credenziali.</span><span class="sxs-lookup"><span data-stu-id="3f87e-110">Managed identities for Azure resources is an Azure feature that your app can use to access Key Vault and other Azure services without having to manage even a single secret outside of the vault.</span></span> <span data-ttu-id="3f87e-111">L'uso di un'identità gestita è un modo semplice e sicuro per sfruttare i vantaggi di Key Vault dall'app Web.</span><span class="sxs-lookup"><span data-stu-id="3f87e-111">Using a managed identity is a simple and secure way to take advantage of Key Vault from your web app.</span></span>

<span data-ttu-id="3f87e-112">Quando si abilita l'identità gestita nell'app Web, Azure attiva un servizio REST separato per la concessione di token appositamente per l'app.</span><span class="sxs-lookup"><span data-stu-id="3f87e-112">When you enable managed identity on your web app, Azure activates a separate token-granting REST service specifically for use by your app.</span></span> <span data-ttu-id="3f87e-113">L'app richiederà i token a questo servizio anziché direttamente ad Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="3f87e-113">Your app will request tokens from this service instead of directly from Azure Active Directory.</span></span> <span data-ttu-id="3f87e-114">Per accedere a questo servizio, l'app deve usare un segreto, che però viene inserito nelle variabili di ambiente dell'app dal servizio app all'avvio.</span><span class="sxs-lookup"><span data-stu-id="3f87e-114">Your app needs to use a secret to access this service, but that secret is injected into your app's environment variables by App Service when it starts up.</span></span> <span data-ttu-id="3f87e-115">Non è necessario gestire o archiviare questo valore segreto da qualche parte e nulla all'esterno dell'app può accedere a questo segreto o all'endpoint servizio token dell'identità gestita.</span><span class="sxs-lookup"><span data-stu-id="3f87e-115">You don't need to manage or store this secret value anywhere, and nothing outside of your app can access this secret or the managed identity token service endpoint.</span></span>

<span data-ttu-id="3f87e-116">La funzionalità Identità gestite per le risorse di Azure registra inoltre automaticamente l'app in Azure Active Directory ed eliminerà la registrazione nel caso in cui si elimini l'app Web o ne si disabiliti l'identità gestita.</span><span class="sxs-lookup"><span data-stu-id="3f87e-116">Managed identities for Azure resources also registers your app in Azure Active Directory for you, and will delete the registration if you delete the web app or disable its managed identity.</span></span>

<span data-ttu-id="3f87e-117">Le identità gestite sono disponibili in tutte le edizioni di Azure Active Directory, inclusa la versione gratuita fornita con la sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="3f87e-117">Managed identities are available in all editions of Azure Active Directory, including the Free edition included with an Azure subscription.</span></span> <span data-ttu-id="3f87e-118">L'utilizzo di questa funzionalità nel Servizio app non prevede costi aggiuntivi, non richiede alcuna configurazione e può essere abilitata o disabilitata in un'app in qualsiasi momento.</span><span class="sxs-lookup"><span data-stu-id="3f87e-118">Using it in App Service has no extra cost and requires no configuration, and it can be enabled or disabled on an app at any time.</span></span>

> [!NOTE]
> <span data-ttu-id="3f87e-119">La funzionalità Identità gestite per le risorse di Azure non è attualmente supportata per le app Web Linux o contenitore.</span><span class="sxs-lookup"><span data-stu-id="3f87e-119">Managed identities for Azure resources is not currently supported for Linux or Container web apps.</span></span>

<span data-ttu-id="3f87e-120">Per abilitare un'identità gestita per un'app Web è necessario solo un singolo comando dell'interfaccia della riga di comando di Azure senza alcuna configurazione.</span><span class="sxs-lookup"><span data-stu-id="3f87e-120">Enabling a managed identity for a web app requires only a single Azure CLI command with no configuration.</span></span> <span data-ttu-id="3f87e-121">Questa procedura verrà effettuata più avanti durante la configurazione di un'app del servizio app e la successiva distribuzione in Azure.</span><span class="sxs-lookup"><span data-stu-id="3f87e-121">We'll do it later on when we set up an App Service app and deploy to Azure.</span></span> <span data-ttu-id="3f87e-122">Prima però sarà necessario applicare le conoscenze relative alle identità gestite per scrivere il codice per l'app.</span><span class="sxs-lookup"><span data-stu-id="3f87e-122">Before that, though, we're going to apply our knowledge of managed identities to write the code for our app.</span></span>