<span data-ttu-id="f0c04-101">Analogamente al codice di qualsiasi applicazione, le modifiche al codice di un bot devono essere testate e sottoposte a debug in locale prima di essere distribuite nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="f0c04-101">As with any application code that you write, changes to bot code need to be tested and debugged locally before being deployed to production.</span></span> <span data-ttu-id="f0c04-102">Per eseguire il debug dei bot, Microsoft offre [Bot Framework Emulator](https://emulator.botframework.com/).</span><span class="sxs-lookup"><span data-stu-id="f0c04-102">To help debug bots, Microsoft offers the [Bot Framework Emulator](https://emulator.botframework.com/).</span></span> <span data-ttu-id="f0c04-103">In questa unità verrà descritto come usare Visual Studio Code e l'emulatore per eseguire il debug dei bot.</span><span class="sxs-lookup"><span data-stu-id="f0c04-103">In this unit, you will learn how to use Visual Studio Code and the emulator to debug your bots.</span></span>

1. <span data-ttu-id="f0c04-104">Se Microsoft Bot Framework Emulator non è installato, installarlo adesso.</span><span class="sxs-lookup"><span data-stu-id="f0c04-104">If you haven't installed the Microsoft Bot Framework Emulator, take a moment to do so now.</span></span> <span data-ttu-id="f0c04-105">È possibile scaricarlo all'indirizzo https://emulator.botframework.com/.</span><span class="sxs-lookup"><span data-stu-id="f0c04-105">You can download it from https://emulator.botframework.com/.</span></span> <span data-ttu-id="f0c04-106">Sono disponibili versioni per Windows, macOS e Linux.</span><span class="sxs-lookup"><span data-stu-id="f0c04-106">Versions are available for Windows, macOS, and Linux.</span></span>

1. <span data-ttu-id="f0c04-107">Eseguire il comando seguente nel terminale integrato di Visual Studio Code per installare [Restify](http://restify.com/), un diffuso pacchetto Node.js per la creazione e l'utilizzo di servizi Web RESTful:</span><span class="sxs-lookup"><span data-stu-id="f0c04-107">Execute the following command in Visual Studio Code's integrated terminal to install [Restify](http://restify.com/), a popular Node.js package for building and consuming RESTful web services:</span></span>

    ```
    npm install restify
    ```

1. <span data-ttu-id="f0c04-108">Ripetere questo passaggio per i comandi seguenti per installare [Microsoft Bot Framework Bot Builder SDK per Node.js](https://docs.microsoft.com/bot-framework/nodejs/bot-builder-nodejs-quickstart):</span><span class="sxs-lookup"><span data-stu-id="f0c04-108">Repeat this step for the following commands to install the [Microsoft Bot Framework Bot Builder SDK for Node.js](https://docs.microsoft.com/bot-framework/nodejs/bot-builder-nodejs-quickstart):</span></span>

    ```
    npm install botbuilder
    npm install botbuilder-azure
    npm install botbuilder-cognitiveservices
    ```

1. <span data-ttu-id="f0c04-109">Fare clic sul pulsante **Explorer** sulla barra delle attività di Visual Studio Code.</span><span class="sxs-lookup"><span data-stu-id="f0c04-109">Click the **Explorer** button in Visual Studio Code's activity bar.</span></span> <span data-ttu-id="f0c04-110">Selezionare quindi **app.js** per aprirlo nell'editor del codice.</span><span class="sxs-lookup"><span data-stu-id="f0c04-110">Then, select **app.js** to open it in the code editor.</span></span> <span data-ttu-id="f0c04-111">Questo file contiene il codice del bot, generato dal servizio Azure Bot e scaricato dal portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="f0c04-111">This file contains the code that drives the bot — code that was generated by the Azure Bot Service and downloaded from the Azure portal.</span></span>

    ![Apertura di app.js](../media-draft/5-vs-select-index-js.png)

1. <span data-ttu-id="f0c04-113">Sostituire il contenuto del file **app.js** con il codice seguente, quindi salvare il file.</span><span class="sxs-lookup"><span data-stu-id="f0c04-113">Replace the contents of **app.js** with the following code, and then save the file.</span></span>

    ```JavaScript
    "use strict";
    var builder = require("botbuilder");
    var botbuilder_azure = require("botbuilder-azure");
    
    var useEmulator = true; 
    var userName = ""; 
    var yearsCoding = ""; 
    var selectedLanguage = "";
    
    var connector = useEmulator ? new builder.ChatConnector() : new botbuilder_azure.BotServiceConnector({
        appId: process.env.MicrosoftAppId,
        appPassword: process.env.MicrosoftAppPassword      
    });
    
    var bot = new builder.UniversalBot(connector);
    
    bot.dialog('/', [
    
    function (session) {
        builder.Prompts.text(session, "Hello, and welcome to QnA Factbot! What's your name?");
    },
    
    function (session, results) {
        userName = results.response;
        builder.Prompts.number(session, "Hi " + userName + ", how many years have you been writing code?"); 
    },
    
    function (session, results) {
        yearsCoding = results.response;
        builder.Prompts.choice(session, "What language do you love the most?", ["C#", "Python", "Node.js", "Visual FoxPro"]);
    },
    
    function (session, results) {
        selectedLanguage = results.response.entity;   
    
        session.send("Okay, " + userName + ", I think I've got it:" +
                    " You've been writing code for " + yearsCoding + " years," +
                    " and prefer to use " + selectedLanguage + ".");
    }]);
     
    var restify = require('restify');
    var server = restify.createServer();

    server.listen(3978, function() {
        console.log('test bot endpoint at http://localhost:3978/api/messages');
    });

    server.post('/api/messages', connector.listen());    
    ```

1. <span data-ttu-id="f0c04-114">Impostare punti di interruzione alle righe 20, 25 e 30 facendo clic sul margine a sinistra.</span><span class="sxs-lookup"><span data-stu-id="f0c04-114">Set breakpoints on lines 20, 25, and 30 by clicking in the margin on the left.</span></span>
 
    ![Aggiunta di punti di interruzione al file app.js](../media-draft/5-vs-add-breakpoints.png)

1. <span data-ttu-id="f0c04-116">Fare clic sul pulsante **Debug** sulla barra delle attività, quindi fare clic sulla freccia verde per avviare una sessione di debug.</span><span class="sxs-lookup"><span data-stu-id="f0c04-116">Click the **Debug** button in the activity bar, and then click the green arrow to start a debugging session.</span></span> <span data-ttu-id="f0c04-117">Verificare che nella console di debug compaia "test bot endpoint at http://localhost:3978/api/messages".</span><span class="sxs-lookup"><span data-stu-id="f0c04-117">Confirm that "test bot endpoint at http://localhost:3978/api/messages" appears in the debug console.</span></span>
 
    ![Avvio del debugger](../media-draft/5-vs-launch-debugger.png)

1. <span data-ttu-id="f0c04-119">Il codice del bot è ora eseguito in locale.</span><span class="sxs-lookup"><span data-stu-id="f0c04-119">Your bot code is now running locally.</span></span> <span data-ttu-id="f0c04-120">Avviare Bot Framework Emulator e fare clic su **Create a new bot configuration** (Crea nuova configurazione bot).</span><span class="sxs-lookup"><span data-stu-id="f0c04-120">Launch the Bot Framework Emulator and click **Create a new bot configuration**.</span></span> <span data-ttu-id="f0c04-121">Immettere il nome del bot e l'URL del bot visualizzato nella console di debug nel passaggio precedente.</span><span class="sxs-lookup"><span data-stu-id="f0c04-121">Enter the bot name and the bot URL displayed in the debug console in the previous step.</span></span> <span data-ttu-id="f0c04-122">Fare clic su **Save and connect** (Salva e connetti) e salvare il file di configurazione nella posizione scelta.</span><span class="sxs-lookup"><span data-stu-id="f0c04-122">Then, click **Save and connect** and save the configuration file in the location of your choice.</span></span>

    > <span data-ttu-id="f0c04-123">In futuro sarà possibile riconnettersi al bot semplicemente facendo clic sul nome del bot in "My Bots" (Bot personali).</span><span class="sxs-lookup"><span data-stu-id="f0c04-123">In the future, you can reconnect to the bot simply by clicking the bot name under "My Bots".</span></span>

    ![Connessione al bot](../media-draft/5-new-bot-configuration.png)

1. <span data-ttu-id="f0c04-125">Digitare "hi" nella casella nella parte inferiore dell'emulatore e premere **INVIO**.</span><span class="sxs-lookup"><span data-stu-id="f0c04-125">Type "hi" into the box at the bottom of the emulator and press **Enter**.</span></span> <span data-ttu-id="f0c04-126">Verificare che Visual Studio Code si interrompa alla riga 20 di **app.js**.</span><span class="sxs-lookup"><span data-stu-id="f0c04-126">Confirm that Visual Studio Code breaks on line 20 of **app.js**.</span></span> <span data-ttu-id="f0c04-127">Fare quindi clic sul pulsante **Continua** sulla barra degli strumenti di debug di Visual Studio Code e tornare all'emulatore per visualizzare la risposta del bot.</span><span class="sxs-lookup"><span data-stu-id="f0c04-127">Then, click the **Continue** button in Visual Studio Code's debugging toolbar and return to the emulator to see the bot's response.</span></span>
 
    ![Prosecuzione nel debugger](../media-draft/5-continue-debugging.png)

1. <span data-ttu-id="f0c04-129">Il bot formulerà una serie di domande.</span><span class="sxs-lookup"><span data-stu-id="f0c04-129">The bot will ask you a series of questions.</span></span> <span data-ttu-id="f0c04-130">Rispondere e fare clic su **Continua** in Visual Studio Code ogni volta che viene raggiunto un punto di interruzione.</span><span class="sxs-lookup"><span data-stu-id="f0c04-130">Answer them and click **Continue** in Visual Studio Code each time a breakpoint is hit.</span></span> <span data-ttu-id="f0c04-131">Al termine, fare clic sul pulsante **Arresta** sulla barra degli strumenti di debug per terminare la sessione di debug.</span><span class="sxs-lookup"><span data-stu-id="f0c04-131">When you're done, click the **Stop** button in the debugging toolbar to end the debugging session.</span></span>

<span data-ttu-id="f0c04-132">A questo punto è stato ottenuto un bot completamente funzionante e si è appreso a eseguirne il debug in locale in Microsoft Bot Framework Emulator.</span><span class="sxs-lookup"><span data-stu-id="f0c04-132">At this point, you have a fully functioning bot and know how to debug it by running it locally in the Microsoft Bot Framework Emulator.</span></span> <span data-ttu-id="f0c04-133">Il passaggio successivo consiste nel rendere il bot più intelligente connettendolo alla knowledge base pubblicata.</span><span class="sxs-lookup"><span data-stu-id="f0c04-133">The next step is to make the bot more intelligent by connecting it to the knowledge base you published.</span></span>