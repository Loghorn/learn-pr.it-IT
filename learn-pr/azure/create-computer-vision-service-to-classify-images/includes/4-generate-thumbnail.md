<span data-ttu-id="79e8f-101">I distributori principali dei prodotti dell'azienda scansionano ed eseguono l'upload degli scaffali del magazzino di cui eseguono il restocking.</span><span class="sxs-lookup"><span data-stu-id="79e8f-101">Frontline distributors of your products scan and upload images of store shelves they're restocking.</span></span> <span data-ttu-id="79e8f-102">L'utente è un responsabile dello sviluppo presso l'azienda e deve creare anteprime delle immagini.</span><span class="sxs-lookup"><span data-stu-id="79e8f-102">As a lead developer at your company, you are responsible for creating thumbnails of the images.</span></span> <span data-ttu-id="79e8f-103">Le anteprime vengono usate nei report online creati dall'utente per il team di vendite.</span><span class="sxs-lookup"><span data-stu-id="79e8f-103">The thumbnails are used in the online reports you create for the sales team.</span></span> <span data-ttu-id="79e8f-104">Di recente, il responsabile vendite ha comunicato che le immagini nei report sono sfocate e spesso non inquadrano la parte anteriore e centrale del prodotto. Questo complica la scansione e la creazione del report di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="79e8f-104">Recently, the sales manager said that the images in the report are blurry and often don't have the product front and center, making it difficult to scan the large report.</span></span> <span data-ttu-id="79e8f-105">Spetta all'utente migliorare la situazione.</span><span class="sxs-lookup"><span data-stu-id="79e8f-105">It's up to you to improve the situation.</span></span>

<span data-ttu-id="79e8f-106">L'utente decide di provare la funzionalità di generazione di anteprime dell'API Visione artificiale.</span><span class="sxs-lookup"><span data-stu-id="79e8f-106">You decide to try the thumbnail generation feature of the Computer Vision API.</span></span> <span data-ttu-id="79e8f-107">Si aspetta di ottenere risultati migliori di quelli restituiti dalla funzione di ridimensionamento scritta dall'utente stesso.</span><span class="sxs-lookup"><span data-stu-id="79e8f-107">Perhaps it can do a better job than the resizing function you wrote.</span></span>

<span data-ttu-id="79e8f-108">Visione artificiale genera prima di tutto un'anteprima di qualità elevata e quindi analizza gli oggetti inclusi nell'immagine per determinare l'area di interesse.</span><span class="sxs-lookup"><span data-stu-id="79e8f-108">Computer Vision first generates a high-quality thumbnail and then analyzes the objects within the image to determine the region of interest (ROI).</span></span> <span data-ttu-id="79e8f-109">Quindi Visione artificiale ritaglia l'immagine per soddisfare i requisiti dell'area di interesse.</span><span class="sxs-lookup"><span data-stu-id="79e8f-109">Computer Vision then crops the image to fit the requirements of the region of interest.</span></span> <span data-ttu-id="79e8f-110">L'anteprima generata può essere visualizzata con proporzioni diverse da quelle dell'immagine originale, in base alle esigenze specifiche.</span><span class="sxs-lookup"><span data-stu-id="79e8f-110">The generated thumbnail can be presented using an aspect ratio that is different from the aspect ratio of the original image, depending on your needs.</span></span> <span data-ttu-id="79e8f-111">Qui si vede l'esempio in azione.</span><span class="sxs-lookup"><span data-stu-id="79e8f-111">Let's see it in action.</span></span>

## <a name="calling-the-computer-vision-api-to-generate-a-thumbnail"></a><span data-ttu-id="79e8f-112">Chiamata dell'API Visione artificiale per generare un'anteprima</span><span class="sxs-lookup"><span data-stu-id="79e8f-112">Calling the Computer Vision API to generate a thumbnail</span></span>

<span data-ttu-id="79e8f-113">L'operazione `generateThumbnail` crea un'immagine di anteprima con la larghezza e l'altezza specificate dall'utente.</span><span class="sxs-lookup"><span data-stu-id="79e8f-113">The `generateThumbnail` operation creates a thumbnail image with the user-specified width and height.</span></span> <span data-ttu-id="79e8f-114">Per impostazione predefinita il servizio analizza l'immagine, identifica l'area di interesse e genera le coordinate di ritaglio intelligente sulla base dell'area di interesse.</span><span class="sxs-lookup"><span data-stu-id="79e8f-114">By default, the service analyzes the image, identifies the region of interest (ROI), and generates smart cropping coordinates based on the ROI.</span></span> <span data-ttu-id="79e8f-115">La funzionalità di ritaglio intelligente è utile quando si specificano proporzioni diverse da quelle dell'immagine di input.</span><span class="sxs-lookup"><span data-stu-id="79e8f-115">Smart cropping helps when you specify an aspect ratio that differs from aspect ratio of the input image.</span></span> <span data-ttu-id="79e8f-116">L'URL della richiesta ha il formato seguente:</span><span class="sxs-lookup"><span data-stu-id="79e8f-116">The request URL has the following format:</span></span>

`https://<region>.api.cognitive.microsoft.com/vision/v2.0/generateThumbnail?width=<...>&height=<...>&smartCropping=<...>`

<span data-ttu-id="79e8f-117">È possibile fornire all'API parametri diversi per generare l'anteprima corretta in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="79e8f-117">Different parameters can be provided to the API to generate the proper thumbnail for your needs.</span></span> <span data-ttu-id="79e8f-118">I parametri `width` e `height` sono obbligatori.</span><span class="sxs-lookup"><span data-stu-id="79e8f-118">The `width` and `height` parameters are required.</span></span> <span data-ttu-id="79e8f-119">Tali parametri indicano all'API le dimensioni necessarie per un'immagine specifica.</span><span class="sxs-lookup"><span data-stu-id="79e8f-119">They tell the API which size you need for a specific image.</span></span> <span data-ttu-id="79e8f-120">Il parametro `smartCropping` genera un ritaglio più intelligente analizzando l'area di interesse nell'immagine per includerla nell'anteprima.</span><span class="sxs-lookup"><span data-stu-id="79e8f-120">The `smartCropping` parameter generates smarter cropping by analyzing the region of interest in your image to keep it within the thumbnail.</span></span> <span data-ttu-id="79e8f-121">Ad esempio, con il ritaglio intelligente abilitato, l'immagine ritagliata di un profilo mantiene il viso della persona all'interno della cornice anche quando le proporzioni dell'immagine sono diverse.</span><span class="sxs-lookup"><span data-stu-id="79e8f-121">As an example, with smart cropping enabled, a cropped profile picture would keep someone's face within the picture frame even when the picture has a different aspect ratio.</span></span>

[!INCLUDE [get-key-note](./get-key.md)]

## <a name="generate-a-thumbnail"></a><span data-ttu-id="79e8f-122">Generare un'anteprima</span><span class="sxs-lookup"><span data-stu-id="79e8f-122">Generate a thumbnail</span></span>

<span data-ttu-id="79e8f-123">Per questo esempio si userà l'immagine seguente, ma è possibile provare lo stesso comando con URL corrispondenti ad altre immagini.</span><span class="sxs-lookup"><span data-stu-id="79e8f-123">We'll use the following image in this example, but you're free to try the same command with URLs to other images.</span></span>

![Immagine di un cane bianco su un prato verde.](../media/4-dog.png)

1. <span data-ttu-id="79e8f-125">Eseguire i comandi seguenti in Azure Cloud Shell.</span><span class="sxs-lookup"><span data-stu-id="79e8f-125">Execute the following commands in Azure Cloud Shell.</span></span> <span data-ttu-id="79e8f-126">Sostituire `<region>` nel comando con l'area dell'account di Servizi cognitivi</span><span class="sxs-lookup"><span data-stu-id="79e8f-126">Replace `<region>` in the command with the region of your cognitive services account</span></span>

```azurecli
curl "https://<region>.api.cognitive.microsoft.com/vision/v2.0/generateThumbnail?width=100&height=100&smartCropping=true" \
-H "Ocp-Apim-Subscription-Key: $key" \
-H "Content-Type: application/json" \
-d "{'url' : 'https://raw.githubusercontent.com/MicrosoftDocs/mslearn-process-images-with-the-computer-vision-service/master/images/dog.png'}" \
-o  thumbnail.jpg
```

<span data-ttu-id="79e8f-127">In questo esempio si richiede al servizio di creare un'anteprima con dimensioni 100x100.</span><span class="sxs-lookup"><span data-stu-id="79e8f-127">In this example, we ask the service to create a thumbnail that is 100x100.</span></span> <span data-ttu-id="79e8f-128">Il ritaglio intelligente è abilitato.</span><span class="sxs-lookup"><span data-stu-id="79e8f-128">Smart cropping is enabled.</span></span> <span data-ttu-id="79e8f-129">Una risposta corretta contiene il file binario dell'immagine di anteprima, che viene scritto in un file con nome thumbnail.jpg.</span><span class="sxs-lookup"><span data-stu-id="79e8f-129">A successful response contains the thumbnail image binary, which we write to a file called thumbnail.jpg.</span></span>

> [!CAUTION]
> <span data-ttu-id="79e8f-130">Il parametro `-o` reindirizza l'output a un file.</span><span class="sxs-lookup"><span data-stu-id="79e8f-130">The `-o` parameter redirects the output to a file.</span></span> <span data-ttu-id="79e8f-131">Il file viene sempre sovrascritto, pertanto per mantenere più anteprime mentre si prova questo comando, modificare ogni volta il nome del file.</span><span class="sxs-lookup"><span data-stu-id="79e8f-131">The file is always overwritten, so if you want to keep around  more than one thumbnail while trying this command, change the file name.</span></span>

## <a name="view-the-generated-thumbnail"></a><span data-ttu-id="79e8f-132">Visualizzare l'anteprima generata</span><span class="sxs-lookup"><span data-stu-id="79e8f-132">View the generated thumbnail</span></span>

<span data-ttu-id="79e8f-133">L'anteprima generata sarà disponibile nell'account di archiviazione di Azure Cloud Shell.</span><span class="sxs-lookup"><span data-stu-id="79e8f-133">The generated thumbnail will be found in your Azure Cloud Shell storage account.</span></span> <span data-ttu-id="79e8f-134">Il nome del file è **thumbnail.jpg**.</span><span class="sxs-lookup"><span data-stu-id="79e8f-134">We named the file **thumbnail.jpg**.</span></span>

<span data-ttu-id="79e8f-135">Cloud Shell in Microsoft Learn non può scaricare file, ma è possibile seguire queste istruzioni per scaricare l'anteprima tramite il portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="79e8f-135">The Cloud Shell in Microsoft Learn doesn't have the ability to download files, but you can follow these instructions to download the thumbnail through the Azure portal.</span></span>

1. <span data-ttu-id="79e8f-136">Eseguire i comandi seguenti in Azure Cloud Shell per verificare che il file **thumbnail.jpg** esista nella cartella principale.</span><span class="sxs-lookup"><span data-stu-id="79e8f-136">Execute the following commands in Azure Cloud Shell to confirm that the file **thumbnail.jpg** exists in your home folder.</span></span>

    ```azurecli
    cd ~
    ls -l
    ```



1. <span data-ttu-id="79e8f-137">Eseguire il comando seguente per spostare `thumbnail.jpg` nella cartella clouddrive.</span><span class="sxs-lookup"><span data-stu-id="79e8f-137">Execute the following command to move `thumbnail.jpg` into the clouddrive folder.</span></span>

    ```azurecli
    mv ~/thumbnail.jpg ~/clouddrive
    ```
1. <span data-ttu-id="79e8f-138">Accedere al [portale di Azure](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true) usando lo stesso account con cui è stato attivato l'ambiente sandbox.</span><span class="sxs-lookup"><span data-stu-id="79e8f-138">Sign into the [Azure portal](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true) using the same account you activated the sandbox with.</span></span>
1. <span data-ttu-id="79e8f-139">Nel pannello **Tutte le risorse** del dashboard del portale selezionare l'account di archiviazione il cui nome inizia con `cloudshell`.</span><span class="sxs-lookup"><span data-stu-id="79e8f-139">In the **All resources** panel of the portal dashboard, select the storage account with name beginning with `cloudshell`.</span></span>
1. <span data-ttu-id="79e8f-140">Nel pannello Account di archiviazione selezionare **Storage Explorer**, quindi **CONDIVISIONI FILE** e infine la condivisione file nella raccolta il cui nome inizia con \*\*cloudshellfiles\*\*\*.</span><span class="sxs-lookup"><span data-stu-id="79e8f-140">In the Storage account panel, select **Storage Explorer**, then **FILE SHARES** and then the file share in that collection with the name beginning with \*\*cloudshellfiles\*\*\*.</span></span>
1. <span data-ttu-id="79e8f-141">Selezionare il file *thunbnail.jpg* e quindi **Scarica** nel menu in alto per visualizzare l'immagine.</span><span class="sxs-lookup"><span data-stu-id="79e8f-141">Select the *thunbnail.jpg* file and then **Download** from the top menu to see the image.</span></span>

<span data-ttu-id="79e8f-142">L'operazione `generateThumbnail` è un generatore di anteprime avanzato, in grado includere l'area di interesse di un'immagine nell'anteprima.</span><span class="sxs-lookup"><span data-stu-id="79e8f-142">The `generateThumbnail` operation is a powerful thumbnail generator that is capable of keeping the Region Of Interest (ROI) of an image in the thumbnail.</span></span>

<span data-ttu-id="79e8f-143">Per altre informazioni sull'operazione `generateThumbnails`, vedere la documentazione di riferimento relativa a [Richiesta di generazione di un'anteprima](https://westus.dev.cognitive.microsoft.com/docs/services/5adf991815e1060e6355ad44/operations/56f91f2e778daf14a499e1fb).</span><span class="sxs-lookup"><span data-stu-id="79e8f-143">For more information about the `generateThumbnails` operation, see the [Get Thumbnail](https://westus.dev.cognitive.microsoft.com/docs/services/5adf991815e1060e6355ad44/operations/56f91f2e778daf14a499e1fb) reference documentation.</span></span>