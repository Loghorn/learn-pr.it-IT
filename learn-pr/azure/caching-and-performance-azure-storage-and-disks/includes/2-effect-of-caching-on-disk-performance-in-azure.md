<span data-ttu-id="4f51c-101">Come per i computer locali, le prestazioni delle macchine virtuali spesso possono essere direttamente collegate alla velocità di lettura e scrittura dei dati.</span><span class="sxs-lookup"><span data-stu-id="4f51c-101">Much like your local computers, virtual machine performance can often be tied directly to how quickly it can read and write data.</span></span> <span data-ttu-id="4f51c-102">Per capire come migliorare queste prestazioni, è necessario innanzitutto identificare il modo in cui vengono misurate e le impostazioni e le scelte che vi influiscono.</span><span class="sxs-lookup"><span data-stu-id="4f51c-102">In order to understand how to improve that performance, we first have to understand how performance is measured and the settings and choices that affect it.</span></span>

<span data-ttu-id="4f51c-103">È necessario esaminare in particolare i dischi e l'archiviazione sottostanti usati per le macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="4f51c-103">We are looking specifically at the underlying disks and storage used for VMs.</span></span> <span data-ttu-id="4f51c-104">Nell'analizzare le prestazioni, tenere presente che è necessario considerare anche il livello dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="4f51c-104">When you are looking at performance, keep in mind that you will also have to consider the application layer.</span></span> <span data-ttu-id="4f51c-105">Ad esempio, se si esegue un database in una macchina virtuale, sarà utile esaminare le impostazioni per le prestazioni specifiche del database per verificare che sia ottimizzato per la macchina virtuale e l'archiviazione eseguite nel database stesso.</span><span class="sxs-lookup"><span data-stu-id="4f51c-105">For example, if you are running a database in a VM, you will want to look at the performance settings specific to the database to ensure it is optimized for the VM and storage you are running it on.</span></span>

<span data-ttu-id="4f51c-106">Per iniziare, verranno definiti alcuni termini e le garanzie offerte da Azure al riguardo.</span><span class="sxs-lookup"><span data-stu-id="4f51c-106">Let's start by defining a few terms and the guarantees Azure makes about them.</span></span>

## <a name="io-operations-per-second"></a><span data-ttu-id="4f51c-107">Operazioni di I/O al secondo</span><span class="sxs-lookup"><span data-stu-id="4f51c-107">I/O operations per second</span></span>

<span data-ttu-id="4f51c-108">Il tipo di archiviazione selezionato (Standard o Premium) definisce la velocità dei dischi.</span><span class="sxs-lookup"><span data-stu-id="4f51c-108">The storage type you select (standard or premium) will decide how fast your disks are.</span></span> <span data-ttu-id="4f51c-109">Queste prestazioni vengono misurate in termini di operazioni di I/O al secondo, o IOPS.</span><span class="sxs-lookup"><span data-stu-id="4f51c-109">We measure this performance in I/O operations per second, or IOPS (pronounced "eye-ops").</span></span>

<span data-ttu-id="4f51c-110">Le operazioni di I/O al secondo indicano il numero di richieste che possono essere elaborate dal disco in un secondo.</span><span class="sxs-lookup"><span data-stu-id="4f51c-110">IOPS is number of requests that can be processed by the disk in one second.</span></span> <span data-ttu-id="4f51c-111">Una singola richiesta è un'operazione di lettura o scrittura.</span><span class="sxs-lookup"><span data-stu-id="4f51c-111">A single request is a read or write operation.</span></span> <span data-ttu-id="4f51c-112">Questa misurazione viene applicata direttamente all'archiviazione.</span><span class="sxs-lookup"><span data-stu-id="4f51c-112">This measurement is applied directly to storage.</span></span> <span data-ttu-id="4f51c-113">Ad esempio, un disco in grado di eseguire **5000 operazioni di I/O al secondo** è teoricamente in grado di elaborare 5.000 operazioni di lettura e/o scrittura al secondo.</span><span class="sxs-lookup"><span data-stu-id="4f51c-113">For example, if you have a disk that is capable of doing a **5000 IOPS**, it means that it is theoretically capable of processing 5,000 read and or write operations per second.</span></span>

<span data-ttu-id="4f51c-114">Le operazioni di I/O al secondo influiscono direttamente sulle prestazioni dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="4f51c-114">IOPS directly affects your application performance.</span></span> <span data-ttu-id="4f51c-115">Alcune applicazioni, come i siti Web per la vendita al dettaglio, hanno bisogno di operazioni di I/O al secondo elevate per poter gestire tutte le richieste di I/O minime e casuali che devono essere elaborare rapidamente per mantenere il sito reattivo.</span><span class="sxs-lookup"><span data-stu-id="4f51c-115">Some applications, such as retail websites, need high IOPS to handle all the small and random IO requests that must be processed quickly to keep the site responsive.</span></span>

### <a name="iops-in-azure"></a><span data-ttu-id="4f51c-116">Operazioni di I/O al secondo in Azure</span><span class="sxs-lookup"><span data-stu-id="4f51c-116">IOPS in Azure</span></span>

<span data-ttu-id="4f51c-117">Quando si collega un disco di Archiviazione Premium a una macchina virtuale a scalabilità elevata, Azure effettua automaticamente il provisioning di un numero garantito di operazioni di I/O al secondo, in base alla specifica del disco.</span><span class="sxs-lookup"><span data-stu-id="4f51c-117">When you attach a premium storage disk to your high scale VM, Azure provisions for you a guaranteed number of IOPS as per the disk specification.</span></span> <span data-ttu-id="4f51c-118">Ad esempio, un disco **P50** effettua il provisioning di **7500 operazioni di I/O al secondo**.</span><span class="sxs-lookup"><span data-stu-id="4f51c-118">For example, a **P50** disk provisions **7500 IOPS**.</span></span> <span data-ttu-id="4f51c-119">Ogni dimensione di macchina virtuale a scalabilità elevata prevede anche un limite di operazioni di I/O al secondo specifico sostenibile.</span><span class="sxs-lookup"><span data-stu-id="4f51c-119">Each high scale VM size also has a specific IOPS limit that it can sustain.</span></span> <span data-ttu-id="4f51c-120">Ad esempio, una macchina virtuale **GS5 Standard** ha un limite di **80.000 operazioni di I/O al secondo**.</span><span class="sxs-lookup"><span data-stu-id="4f51c-120">For example, a **Standard GS5** VM has an **80,000 IOPS** limit.</span></span>

<span data-ttu-id="4f51c-121">Le operazioni di I/O al secondo sono una misurazione dei dischi di archiviazione, ma hanno un limite _teorico_, ovvero altri due fattori possono influire sulle effettive prestazioni dell'applicazione: la **velocità effettiva** e la **latenza**.</span><span class="sxs-lookup"><span data-stu-id="4f51c-121">IOPS is a measurement of the storage disks, however it's a _theoretical_ limit - two other factors can affect the actual application performance: **throughput** and **latency**.</span></span>

### <a name="what-is-throughput"></a><span data-ttu-id="4f51c-122">Che cos'è la velocità effettiva?</span><span class="sxs-lookup"><span data-stu-id="4f51c-122">What is throughput?</span></span>
<span data-ttu-id="4f51c-123">La velocità effettiva, chiamata anche "larghezza di banda" è la quantità di dati che l'applicazione invia ai dischi di archiviazione in un intervallo specificato (in genere al secondo).</span><span class="sxs-lookup"><span data-stu-id="4f51c-123">Throughput (also called "bandwidth") is the amount of data that your application is sending to the storage disks in a specified interval (typically per second).</span></span> <span data-ttu-id="4f51c-124">Se l'applicazione esegue operazioni di I/O con blocchi di dati di grandi dimensioni, richiede una velocità effettiva elevata.</span><span class="sxs-lookup"><span data-stu-id="4f51c-124">If your application is performing I/O with large blocks of data, it requires high throughput.</span></span>

<span data-ttu-id="4f51c-125">Azure effettua il provisioning della velocità effettiva in dischi di archiviazione Premium in base alla specifica di ogni disco.</span><span class="sxs-lookup"><span data-stu-id="4f51c-125">Azure provisions throughput in premium storage disks based on that disks' specification.</span></span> <span data-ttu-id="4f51c-126">Ad esempio, un disco **P50** effettua il provisioning di una velocità effettiva del disco di **250 MB al secondo**.</span><span class="sxs-lookup"><span data-stu-id="4f51c-126">For example, a **P50** disk provisions **250 MB per second** disk throughput.</span></span> <span data-ttu-id="4f51c-127">Ogni dimensione di macchina virtuale a scalabilità elevata prevede anche un _limite di velocità effettiva_ specifico sostenibile.</span><span class="sxs-lookup"><span data-stu-id="4f51c-127">Each high scale VM size also has as specific _throughput limit_ that it can sustain.</span></span> <span data-ttu-id="4f51c-128">Ad esempio, una macchina virtuale **GS5 Standard** ha una velocità effettiva massima di **2.000 MB al secondo**.</span><span class="sxs-lookup"><span data-stu-id="4f51c-128">For example, **Standard GS5** VM has a maximum throughput of **2,000 MB per second**.</span></span>

#### <a name="iops-vs-throughput"></a><span data-ttu-id="4f51c-129">Operazioni di I/O al secondo e velocità effettiva</span><span class="sxs-lookup"><span data-stu-id="4f51c-129">IOPS vs. throughput</span></span>

<span data-ttu-id="4f51c-130">Le operazioni di I/O al secondo e la velocità effettiva hanno una relazione diretta e modificando le prime si influirà sulla seconda.</span><span class="sxs-lookup"><span data-stu-id="4f51c-130">Throughput and IOPS have a direct relationship, changing one will have a direct impact on the other.</span></span> <span data-ttu-id="4f51c-131">Per ottenere un limite teorico di velocità effettiva, è possibile usare questa formula: `IOPS x I/O size = throughput`.</span><span class="sxs-lookup"><span data-stu-id="4f51c-131">To get a theoretical limit of throughput you can use the formula: `IOPS x I/O size = throughput`.</span></span> <span data-ttu-id="4f51c-132">È importante tenere presenti entrambi i valori quando si pianifica l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="4f51c-132">It's important to consider both of these values when planning your application.</span></span>

### <a name="what-is-latency"></a><span data-ttu-id="4f51c-133">Che cos'è la latenza?</span><span class="sxs-lookup"><span data-stu-id="4f51c-133">What is latency?</span></span>

<span data-ttu-id="4f51c-134">La lettura e la scrittura di dati richiedono tempo.</span><span class="sxs-lookup"><span data-stu-id="4f51c-134">Reading and writing data takes time.</span></span> <span data-ttu-id="4f51c-135">È qui che entra in gioco la _latenza_.</span><span class="sxs-lookup"><span data-stu-id="4f51c-135">This is where _latency_ comes in.</span></span> <span data-ttu-id="4f51c-136">La latenza è il tempo necessario all'app per inviare una richiesta al disco e ottenere la risposta.</span><span class="sxs-lookup"><span data-stu-id="4f51c-136">Latency is the time it takes your app to send a request to the disk and get a response.</span></span> <span data-ttu-id="4f51c-137">In pratica, la latenza indica il tempo necessario per _elaborare_ una singola richiesta di I/O di lettura o scrittura.</span><span class="sxs-lookup"><span data-stu-id="4f51c-137">Essentially, latency tells us how long it takes to _process_ a single read or write I/O request.</span></span>

<span data-ttu-id="4f51c-138">La latenza limita le operazioni di I/O al secondo.</span><span class="sxs-lookup"><span data-stu-id="4f51c-138">Latency puts a limit on IOPS.</span></span> <span data-ttu-id="4f51c-139">Ad esempio, se il disco può gestire 5000 operazioni di I/O al secondo, ma l'elaborazione di ogni operazione dura 10 ms, l'app verrà limitata a 100 operazioni al secondo a causa del tempo di elaborazione.</span><span class="sxs-lookup"><span data-stu-id="4f51c-139">For example, if our disk can handle 5000 IOPS but each operation takes 10 ms to process, then our app will be capped to 100 operation per second due to the processing time.</span></span> <span data-ttu-id="4f51c-140">Questo è solo un esempio e la maggior parte delle volte la latenza è molto inferiore.</span><span class="sxs-lookup"><span data-stu-id="4f51c-140">This is a simple example, most of the time latency will be much lower.</span></span> <span data-ttu-id="4f51c-141">In definitiva, la latenza e la velocità effettiva determineranno la velocità con cui l'app può elaborare i dati dall'archiviazione.</span><span class="sxs-lookup"><span data-stu-id="4f51c-141">Ultimately, latency and throughput will determine how fast your app can process data from storage.</span></span> 

<span data-ttu-id="4f51c-142">Archiviazione Premium offre latenze coerentemente ridotte ed è possibile ottenere una latenza ancora migliore in caso di necessità tramite la _memorizzazione nella cache_.</span><span class="sxs-lookup"><span data-stu-id="4f51c-142">Premium Storage provides consistent low latencies and you can achieve even better latency when necessary through _caching_.</span></span> 

## <a name="testing-your-disk-performance"></a><span data-ttu-id="4f51c-143">Test delle prestazioni dei dischi</span><span class="sxs-lookup"><span data-stu-id="4f51c-143">Testing your disk performance</span></span>

<span data-ttu-id="4f51c-144">È possibile modificare e bilanciare le operazioni di I/O al secondo, la velocità effettiva e la latenza dei dischi delle macchine Virtuali selezionando il tipo di archiviazione e le dimensioni di macchina virtuale più appropriati.</span><span class="sxs-lookup"><span data-stu-id="4f51c-144">You can adjust and balance the IOPS, throughput and latency of your VM disks by selecting the right VM size and storage type.</span></span> <span data-ttu-id="4f51c-145">In genere, le dimensioni di macchina virtuale maggiori e più costose offriranno migliori garanzie di livelli massimi di operazioni di I/O al secondo e velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="4f51c-145">Typically the larger or more expensive VM sizes will have higher guarantees for max IOPS and throughput.</span></span> <span data-ttu-id="4f51c-146">Aggiungendo a questa equazione anche la scelta tra Archiviazione Standard e Premium e tra unità HDD e SSD, sarà possibile valutare le prestazioni provando diversi parametri.</span><span class="sxs-lookup"><span data-stu-id="4f51c-146">Add into that equation Standard vs. Premium storage and HDD vs. SSD choices and you have several parameters to play with.</span></span>

<span data-ttu-id="4f51c-147">Per selezionare la combinazione più appropriata, è necessario identificare i requisiti dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="4f51c-147">To select the right combination involves understanding what your application requirements are.</span></span> <span data-ttu-id="4f51c-148">Le applicazioni con I/O elevato come i server di database o i sistemi di elaborazione delle transazioni online richiedono un numero maggiore di operazioni di I/O al secondo, mentre le applicazioni basate prevalentemente sul calcolo possono accettare requisiti molto inferiori.</span><span class="sxs-lookup"><span data-stu-id="4f51c-148">High-I/O applications such as database servers or online transactional processing systems will require higher IOPS, whereas more computational based applications might get by with much lower requirements.</span></span> <span data-ttu-id="4f51c-149">Inoltre, i _tipi_ delle operazioni eseguite dalle applicazioni influiscono sulla velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="4f51c-149">In addition, the _types_ of operations the applications do will affect your throughput.</span></span> <span data-ttu-id="4f51c-150">L'I/O ad accesso casuale elevato tende a essere più lento rispetto alle letture sequenziali prolungate.</span><span class="sxs-lookup"><span data-stu-id="4f51c-150">High random access I/O tends to be slower than long sequential reads.</span></span>

<span data-ttu-id="4f51c-151">Dopo aver selezionato la configurazione, è possibile usare strumenti come [Iometer](http://iometer.org/) per testare le prestazioni del disco nelle macchine virtuali Windows e Linux.</span><span class="sxs-lookup"><span data-stu-id="4f51c-151">Once you select your configuration, you can use tools such as [Iometer](http://iometer.org/) to test your disk performance on Linux and Windows VMs.</span></span> <span data-ttu-id="4f51c-152">Questo strumento può aiutare a farsi un'idea più concreta delle prestazioni previste.</span><span class="sxs-lookup"><span data-stu-id="4f51c-152">This will give you a more real-world sense of what kind of performance to expect.</span></span> <span data-ttu-id="4f51c-153">Può anche permettere di identificare come migliorare l'utilizzo dell'archiviazione dell'app. Ad esempio, un'applicazione che esegue operazioni di I/O a thread singolo riscontrerà probabilmente prestazioni di I/O ridotte a causa della latenza.</span><span class="sxs-lookup"><span data-stu-id="4f51c-153">It can also help you to identify ways to improve your app's usage of storage - for example, an application that does single threaded I/O is likely to suffer reduced I/O performance because of latency.</span></span>

<span data-ttu-id="4f51c-154">Si esamineranno ora altre scelte che è possibile adottare per migliorare le prestazioni dei dischi.</span><span class="sxs-lookup"><span data-stu-id="4f51c-154">Let's look at some other things we can do to improve our disk performance.</span></span>

