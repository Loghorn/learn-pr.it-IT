<span data-ttu-id="f9e97-101">Immaginiamo che sia appena stata pubblicata una notizia sulla rivoluzionaria cura contro il cancro scoperta dalla propria organizzazione.</span><span class="sxs-lookup"><span data-stu-id="f9e97-101">Imagine a news story has just been published covering your organization's breakthrough cancer treatment.</span></span> <span data-ttu-id="f9e97-102">Si tratta di una tappa fondamentale nella storia della ricerca medica, destinata senza dubbio a portare un grande afflusso di traffico nel sito Web aziendale.</span><span class="sxs-lookup"><span data-stu-id="f9e97-102">This is a terrific milestone, and will undoubtedly bring a large influx of traffic to your website.</span></span> <span data-ttu-id="f9e97-103">Il sito Web sarà in grado di gestire questo aumento di traffico, oppure a causa del carico elevato rallenterà le prestazioni o smetterà di rispondere?</span><span class="sxs-lookup"><span data-stu-id="f9e97-103">Will the website handle this traffic increase, or will the load cause the site to be slow or unresponsive?</span></span>

<span data-ttu-id="f9e97-104">In questo articolo esamineremo alcuni dei principi di base che assicurano prestazioni dell'applicazione eccezionali tramite l'uso del ridimensionamento e dell'ottimizzazione.</span><span class="sxs-lookup"><span data-stu-id="f9e97-104">Here, we'll look at some of the basic principles of ensuring outstanding application performance using scaling and optimization principles.</span></span>

## <a name="what-is-scaling-and-performance-optimization"></a><span data-ttu-id="f9e97-105">Che cosa sono il ridimensionamento e l'ottimizzazione delle prestazioni?</span><span class="sxs-lookup"><span data-stu-id="f9e97-105">What is scaling and performance optimization?</span></span>

<span data-ttu-id="f9e97-106">Per ridimensionamento e ottimizzazione delle prestazioni si intende la capacità di adattare le risorse a disposizione di un'applicazione in base alle richieste che riceve.</span><span class="sxs-lookup"><span data-stu-id="f9e97-106">Scaling and performance optimization are about matching the resources available to an application with the demand it is receiving.</span></span> <span data-ttu-id="f9e97-107">L'ottimizzazione delle prestazioni include il ridimensionamento delle risorse, l'identificazione e l'ottimizzazione di potenziali colli di bottiglia e l'ottimizzazione del codice dell'applicazione per le prestazioni massime.</span><span class="sxs-lookup"><span data-stu-id="f9e97-107">Performance optimization includes scaling resources, identifying and optimizing potential bottlenecks, and optimizing your application code for peak performance.</span></span>

### <a name="scaling"></a><span data-ttu-id="f9e97-108">Ridimensionamento</span><span class="sxs-lookup"><span data-stu-id="f9e97-108">Scaling</span></span>

<span data-ttu-id="f9e97-109">Le risorse di calcolo possono essere ridimensionate, o scalate, in due direzioni:</span><span class="sxs-lookup"><span data-stu-id="f9e97-109">Compute resources can be scaled in two different directions:</span></span>

* <span data-ttu-id="f9e97-110">La *scalabilità verticale* consiste nell'aggiunta di altre risorse a una singola istanza.</span><span class="sxs-lookup"><span data-stu-id="f9e97-110">Scaling *up* is the action of adding more resources to a single instance.</span></span>
* <span data-ttu-id="f9e97-111">La *scalabilità orizzontale* consiste nell'aggiunta di istanze.</span><span class="sxs-lookup"><span data-stu-id="f9e97-111">Scaling *out* is the addition of instances.</span></span>

![Figura che mostra la scalabilità verticale e orizzontale di una macchina virtuale per aumentarne le prestazioni.](../media/scale-up-scale-out.png)

<span data-ttu-id="f9e97-113">La scalabilità verticale riguarda l'aggiunta di più risorse, come CPU o memoria, a una singola istanza.</span><span class="sxs-lookup"><span data-stu-id="f9e97-113">Scaling up is concerned with adding more resources, such as CPU or memory, to a single instance.</span></span> <span data-ttu-id="f9e97-114">Questa istanza potrebbe essere una macchina virtuale o un servizio PaaS.</span><span class="sxs-lookup"><span data-stu-id="f9e97-114">This instance could be a virtual machine or a PaaS service.</span></span> <span data-ttu-id="f9e97-115">L'aggiunta di ulteriore capacità all'istanza aumenta le risorse disponibili per l'applicazione, ma non senza un limite.</span><span class="sxs-lookup"><span data-stu-id="f9e97-115">The act of adding more capacity to the instance increases the resources available to your application, but it does come with a limit.</span></span> <span data-ttu-id="f9e97-116">La capacità delle macchine virtuali è infatti limitata a quella dell'host in cui vengono eseguite e gli host stessi hanno limitazioni fisiche.</span><span class="sxs-lookup"><span data-stu-id="f9e97-116">Virtual machines are limited to the capacity of the host they run on, and hosts themselves have physical limitations.</span></span> <span data-ttu-id="f9e97-117">Quando si scala verticalmente un'istanza, prima o poi si incorre in questi limiti, che impediscono di aggiungere ulteriori risorse all'istanza.</span><span class="sxs-lookup"><span data-stu-id="f9e97-117">Eventually, when you scale up an instance, you can run into these limits, restricting your ability to add further resources to the instance.</span></span>

<span data-ttu-id="f9e97-118">La scalabilità orizzontale riguarda l'aggiunta di ulteriori istanze a un servizio.</span><span class="sxs-lookup"><span data-stu-id="f9e97-118">Scaling out is concerned with adding additional instances to a service.</span></span> <span data-ttu-id="f9e97-119">Possono essere macchine virtuali o servizi PaaS, ma in questo caso, invece di aggiungere capacità rendendo una singola istanza più potente, si aggiunge capacità aumentando il numero totale di istanze.</span><span class="sxs-lookup"><span data-stu-id="f9e97-119">These can be virtual machines or PaaS services, but instead of adding more capacity by making a single instance more powerful, we add capacity by increasing the overall total number of instances.</span></span> <span data-ttu-id="f9e97-120">Il vantaggio della scalabilità orizzontale è che può essere applicata all'infinito se si hanno più computer da aggiungere all'architettura.</span><span class="sxs-lookup"><span data-stu-id="f9e97-120">The advantage of scaling out is that you can conceivably scale out forever if you have more machines to add to the architecture.</span></span> <span data-ttu-id="f9e97-121">La scalabilità orizzontale richiede un qualche tipo di distribuzione del carico.</span><span class="sxs-lookup"><span data-stu-id="f9e97-121">Scaling out requires some type of load distribution.</span></span> <span data-ttu-id="f9e97-122">Può essere un servizio di bilanciamento del carico che distribuisce le richieste tra i server disponibili oppure un meccanismo di individuazione dei servizi che identifica i server attivi a cui inviare le richieste.</span><span class="sxs-lookup"><span data-stu-id="f9e97-122">This could be in the form of a load balancer distributing requests across available servers, or a service discovery mechanism for identifying active servers to send requests to.</span></span>

<span data-ttu-id="f9e97-123">In entrambi i casi le risorse possono essere ridotte, riducendo di conseguenza anche i costi dell'ottimizzazione.</span><span class="sxs-lookup"><span data-stu-id="f9e97-123">In both cases, resources can be reduced, bringing cost optimization into the picture.</span></span>

### <a name="performance-optimization"></a><span data-ttu-id="f9e97-124">Ottimizzazione delle prestazioni</span><span class="sxs-lookup"><span data-stu-id="f9e97-124">Performance optimization</span></span>

<span data-ttu-id="f9e97-125">Nell'ambito dell'ottimizzazione delle prestazioni, i due elementi fondamentali che assicurano che le prestazioni siano accettabili sono la rete e l'archiviazione.</span><span class="sxs-lookup"><span data-stu-id="f9e97-125">When optimizing for performance, you'll look at network and storage to ensure performance is acceptable.</span></span> <span data-ttu-id="f9e97-126">Entrambe possono avere un impatto sul tempo di risposta dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="f9e97-126">Both can impact the response time of your application.</span></span> <span data-ttu-id="f9e97-127">La scelta delle tecnologie di rete e di archiviazione più appropriate per la propria architettura contribuirà a garantire la migliore esperienza utente.</span><span class="sxs-lookup"><span data-stu-id="f9e97-127">Selecting the right networking and storage technologies for your architecture will help you ensure you're providing the best experience for your consumers.</span></span>

<span data-ttu-id="f9e97-128">Per ottimizzare le prestazioni è importante anche conoscere le prestazioni delle applicazioni stesse.</span><span class="sxs-lookup"><span data-stu-id="f9e97-128">Performance optimization will also include understanding how the applications themselves are performing.</span></span> <span data-ttu-id="f9e97-129">Errori, codice con prestazioni insufficienti e colli di bottiglia in sistemi dipendenti possono essere individuati con uno strumento di gestione delle prestazioni delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="f9e97-129">Errors, poorly performing code, and bottlenecks in dependent systems can all be uncovered through an application performance management tool.</span></span> <span data-ttu-id="f9e97-130">Spesso questi problemi possono essere nascosti ad utenti finali, sviluppatori e amministratori, ma possono avere un impatto negativo sulle prestazioni complessive dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="f9e97-130">Often, these issues may be hidden or obfuscated for end users, developers, and administrators, but can have adverse impact on the overall performance of your application.</span></span>

## <a name="scalability-and-performance-patterns-and-practices"></a><span data-ttu-id="f9e97-131">Modelli e procedure consigliate per scalabilità e prestazioni</span><span class="sxs-lookup"><span data-stu-id="f9e97-131">Scalability and performance patterns and practices</span></span>

<span data-ttu-id="f9e97-132">Di seguito verranno presentati alcuni modelli e procedure consigliate che possono essere sfruttati per migliorare la scalabilità e le prestazioni dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="f9e97-132">Let's take a look at some patterns and practices that can be leveraged to enhance the scalability and performance of your application.</span></span>

### <a name="data-partitioning"></a><span data-ttu-id="f9e97-133">Partizionamento dei dati</span><span class="sxs-lookup"><span data-stu-id="f9e97-133">Data partitioning</span></span>

<span data-ttu-id="f9e97-134">In molte soluzioni su larga scala, i dati vengono suddivisi in partizioni separate per poter essere gestiti e per poter accedervi separatamente.</span><span class="sxs-lookup"><span data-stu-id="f9e97-134">In many large-scale solutions, data is divided into separate partitions that can be managed and accessed separately.</span></span> <span data-ttu-id="f9e97-135">La strategia di partizionamento deve essere scelta attentamente per ottimizzare le prestazioni riducendo al minimo gli effetti negativi.</span><span class="sxs-lookup"><span data-stu-id="f9e97-135">The partitioning strategy must be chosen carefully to maximize the benefits while minimizing adverse effects.</span></span> <span data-ttu-id="f9e97-136">Il partizionamento può aiutare a migliorare la scalabilità, ridurre i conflitti e ottimizzare le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="f9e97-136">Partitioning can help improve scalability, reduce contention, and optimize performance.</span></span>

### <a name="caching"></a><span data-ttu-id="f9e97-137">Memorizzazione nella cache</span><span class="sxs-lookup"><span data-stu-id="f9e97-137">Caching</span></span>

<span data-ttu-id="f9e97-138">L'uso della memorizzazione nella cache nell'architettura può contribuire a migliorare le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="f9e97-138">Use caching in your architecture can help improve performance.</span></span> <span data-ttu-id="f9e97-139">La memorizzazione nella cache è un meccanismo tramite il quale i dati o gli asset (pagine Web, immagini) usati di frequente vengono archiviati per poter essere recuperati più rapidamente.</span><span class="sxs-lookup"><span data-stu-id="f9e97-139">Caching is a mechanism to store frequently used data or assets (web pages, images) for faster retrieval.</span></span> <span data-ttu-id="f9e97-140">La memorizzazione nella cache può essere usata a diversi livelli dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="f9e97-140">Caching can be used at different layers of your application.</span></span> <span data-ttu-id="f9e97-141">È possibile usarla tra i server applicazioni e un database, per ridurre i tempi di recupero dati,</span><span class="sxs-lookup"><span data-stu-id="f9e97-141">You can use caching between your application servers and a database, to decrease data retrieval times.</span></span> <span data-ttu-id="f9e97-142">oppure tra gli utenti finali e i server Web, posizionando il contenuto statico più vicino all'utente e riducendo il tempo necessario per restituire le pagine Web all'utente finale.</span><span class="sxs-lookup"><span data-stu-id="f9e97-142">You could also use caching between your end users and your web servers, placing static content closer to the user and decreasing the time it takes to return web pages to the end user.</span></span> <span data-ttu-id="f9e97-143">La memorizzazione nella cache ha anche l'effetto secondario di eseguire l'offload delle richieste dal database o dai server Web, aumentando le prestazioni per altre richieste.</span><span class="sxs-lookup"><span data-stu-id="f9e97-143">This also has a secondary effect of offloading requests from your database or web servers, increasing the performance for other requests.</span></span>

### <a name="autoscaling"></a><span data-ttu-id="f9e97-144">Scalabilità automatica</span><span class="sxs-lookup"><span data-stu-id="f9e97-144">Autoscaling</span></span>

<span data-ttu-id="f9e97-145">La scalabilità automatica è il processo di allocazione dinamica delle risorse in base ai requisiti di corrispondenza delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="f9e97-145">Autoscaling is the process of dynamically allocating resources to match performance requirements.</span></span> <span data-ttu-id="f9e97-146">Man mano che aumenta il volume di lavoro, un'applicazione potrebbe richiedere altre risorse per gestire i livelli di prestazioni desiderate e soddisfare i contratti di servizio.</span><span class="sxs-lookup"><span data-stu-id="f9e97-146">As the volume of work grows, an application may need additional resources to maintain the desired performance levels and satisfy service-level agreements (SLAs).</span></span> <span data-ttu-id="f9e97-147">Quando la richiesta diminuisce e le risorse aggiuntive non sono più necessarie, è possibile deallocarle per ridurre al minimo i costi.</span><span class="sxs-lookup"><span data-stu-id="f9e97-147">As demand slackens and the additional resources are no longer needed, they can be de-allocated to minimize costs.</span></span>

<span data-ttu-id="f9e97-148">La scalabilità automatica sfrutta la flessibilità degli ambienti ospitati nel cloud, attenuando contemporaneamente il sovraccarico di gestione.</span><span class="sxs-lookup"><span data-stu-id="f9e97-148">Autoscaling takes advantage of the elasticity of cloud-hosted environments while easing management overhead.</span></span> <span data-ttu-id="f9e97-149">Riduce la necessità che un operatore monitori continuamente le prestazioni di un sistema e prenda decisioni sull'aggiunta o la rimozione di risorse.</span><span class="sxs-lookup"><span data-stu-id="f9e97-149">It reduces the need for an operator to continually monitor the performance of a system and make decisions about adding or removing resources.</span></span>

### <a name="decouple-resource-intensive-tasks-as-background-jobs"></a><span data-ttu-id="f9e97-150">Separare le attività a elevato utilizzo di risorse come processi in background</span><span class="sxs-lookup"><span data-stu-id="f9e97-150">Decouple resource-intensive tasks as background jobs</span></span>

<span data-ttu-id="f9e97-151">Molti tipi di applicazioni richiedono attività in background che vengono eseguite in modo indipendente dall'interfaccia utente (UI).</span><span class="sxs-lookup"><span data-stu-id="f9e97-151">Many types of applications require background tasks that run independently of the user interface (UI).</span></span> <span data-ttu-id="f9e97-152">Alcuni esempi sono i processi batch, le attività con uso intensivo della capacità di elaborazione e i processi a esecuzione prolungata come i flussi di lavoro.</span><span class="sxs-lookup"><span data-stu-id="f9e97-152">Examples include batch jobs, intensive processing tasks, and long-running processes such as workflows.</span></span> <span data-ttu-id="f9e97-153">I processi in background possono essere eseguiti senza l'interazione dell'utente: l'applicazione può avviare il processo e quindi continuare a elaborare le richieste interattive degli utenti.</span><span class="sxs-lookup"><span data-stu-id="f9e97-153">Background jobs can be executed without requiring user interaction--the application can start the job and then continue to process interactive requests from users.</span></span> <span data-ttu-id="f9e97-154">Questo consente di ridurre al minimo il carico sull'interfaccia utente dell'applicazione, consentendo di migliorare la disponibilità e di abbreviare i tempi di risposta interattiva.</span><span class="sxs-lookup"><span data-stu-id="f9e97-154">This can help to minimize the load on the application UI, which can improve availability and reduce interactive response times.</span></span>

### <a name="use-a-messaging-layer-between-services"></a><span data-ttu-id="f9e97-155">Usare un livello di messaggistica tra i servizi</span><span class="sxs-lookup"><span data-stu-id="f9e97-155">Use a messaging layer between services</span></span>

<span data-ttu-id="f9e97-156">L'aggiunta di un livello di messaggistica tra i servizi può avere un impatto positivo sulle prestazioni e la scalabilità.</span><span class="sxs-lookup"><span data-stu-id="f9e97-156">Adding a messaging layer in between services can have a benefit to performance and scalability.</span></span> <span data-ttu-id="f9e97-157">L'aggiunta di un livello di messaggistica crea un buffer per le richieste tra i servizi, che assicura il flusso costante delle richieste stesse senza errori, in caso l'applicazione non sia in grado di soddisfarle.</span><span class="sxs-lookup"><span data-stu-id="f9e97-157">Adding a messaging layer creates a buffer for requests between the services so that requests can continue to flow in without error if the application can’t keep up.</span></span> <span data-ttu-id="f9e97-158">L'applicazione gestisce quindi le richieste rispondendo nell'ordine in cui sono state ricevute.</span><span class="sxs-lookup"><span data-stu-id="f9e97-158">As the application works through the requests, they will be answered in the order in which they were received.</span></span>

### <a name="implement-scale-units"></a><span data-ttu-id="f9e97-159">Implementare unità di scala</span><span class="sxs-lookup"><span data-stu-id="f9e97-159">Implement scale units</span></span>

<span data-ttu-id="f9e97-160">Scalare come unità.</span><span class="sxs-lookup"><span data-stu-id="f9e97-160">Scale as a unit.</span></span> <span data-ttu-id="f9e97-161">Per ogni risorsa, determinare l'impatto che può avere un'attività di ridimensionamento sui sistemi dipendenti.</span><span class="sxs-lookup"><span data-stu-id="f9e97-161">For each resource, determine the impact that a scaling activity may have on dependent systems.</span></span> <span data-ttu-id="f9e97-162">In questo modo l'applicazione di operazioni di scale-out è più semplice e meno soggetta ad avere un impatto negativo sull'applicazione.</span><span class="sxs-lookup"><span data-stu-id="f9e97-162">This makes applying scale-out operations easier, and less prone to negative impact on the application.</span></span> <span data-ttu-id="f9e97-163">Ad esempio, se si aggiunge un numero x di ruoli Web e di lavoro, potrebbero essere necessari y code aggiuntive e z account di archiviazione per gestire il carico di lavoro aggiuntivo generato dai ruoli.</span><span class="sxs-lookup"><span data-stu-id="f9e97-163">For example, adding x number of web and worker roles might require y number of additional queues and z number of storage accounts to handle the additional workload generated by the roles.</span></span> <span data-ttu-id="f9e97-164">Un'unità di scala può essere costituita da x ruoli Web e di lavoro, y code e z account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="f9e97-164">A scale unit could consist of x web and worker roles, y queues, and z storage accounts.</span></span> <span data-ttu-id="f9e97-165">Progettare l'applicazione in modo che possa essere ridimensionata facilmente aggiungendo una o più unità di scala.</span><span class="sxs-lookup"><span data-stu-id="f9e97-165">Design the application so that it's easily scaled by adding one or more scale units.</span></span>

### <a name="performance-monitoring"></a><span data-ttu-id="f9e97-166">Monitoraggio delle prestazioni</span><span class="sxs-lookup"><span data-stu-id="f9e97-166">Performance monitoring</span></span>

<span data-ttu-id="f9e97-167">Le applicazioni distribuite e i servizi in esecuzione nel cloud sono, per loro natura, componenti software complessi che comprendono molte parti mobili.</span><span class="sxs-lookup"><span data-stu-id="f9e97-167">Distributed applications and services running in the cloud are, by their nature, complex pieces of software that comprise many moving parts.</span></span> <span data-ttu-id="f9e97-168">In un ambiente di produzione è importante essere in grado di rilevare il modo in cui gli utenti usano il sistema, di tracciare l'utilizzo delle risorse e, in generale, di monitorare l'integrità e le prestazioni del sistema stesso.</span><span class="sxs-lookup"><span data-stu-id="f9e97-168">In a production environment, it's important to be able to track the way in which users utilize your system, trace resource utilization, and generally monitor the health and performance of your system.</span></span> <span data-ttu-id="f9e97-169">Queste informazioni possono essere usate come strumento diagnostico per rilevare e correggere i problemi, nonché per individuare potenziali problemi e impedire che si verifichino.</span><span class="sxs-lookup"><span data-stu-id="f9e97-169">You can use this information as a diagnostic aid to detect and correct issues, and also to help spot potential problems and prevent them from occurring.</span></span>

<span data-ttu-id="f9e97-170">Esaminare tutti i livelli dell'applicazione per identificare e risolvere gli eventuali colli di bottiglia delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="f9e97-170">Look across all layers of your application and identify and remediate performance bottlenecks in your application.</span></span> <span data-ttu-id="f9e97-171">Questi colli di bottiglia potrebbero essere dovuti a una gestione insufficiente della memoria o persino al processo di aggiunta di indici nel database.</span><span class="sxs-lookup"><span data-stu-id="f9e97-171">These bottlenecks could be poor memory handling in your application, or even the process of adding indexes into your database.</span></span> <span data-ttu-id="f9e97-172">Potrebbe essere un processo iterativo, in quanto si può individuare un collo di bottiglia e in seguito scoprirne un altro di cui non si era a conoscenza.</span><span class="sxs-lookup"><span data-stu-id="f9e97-172">It may be an iterative process as you relieve one bottleneck and then uncover another that you were unaware of.</span></span>

<span data-ttu-id="f9e97-173">Con un approccio completo per il monitoraggio delle prestazioni, sarà possibile determinare i tipi di modelli e procedure consigliate da cui potrà trarre vantaggio l'architettura.</span><span class="sxs-lookup"><span data-stu-id="f9e97-173">With a thorough approach to performance monitoring, you'll be able to determine what types of patterns and practices your architecture will benefit from.</span></span>