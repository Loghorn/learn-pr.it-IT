<span data-ttu-id="407f7-101">A questo punto è possibile iniziare a implementare il servizio relativo alla temperatura.</span><span class="sxs-lookup"><span data-stu-id="407f7-101">You are now ready to start implementing the temperature service.</span></span> <span data-ttu-id="407f7-102">Nell'unità precedente si è stabilito che una soluzione senza server sarebbe la più adatta alle specifiche esigenze.</span><span class="sxs-lookup"><span data-stu-id="407f7-102">In the previous unit, you determined that a serverless solution would best fit your needs.</span></span> <span data-ttu-id="407f7-103">Ora verrà creata un'app per le funzioni per contenere la funzione di Azure.</span><span class="sxs-lookup"><span data-stu-id="407f7-103">Let's start by creating a function app to hold our Azure Function.</span></span>

## <a name="what-is-a-function-app"></a><span data-ttu-id="407f7-104">Informazioni sulle app per le funzioni</span><span class="sxs-lookup"><span data-stu-id="407f7-104">What is a function app?</span></span>

<span data-ttu-id="407f7-105">Le funzioni sono ospitate in un contesto di esecuzione chiamato **app per le funzioni**.</span><span class="sxs-lookup"><span data-stu-id="407f7-105">Functions are hosted in an execution context called a **function app**.</span></span> <span data-ttu-id="407f7-106">Le app per le funzioni vengono definite per raggruppare e strutturare in modo logico le funzioni e una risorsa di calcolo in Azure.</span><span class="sxs-lookup"><span data-stu-id="407f7-106">You define function apps to logically group and structure your functions and a compute resource in Azure.</span></span> <span data-ttu-id="407f7-107">Nell'esempio dell'ascensore, si crea un'app per le funzioni per ospitare il servizio relativo alla temperatura dell'ingranaggio di trasmissione dell'ascensore.</span><span class="sxs-lookup"><span data-stu-id="407f7-107">In our elevator example, you would create a function app to host the escalator drive gear temperature service.</span></span> <span data-ttu-id="407f7-108">Per creare l'app per le funzioni è necessario prendere alcune decisioni. In particolare, scegliere un piano di servizio e selezionare un account di archiviazione compatibile.</span><span class="sxs-lookup"><span data-stu-id="407f7-108">There are a few decisions that need to be made to create the function app; you need to choose a service plan and select a compatible storage account.</span></span>

### <a name="choosing-a-service-plan"></a><span data-ttu-id="407f7-109">Scelta di un piano di servizio</span><span class="sxs-lookup"><span data-stu-id="407f7-109">Choosing a service plan</span></span>

<span data-ttu-id="407f7-110">Le app per le funzioni possono usare uno dei due tipi di piani di servizio disponibili.</span><span class="sxs-lookup"><span data-stu-id="407f7-110">Function apps may use one of two types of service plans.</span></span> <span data-ttu-id="407f7-111">Il primo è il **piano di servizio a consumo**.</span><span class="sxs-lookup"><span data-stu-id="407f7-111">The first service plan is the **Consumption service plan**.</span></span> <span data-ttu-id="407f7-112">Questo è il piano più adatto quando si usa la piattaforma applicativa serverless di Azure.</span><span class="sxs-lookup"><span data-stu-id="407f7-112">This is the plan that you choose when using the Azure serverless application platform.</span></span> <span data-ttu-id="407f7-113">Consente la scalabilità automatica e applica un addebito quando le funzioni sono in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="407f7-113">The Consumption service plan provides automatic scaling and bills you when your functions are running.</span></span> <span data-ttu-id="407f7-114">Il piano di servizio a consumo prevede un periodo di timeout configurabile per l'esecuzione di una funzione.</span><span class="sxs-lookup"><span data-stu-id="407f7-114">The Consumption plan comes with a configurable timeout period for the execution of a function.</span></span> <span data-ttu-id="407f7-115">Per impostazione predefinita il timeout è di 5 minuti, ma può essere configurato per una durata massima di 10 minuti.</span><span class="sxs-lookup"><span data-stu-id="407f7-115">By default, it is 5 minutes, but may be configured to have a timeout as long as 10 minutes.</span></span>

<span data-ttu-id="407f7-116">Il secondo piano è detto **piano di servizio app di Azure**.</span><span class="sxs-lookup"><span data-stu-id="407f7-116">The second plan is called the **Azure App Service plan**.</span></span> <span data-ttu-id="407f7-117">Questo piano consente di evitare periodi di timeout consentendo l'esecuzione della funzione in modalità continua in una macchina virtuale definita dall'utente.</span><span class="sxs-lookup"><span data-stu-id="407f7-117">This plan allows you to avoid timeout periods by having your function run continuously on a VM that you define.</span></span> <span data-ttu-id="407f7-118">Quando si usa un piano di servizio app, si è responsabili della gestione di risorse dell'app per cui viene eseguita la funzione, quindi tecnicamente non è un piano serverless.</span><span class="sxs-lookup"><span data-stu-id="407f7-118">When using an App Service plan, you are responsible for managing the app resources the function runs on, so this is technically not a serverless plan.</span></span> <span data-ttu-id="407f7-119">Può tuttavia essere la scelta migliore se le funzioni vengono eseguite in modalità continua o richiedono una potenza di elaborazione o un tempo di esecuzione più elevati rispetto a quelli che può offrire il piano a consumo.</span><span class="sxs-lookup"><span data-stu-id="407f7-119">However, it may be a better choice if your functions are used continuously or if your functions require more processing power or execution time than the Consumption plan can provide.</span></span>

### <a name="storage-account-requirements"></a><span data-ttu-id="407f7-120">Requisiti dell'account di archiviazione</span><span class="sxs-lookup"><span data-stu-id="407f7-120">Storage account requirements</span></span>

<span data-ttu-id="407f7-121">Quando si crea un'app per le funzioni, è necessario collegarla a un account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="407f7-121">When you create a function app, it must be linked to a storage account.</span></span> <span data-ttu-id="407f7-122">È possibile selezionare un account esistente o crearne uno nuovo.</span><span class="sxs-lookup"><span data-stu-id="407f7-122">You can select an existing account or create a new one.</span></span> <span data-ttu-id="407f7-123">L'app per le funzioni usa questo account di archiviazione per le operazioni interne, ad esempio la registrazione dei dati di esecuzione delle funzioni e la gestione dei trigger di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="407f7-123">The function app uses this storage account for internal operations such as logging function executions and managing execution triggers.</span></span> <span data-ttu-id="407f7-124">Nell'ambito del piano di servizio a consumo è anche la posizione in cui vengono archiviati il codice e il file di configurazione della funzione.</span><span class="sxs-lookup"><span data-stu-id="407f7-124">On the Consumption service plan, this is also where the function code and configuration file are stored.</span></span>

## <a name="create-a-function-app"></a><span data-ttu-id="407f7-125">Creare un'app per le funzioni</span><span class="sxs-lookup"><span data-stu-id="407f7-125">Create a function app</span></span>

<span data-ttu-id="407f7-126">Ora verrà creata un'app per le funzioni nel portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="407f7-126">Let's create a function app in the Azure portal.</span></span>

1. <span data-ttu-id="407f7-127">Accedere al [portale di Azure](https://portal.azure.com?azure-portal=true) con il proprio account Azure.</span><span class="sxs-lookup"><span data-stu-id="407f7-127">Sign in to the [Azure portal](https://portal.azure.com?azure-portal=true) using your Azure account.</span></span>

1. <span data-ttu-id="407f7-128">Selezionare il pulsante **Crea una risorsa** visualizzato nell'angolo superiore sinistro del portale di Azure, quindi selezionare **Inizia subito > Serverless Function App** (App per le funzioni serverless) per aprire il pannello *Crea* dell'app per le funzioni.</span><span class="sxs-lookup"><span data-stu-id="407f7-128">Select the **Create a resource** button found on the upper left-hand corner of the Azure portal, and then select **Get started > Serverless Function App** to open the Function App *Create* blade.</span></span> <span data-ttu-id="407f7-129">In alternativa, è possibile usare l'opzione **Calcolo > App per le funzioni** che apre lo stesso pannello.</span><span class="sxs-lookup"><span data-stu-id="407f7-129">Alternatively, you can use the **Compute > Function App** option, which will open the same blade.</span></span>

  ![Screenshot del portale di Azure che illustra il pannello Crea una risorsa con la sezione Calcolo e App per le funzioni evidenziate.](../media/3-create-function-app-blade.png)

1. <span data-ttu-id="407f7-131">Scegliere un nome app globalmente univoco.</span><span class="sxs-lookup"><span data-stu-id="407f7-131">Choose a globally unique app name.</span></span> <span data-ttu-id="407f7-132">Questo nome sarà l'URL di base del servizio.</span><span class="sxs-lookup"><span data-stu-id="407f7-132">This will serve as the base URL of your service.</span></span> <span data-ttu-id="407f7-133">Ad esempio, è possibile assegnare all'app il nome **escalator-functions-xxxxxxx**, sostituendo la x con le iniziali e l'anno di nascita dell'utente.</span><span class="sxs-lookup"><span data-stu-id="407f7-133">For example, you can name it **escalator-functions-xxxxxxx**, where the x's can be replaced with your initials and your birth year.</span></span> <span data-ttu-id="407f7-134">Se il nome non risulta globalmente univoco, è possibile provare un'altra combinazione.</span><span class="sxs-lookup"><span data-stu-id="407f7-134">If this isn't globally unique, you can try any other combination.</span></span> <span data-ttu-id="407f7-135">I caratteri validi sono a-z, 0-9 e -.</span><span class="sxs-lookup"><span data-stu-id="407f7-135">Valid characters are a-z, 0-9 and -.</span></span>

1. <span data-ttu-id="407f7-136">Selezionare la sottoscrizione di Azure in cui ospitare l'app per le funzioni.</span><span class="sxs-lookup"><span data-stu-id="407f7-136">Select the Azure subscription where you would like the function app hosted.</span></span>

1. <span data-ttu-id="407f7-137">Creare un nuovo gruppo di risorse denominato **escalator-functions-group**.</span><span class="sxs-lookup"><span data-stu-id="407f7-137">Create a new resource group called **escalator-functions-group**.</span></span> <span data-ttu-id="407f7-138">L'impiego di un gruppo per contenere tutte le risorse usate in questo modulo semplificherà le successive operazioni di pulizia.</span><span class="sxs-lookup"><span data-stu-id="407f7-138">Using a resource group to hold all resources used in this module will help with clean-up later.</span></span>

1. <span data-ttu-id="407f7-139">Selezionare **Windows** come sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="407f7-139">Select **Windows** for OS.</span></span>

1. <span data-ttu-id="407f7-140">Per **Piano di hosting** selezionare il **piano a consumo**, ovvero l'opzione di hosting senza server.</span><span class="sxs-lookup"><span data-stu-id="407f7-140">For **Hosting Plan**, select the **Consumption Plan**, which is the serverless hosting option.</span></span>

1. <span data-ttu-id="407f7-141">Selezionare la località geografica più vicina all'utente (o ai clienti).</span><span class="sxs-lookup"><span data-stu-id="407f7-141">Select the geographical location closest to you (or your customers).</span></span>

1. <span data-ttu-id="407f7-142">Creare un nuovo account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="407f7-142">Create a new storage account.</span></span> <span data-ttu-id="407f7-143">Azure assegna un nome all'account in base al nome dell'app.</span><span class="sxs-lookup"><span data-stu-id="407f7-143">Azure will give it a name based on the app name.</span></span> <span data-ttu-id="407f7-144">È possibile modificarlo, se necessario, ma deve anche essere univoco.</span><span class="sxs-lookup"><span data-stu-id="407f7-144">You can change it if you like, but it must also be unique.</span></span>

1. <span data-ttu-id="407f7-145">Verificare che Azure Application Insights sia **attivato** e selezionare l'area più vicina all'utente (o ai clienti).</span><span class="sxs-lookup"><span data-stu-id="407f7-145">Make sure that Azure Application Insights is **On** and select the region closest to you (or your customers).</span></span>
  <span data-ttu-id="407f7-146">Al termine, la configurazione sarà simile a quella rappresentata nello screenshot seguente.</span><span class="sxs-lookup"><span data-stu-id="407f7-146">When you're finished, your configuration should look like the config in the following screenshot.</span></span>

  ![Screenshot del portale di Azure che illustra il pannello Crea dell'app per le funzioni con tutti i campi configurati in base alle istruzioni precedenti.](../media/3-create-function-app-settings.png)

1. <span data-ttu-id="407f7-148">Selezionare **Crea**; il processo di distribuzione richiederà alcuni minuti.</span><span class="sxs-lookup"><span data-stu-id="407f7-148">Select **Create**; deployment will take a few minutes.</span></span> <span data-ttu-id="407f7-149">L'utente riceverà una notifica al completamento dell'operazione.</span><span class="sxs-lookup"><span data-stu-id="407f7-149">You'll receive a notification once it's complete.</span></span>

## <a name="verify-your-azure-function-app"></a><span data-ttu-id="407f7-150">Verificare l'app per le funzioni di Azure</span><span class="sxs-lookup"><span data-stu-id="407f7-150">Verify your Azure function app</span></span>

1. <span data-ttu-id="407f7-151">Nel menu a sinistra del portale di Azure selezionare **Gruppi di risorse**.</span><span class="sxs-lookup"><span data-stu-id="407f7-151">From the Azure portal left-hand menu, select **Resource groups**.</span></span> <span data-ttu-id="407f7-152">Viene visualizzato **escalator-functions-group** nell'elenco dei gruppi disponibili.</span><span class="sxs-lookup"><span data-stu-id="407f7-152">You should then see the **escalator-functions-group** in the list of available groups.</span></span>

  ![Screenshot del portale di Azure che illustra il pannello Gruppi di risorse con la voce di menu Gruppi di risorse e l'elemento di elenco escalator-functions-group evidenziati.](../media/3-resource-group.png)

1. <span data-ttu-id="407f7-154">Selezionare **escalator-functions-group**.</span><span class="sxs-lookup"><span data-stu-id="407f7-154">Select the **escalator-functions-group**.</span></span> <span data-ttu-id="407f7-155">Viene visualizzato un elenco di risorse simile al seguente.</span><span class="sxs-lookup"><span data-stu-id="407f7-155">You should then see a resource list like the following list.</span></span>

  ![Screenshot del portale di Azure che illustra tutte le risorse contenute nel gruppo escalator-functions-group, tra cui le voci per un piano di servizio app, un account di archiviazione, una risorsa di Application Insights e un servizio app.](../media/3-resource-list.png)

<span data-ttu-id="407f7-157">L'elemento con l'icona di funzione a forma di fulmine, elencato come servizio app, è la nuova app per le funzioni.</span><span class="sxs-lookup"><span data-stu-id="407f7-157">The item with the lightning bolt Function icon, listed as an App Service, is your new function app.</span></span> <span data-ttu-id="407f7-158">Fare clic sull'elemento per aprire i dettagli sulla nuova funzione, a cui è stato assegnato un URL pubblico. Aprendo l'URL in un browser, viene visualizzata una pagina Web predefinita che indica che l'app per le funzioni è in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="407f7-158">You can click on it to open the details about the new function - it has a public URL assigned to it, if you open that in a browser, you should get a default web page that indicates your Function App is running.</span></span>
