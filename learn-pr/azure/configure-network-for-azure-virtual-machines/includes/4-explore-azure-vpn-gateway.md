<span data-ttu-id="26d29-101">Per integrare l'ambiente locale con Azure, è necessario poter creare una connessione crittografata.</span><span class="sxs-lookup"><span data-stu-id="26d29-101">To integrate your on-premises environment with Azure, you need the ability to create an encrypted connection.</span></span> <span data-ttu-id="26d29-102">È possibile connettersi tramite la rete Internet pubblica o mediante un collegamento dedicato.</span><span class="sxs-lookup"><span data-stu-id="26d29-102">You can connect over the public internet or over a dedicated link.</span></span> <span data-ttu-id="26d29-103">Di seguito verrà illustrato il gateway VPN di Azure, che fornisce un endpoint per le connessioni in ingresso dagli ambienti locali.</span><span class="sxs-lookup"><span data-stu-id="26d29-103">Here, we'll look at Azure VPN Gateway, which provides an endpoint for incoming connections from on-premises environments.</span></span>

<span data-ttu-id="26d29-104">È stata configurata una rete virtuale di Azure ed è necessario assicurarsi che i trasferimenti di dati da Azure al sito e tra le reti virtuali di Azure siano crittografati.</span><span class="sxs-lookup"><span data-stu-id="26d29-104">You have set up an Azure virtual network and need to ensure that any data transfers from Azure to your site and between Azure virtual networks are encrypted.</span></span> <span data-ttu-id="26d29-105">È anche necessario sapere come connettere le reti virtuali tra aree e sottoscrizioni.</span><span class="sxs-lookup"><span data-stu-id="26d29-105">You also need to know how to connect virtual networks between regions and subscriptions.</span></span>

## <a name="describe-a-vpn-gateway"></a><span data-ttu-id="26d29-106">Descrivere un gateway VPN</span><span class="sxs-lookup"><span data-stu-id="26d29-106">Describe a VPN gateway</span></span>

<span data-ttu-id="26d29-107">Un gateway VPN di Azure fornisce un endpoint per connessioni crittografate in ingresso dall'ambiente locale ad Azure tramite Internet.</span><span class="sxs-lookup"><span data-stu-id="26d29-107">An Azure VPN gateway provides an endpoint for incoming encrypted connections from on-premises locations to Azure over the internet.</span></span> <span data-ttu-id="26d29-108">Può anche inviare traffico crittografato tra reti virtuali di Azure tramite la rete dedicata di Microsoft, che collega i data center di Azure di diverse aree.</span><span class="sxs-lookup"><span data-stu-id="26d29-108">It can also send encrypted traffic between Azure virtual networks over Microsoft's dedicated network that links Azure datacenters in different regions.</span></span> <span data-ttu-id="26d29-109">Questa configurazione consente di collegare in modo sicuro macchine virtuali e servizi in aree diverse.</span><span class="sxs-lookup"><span data-stu-id="26d29-109">This configuration allows you to link virtual machines and services in different regions securely.</span></span>

<span data-ttu-id="26d29-110">Ogni rete virtuale può avere un solo gateway VPN</span><span class="sxs-lookup"><span data-stu-id="26d29-110">Each virtual network can have only one VPN gateway.</span></span> <span data-ttu-id="26d29-111">e tutte le connessioni al gateway VPN condividono la larghezza di banda di rete disponibile.</span><span class="sxs-lookup"><span data-stu-id="26d29-111">All connections to that VPN gateway share the available network bandwidth.</span></span>

<span data-ttu-id="26d29-112">In ogni gateway di rete virtuale sono presenti due o più macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="26d29-112">Within each virtual network gateway are two or more virtual machines (VMs).</span></span> <span data-ttu-id="26d29-113">Le macchine virtuali sono state distribuite in una subnet speciale definita dall'utente e denominata _subnet del gateway_.</span><span class="sxs-lookup"><span data-stu-id="26d29-113">These VMs have been deployed to a special subnet that you specify, called the _gateway subnet_.</span></span> <span data-ttu-id="26d29-114">Contengono le tabelle di routing per le connessioni ad altre reti, nonché servizi gateway specifici.</span><span class="sxs-lookup"><span data-stu-id="26d29-114">They contain routing tables for connections to other networks, along with specific gateway services.</span></span> <span data-ttu-id="26d29-115">Le macchine virtuali e la subnet del gateway sono simili a un dispositivo di rete con protezione avanzata.</span><span class="sxs-lookup"><span data-stu-id="26d29-115">These VMs and the gateway subnet are similar to a hardened network device.</span></span> <span data-ttu-id="26d29-116">Non è necessario configurare direttamente le macchine virtuali, né distribuire risorse aggiuntive nella subnet del gateway.</span><span class="sxs-lookup"><span data-stu-id="26d29-116">You don't need to configure these VMs directly and should not deploy any additional resources into the gateway subnet.</span></span>

<span data-ttu-id="26d29-117">La creazione di un gateway di rete virtuale può richiedere diverso tempo, ed è quindi importante pianificare le attività in modo appropriato.</span><span class="sxs-lookup"><span data-stu-id="26d29-117">Creating a virtual network gateway can take some time to complete, so it's vital that you plan appropriately.</span></span> <span data-ttu-id="26d29-118">Quando si crea un gateway di rete virtuale, il processo di provisioning genera le macchine virtuali del gateway e le distribuisce nella subnet del gateway.</span><span class="sxs-lookup"><span data-stu-id="26d29-118">When you create a virtual network gateway, the provisioning process generates the gateway VMs and deploys them to the gateway subnet.</span></span> <span data-ttu-id="26d29-119">Le impostazioni delle macchine virtuali saranno quelle configurate nel gateway.</span><span class="sxs-lookup"><span data-stu-id="26d29-119">These VMs will have the settings that you configure on the gateway.</span></span>

<span data-ttu-id="26d29-120">Un'impostazione importante è il **_tipo di gateway_**, che per un gateway VPN sarà di tipo "vpn".</span><span class="sxs-lookup"><span data-stu-id="26d29-120">A key setting is the **_gateway type_**, which for a VPN gateway will be of type "vpn".</span></span> <span data-ttu-id="26d29-121">Le opzioni per i gateway VPN includono:</span><span class="sxs-lookup"><span data-stu-id="26d29-121">Options for VPN gateways include:</span></span>

- <span data-ttu-id="26d29-122">Connessioni da rete a rete tramite tunneling VPN IPsec/IKE, che collega i gateway VPN ad altri gateway VPN.</span><span class="sxs-lookup"><span data-stu-id="26d29-122">Network-to-network connections over IPsec/IKE VPN tunneling, linking VPN gateways to other VPN gateways.</span></span>

- <span data-ttu-id="26d29-123">Tunneling VPN IPsec/IKE cross-premise, per la connessione di reti locali ad Azure tramite dispositivi VPN dedicati per la creazione di connessioni da sito a sito.</span><span class="sxs-lookup"><span data-stu-id="26d29-123">Cross-premises IPsec/IKE VPN tunneling, for connecting on-premises networks to Azure through dedicated VPN devices to create site-to-site connections.</span></span>

- <span data-ttu-id="26d29-124">Connessioni da punto a sito tramite IKEv2 o SSTP, per collegare i computer client alle risorse in Azure.</span><span class="sxs-lookup"><span data-stu-id="26d29-124">Point-to-site connections over IKEv2 or SSTP, to link client computers to resources in Azure.</span></span>

<span data-ttu-id="26d29-125">Verranno esaminati i fattori da considerare per la pianificazione di un gateway VPN.</span><span class="sxs-lookup"><span data-stu-id="26d29-125">Now, let's look at the factors you need to consider for planning your VPN gateway.</span></span>

## <a name="plan-a-vpn-gateway"></a><span data-ttu-id="26d29-126">Pianificare un gateway VPN</span><span class="sxs-lookup"><span data-stu-id="26d29-126">Plan a VPN gateway</span></span>

<span data-ttu-id="26d29-127">Quando si pianifica un gateway VPN, è opportuno valutare tre architetture:</span><span class="sxs-lookup"><span data-stu-id="26d29-127">When you're planning a VPN gateway, there are three architectures to consider:</span></span>

- <span data-ttu-id="26d29-128">Da punto a sito tramite Internet</span><span class="sxs-lookup"><span data-stu-id="26d29-128">Point to site over the internet</span></span>
- <span data-ttu-id="26d29-129">Da sito a sito tramite Internet</span><span class="sxs-lookup"><span data-stu-id="26d29-129">Site to site over the internet</span></span>
- <span data-ttu-id="26d29-130">Da sito a sito tramite una rete dedicata, ad esempio Azure ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="26d29-130">Site to site over a dedicated network, such as Azure ExpressRoute</span></span>

### <a name="planning-factors"></a><span data-ttu-id="26d29-131">Fattori per la pianificazione</span><span class="sxs-lookup"><span data-stu-id="26d29-131">Planning factors</span></span>

<span data-ttu-id="26d29-132">I fattori da tenere in considerazione durante il processo di pianificazione sono i seguenti.</span><span class="sxs-lookup"><span data-stu-id="26d29-132">Factors that you need to cover during your planning process include:</span></span>

- <span data-ttu-id="26d29-133">Velocità effettiva: Mbps o Gbps</span><span class="sxs-lookup"><span data-stu-id="26d29-133">Throughput - Mbps or Gbps</span></span>
- <span data-ttu-id="26d29-134">Backbone: Internet o privato?</span><span class="sxs-lookup"><span data-stu-id="26d29-134">Backbone - internet or private?</span></span>
- <span data-ttu-id="26d29-135">Disponibilità di un indirizzo IP (statico) pubblico</span><span class="sxs-lookup"><span data-stu-id="26d29-135">Availability of a public (static) IP address</span></span>
- <span data-ttu-id="26d29-136">Compatibilità del dispositivo VPN</span><span class="sxs-lookup"><span data-stu-id="26d29-136">VPN device compatibility</span></span>
- <span data-ttu-id="26d29-137">Più connessioni client o collegamento da sito a sito?</span><span class="sxs-lookup"><span data-stu-id="26d29-137">Multiple client connections or a site-to-site link?</span></span>
- <span data-ttu-id="26d29-138">Tipo di gateway VPN</span><span class="sxs-lookup"><span data-stu-id="26d29-138">VPN gateway type</span></span>
- <span data-ttu-id="26d29-139">SKU del gateway VPN di Azure</span><span class="sxs-lookup"><span data-stu-id="26d29-139">Azure VPN Gateway SKU</span></span>

<span data-ttu-id="26d29-140">La tabella seguente mostra un riepilogo delle problematiche di pianificazione.</span><span class="sxs-lookup"><span data-stu-id="26d29-140">The following table summarizes some of these planning issues.</span></span> <span data-ttu-id="26d29-141">Le rimanenti verranno illustrate più avanti.</span><span class="sxs-lookup"><span data-stu-id="26d29-141">The remainder are discussed later.</span></span>

|                           |  <span data-ttu-id="26d29-142">Da punto a sito</span><span class="sxs-lookup"><span data-stu-id="26d29-142">Point to site</span></span>            | <span data-ttu-id="26d29-143">Da sito a sito</span><span class="sxs-lookup"><span data-stu-id="26d29-143">Site to site</span></span>                          |  <span data-ttu-id="26d29-144">ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="26d29-144">ExpressRoute</span></span>                 |
| -------------             | -------------             | -------------                         | ---------                     |
| <span data-ttu-id="26d29-145">Servizi supportati di Azure</span><span class="sxs-lookup"><span data-stu-id="26d29-145">Azure supported services</span></span>  | <span data-ttu-id="26d29-146">Servizi cloud e macchine virtuali</span><span class="sxs-lookup"><span data-stu-id="26d29-146">Cloud services and VMs</span></span>    | <span data-ttu-id="26d29-147">Servizi cloud e macchine virtuali</span><span class="sxs-lookup"><span data-stu-id="26d29-147">Cloud services and VMs</span></span>                | <span data-ttu-id="26d29-148">Tutti i servizi supportati</span><span class="sxs-lookup"><span data-stu-id="26d29-148">All supported services</span></span>        |
| <span data-ttu-id="26d29-149">Larghezza di banda tipica</span><span class="sxs-lookup"><span data-stu-id="26d29-149">Typical bandwidth</span></span>         | <span data-ttu-id="26d29-150">A seconda dello SKU del gateway VPN</span><span class="sxs-lookup"><span data-stu-id="26d29-150">Depends on VPN Gateway SKU</span></span>    | <span data-ttu-id="26d29-151">Fino a 1 Gbps con aggregazione</span><span class="sxs-lookup"><span data-stu-id="26d29-151">Up to 1 Gbps with aggregation</span></span>         | <span data-ttu-id="26d29-152">Da 50 Mbps a 10 Gbps</span><span class="sxs-lookup"><span data-stu-id="26d29-152">From 50 Mbps to 10 Gbps</span></span>       |
| <span data-ttu-id="26d29-153">Protocolli supportati</span><span class="sxs-lookup"><span data-stu-id="26d29-153">Protocols supported</span></span>       | <span data-ttu-id="26d29-154">SSTP e IPSec</span><span class="sxs-lookup"><span data-stu-id="26d29-154">SSTP and IPsec</span></span>            | <span data-ttu-id="26d29-155">IPsec</span><span class="sxs-lookup"><span data-stu-id="26d29-155">IPsec</span></span>                                 | <span data-ttu-id="26d29-156">Connessione diretta, reti VLAN</span><span class="sxs-lookup"><span data-stu-id="26d29-156">Direct connection, VLANs</span></span>      |
| <span data-ttu-id="26d29-157">Routing</span><span class="sxs-lookup"><span data-stu-id="26d29-157">Routing</span></span>                   | <span data-ttu-id="26d29-158">RouteBased (dinamico)</span><span class="sxs-lookup"><span data-stu-id="26d29-158">RouteBased (dynamic)</span></span>      | <span data-ttu-id="26d29-159">PolicyBased (statico) e RouteBased</span><span class="sxs-lookup"><span data-stu-id="26d29-159">PolicyBased (static) and RouteBased</span></span>   | <span data-ttu-id="26d29-160">BGP</span><span class="sxs-lookup"><span data-stu-id="26d29-160">BGP</span></span>                           |
| <span data-ttu-id="26d29-161">Resilienza connessione</span><span class="sxs-lookup"><span data-stu-id="26d29-161">Connection resiliency</span></span>     | <span data-ttu-id="26d29-162">Modalità attiva-passiva</span><span class="sxs-lookup"><span data-stu-id="26d29-162">Active-passive</span></span>            | <span data-ttu-id="26d29-163">Modalità attiva-passiva o attiva-attiva</span><span class="sxs-lookup"><span data-stu-id="26d29-163">Active-passive or active-active</span></span>       | <span data-ttu-id="26d29-164">Modalità attiva-attiva</span><span class="sxs-lookup"><span data-stu-id="26d29-164">Active-active</span></span>                 |
| <span data-ttu-id="26d29-165">Caso d'uso</span><span class="sxs-lookup"><span data-stu-id="26d29-165">Use case</span></span>                  | <span data-ttu-id="26d29-166">Testing e creazione prototipi</span><span class="sxs-lookup"><span data-stu-id="26d29-166">Testing and prototyping</span></span>   | <span data-ttu-id="26d29-167">Sviluppo, test e produzione su scala ridotta</span><span class="sxs-lookup"><span data-stu-id="26d29-167">Dev, test and small-scale production</span></span>  | <span data-ttu-id="26d29-168">Business critical/cruciale</span><span class="sxs-lookup"><span data-stu-id="26d29-168">Enterprise/mission critical</span></span>   |

### <a name="gateway-skus"></a><span data-ttu-id="26d29-169">SKU del gateway</span><span class="sxs-lookup"><span data-stu-id="26d29-169">Gateway SKUs</span></span>

<span data-ttu-id="26d29-170">Azure offre gli SKU seguenti per i servizi gateway:</span><span class="sxs-lookup"><span data-stu-id="26d29-170">Azure offers the following SKUs for gateway services:</span></span>

| <span data-ttu-id="26d29-171">SKU</span><span class="sxs-lookup"><span data-stu-id="26d29-171">SKU</span></span>              |  <span data-ttu-id="26d29-172">Tunnel da sito a sito/da rete a rete</span><span class="sxs-lookup"><span data-stu-id="26d29-172">S2S/network-to-network tunnels</span></span> | <span data-ttu-id="26d29-173">Connessioni da punto a sito</span><span class="sxs-lookup"><span data-stu-id="26d29-173">P2S connections</span></span>  |  <span data-ttu-id="26d29-174">Benchmark velocità effettiva aggregata</span><span class="sxs-lookup"><span data-stu-id="26d29-174">Aggregate throughput benchmark</span></span>   | <span data-ttu-id="26d29-175">Usare per</span><span class="sxs-lookup"><span data-stu-id="26d29-175">Use for</span></span>                         |
| -------------    | -------------             | -------------    | ---------                         | ---------                       |
| <span data-ttu-id="26d29-176">Basic</span><span class="sxs-lookup"><span data-stu-id="26d29-176">Basic</span></span>            | <span data-ttu-id="26d29-177">Max 10</span><span class="sxs-lookup"><span data-stu-id="26d29-177">Max 10</span></span>                    | <span data-ttu-id="26d29-178">Max 128</span><span class="sxs-lookup"><span data-stu-id="26d29-178">Max 128</span></span>          | <span data-ttu-id="26d29-179">100 Mbps</span><span class="sxs-lookup"><span data-stu-id="26d29-179">100 Mbps</span></span>                          | <span data-ttu-id="26d29-180">Sviluppo/test/modello di verifica</span><span class="sxs-lookup"><span data-stu-id="26d29-180">Dev/test/POC</span></span>                    |
| <span data-ttu-id="26d29-181">VpnGw1</span><span class="sxs-lookup"><span data-stu-id="26d29-181">VpnGw1</span></span>           | <span data-ttu-id="26d29-182">Max 30</span><span class="sxs-lookup"><span data-stu-id="26d29-182">Max 30</span></span>                    | <span data-ttu-id="26d29-183">Max 128</span><span class="sxs-lookup"><span data-stu-id="26d29-183">Max 128</span></span>          | <span data-ttu-id="26d29-184">650 Mbps</span><span class="sxs-lookup"><span data-stu-id="26d29-184">650 Mbps</span></span>                          | <span data-ttu-id="26d29-185">Carichi di lavoro critici/di produzione</span><span class="sxs-lookup"><span data-stu-id="26d29-185">Production/critical workloads</span></span>   |
| <span data-ttu-id="26d29-186">VpnGw2</span><span class="sxs-lookup"><span data-stu-id="26d29-186">VpnGw2</span></span>           | <span data-ttu-id="26d29-187">Max 30</span><span class="sxs-lookup"><span data-stu-id="26d29-187">Max 30</span></span>                    | <span data-ttu-id="26d29-188">Max 128</span><span class="sxs-lookup"><span data-stu-id="26d29-188">Max 128</span></span>          | <span data-ttu-id="26d29-189">1 Gbps</span><span class="sxs-lookup"><span data-stu-id="26d29-189">1 Gbps</span></span>                            | <span data-ttu-id="26d29-190">Carichi di lavoro critici/di produzione</span><span class="sxs-lookup"><span data-stu-id="26d29-190">Production/critical workloads</span></span>   |
| <span data-ttu-id="26d29-191">VpnGw3</span><span class="sxs-lookup"><span data-stu-id="26d29-191">VpnGw3</span></span>           | <span data-ttu-id="26d29-192">Max 30</span><span class="sxs-lookup"><span data-stu-id="26d29-192">Max 30</span></span>                    | <span data-ttu-id="26d29-193">Max 128</span><span class="sxs-lookup"><span data-stu-id="26d29-193">Max 128</span></span>          | <span data-ttu-id="26d29-194">1,25 Gbps</span><span class="sxs-lookup"><span data-stu-id="26d29-194">1.25 Gbps</span></span>                          | <span data-ttu-id="26d29-195">Carichi di lavoro critici/di produzione</span><span class="sxs-lookup"><span data-stu-id="26d29-195">Production/critical workloads</span></span>   |

> [!Note]
> <span data-ttu-id="26d29-196">È importante scegliere lo SKU corretto.</span><span class="sxs-lookup"><span data-stu-id="26d29-196">It's important that you choose the right SKU.</span></span> <span data-ttu-id="26d29-197">Se il gateway VPN è stato configurato con uno SKU errato, sarà necessario eliminare e creare di nuovo il gateway, con una perdita di tempo significativa.</span><span class="sxs-lookup"><span data-stu-id="26d29-197">If you have set up your VPN gateway with the wrong one, you'll have to take it down and rebuild the gateway, which can be time consuming.</span></span>

## <a name="workflow"></a><span data-ttu-id="26d29-198">Flusso di lavoro</span><span class="sxs-lookup"><span data-stu-id="26d29-198">Workflow</span></span>

<span data-ttu-id="26d29-199">Quando si progetta una strategia di connettività cloud con le reti private virtuali in Azure, è consigliabile adottare il flusso di lavoro seguente:</span><span class="sxs-lookup"><span data-stu-id="26d29-199">When designing a cloud connectivity strategy using virtual private networking on Azure, you should apply the following workflow:</span></span>

1. <span data-ttu-id="26d29-200">Progettare la topologia di connettività, elencando gli spazi indirizzi per tutte le reti da connettere.</span><span class="sxs-lookup"><span data-stu-id="26d29-200">Design your connectivity topology, listing the address spaces for all connecting networks.</span></span>

1. <span data-ttu-id="26d29-201">Creare una rete virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="26d29-201">Create an Azure virtual network.</span></span>

1. <span data-ttu-id="26d29-202">Creare un gateway VPN per la rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="26d29-202">Create a VPN gateway for the virtual network.</span></span>

1. <span data-ttu-id="26d29-203">Creare e configurare le connessioni a reti locali o altre reti virtuali, in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="26d29-203">Create and configure connections to on-premises networks or other virtual networks, as required.</span></span>

1. <span data-ttu-id="26d29-204">Se necessario, creare e configurare una connessione da punto a sito per il gateway VPN di Azure.</span><span class="sxs-lookup"><span data-stu-id="26d29-204">If required, create and configure a point-to-site connection for your Azure VPN gateway.</span></span>

### <a name="design-considerations"></a><span data-ttu-id="26d29-205">Considerazioni relative alla progettazione</span><span class="sxs-lookup"><span data-stu-id="26d29-205">Design considerations</span></span>

<span data-ttu-id="26d29-206">Quando si progettano i gateway VPN per connettere reti virtuali, è necessario tenere in considerazione i fattori seguenti:</span><span class="sxs-lookup"><span data-stu-id="26d29-206">When you design your VPN gateways to connect virtual networks, you must consider the following factors:</span></span>

- <span data-ttu-id="26d29-207">Le subnet non possono sovrapporsi</span><span class="sxs-lookup"><span data-stu-id="26d29-207">Subnets cannot overlap</span></span>

    <span data-ttu-id="26d29-208">È fondamentale che una subnet in una posizione non contenga lo stesso spazio indirizzi di una subnet in un'altra posizione.</span><span class="sxs-lookup"><span data-stu-id="26d29-208">It is vital that a subnet in one location does not contain the same address space as in another location.</span></span>

- <span data-ttu-id="26d29-209">Gli indirizzi IP devono essere univoci</span><span class="sxs-lookup"><span data-stu-id="26d29-209">IP addresses must be unique</span></span>

    <span data-ttu-id="26d29-210">Non possono essere presenti due host con lo stesso indirizzo IP in posizioni diverse, perché non sarebbe possibile indirizzare il traffico tra questi due host e la connessione da rete a rete avrebbe esito negativo.</span><span class="sxs-lookup"><span data-stu-id="26d29-210">You cannot have two hosts with the same IP address in different locations, as it will be impossible to route traffic between those two hosts and the network-to-network connection will fail.</span></span>

- <span data-ttu-id="26d29-211">I gateway VPN necessitano di una subnet del gateway denominata **GatewaySubnet**</span><span class="sxs-lookup"><span data-stu-id="26d29-211">VPN gateways need a gateway subnet called **GatewaySubnet**</span></span>

    <span data-ttu-id="26d29-212">Per il funzionamento del gateway, è necessario che la subnet abbia questo nome e non contenga altre risorse.</span><span class="sxs-lookup"><span data-stu-id="26d29-212">It must have this name for the gateway to work, and it should not contain any other resources.</span></span>

### <a name="create-an-azure-virtual-network"></a><span data-ttu-id="26d29-213">Creare una rete virtuale di Azure</span><span class="sxs-lookup"><span data-stu-id="26d29-213">Create an Azure virtual network</span></span>

<span data-ttu-id="26d29-214">Prima di creare un gateway VPN, è necessario creare la rete virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="26d29-214">Before you create a VPN gateway, you need to create the Azure virtual network.</span></span>

### <a name="create-a-vpn-gateway"></a><span data-ttu-id="26d29-215">Creare un gateway VPN</span><span class="sxs-lookup"><span data-stu-id="26d29-215">Create a VPN gateway</span></span>

<span data-ttu-id="26d29-216">Il tipo di gateway VPN che verrà creato dipende dall'architettura in uso.</span><span class="sxs-lookup"><span data-stu-id="26d29-216">The type of VPN gateway you create will depend on your architecture.</span></span> <span data-ttu-id="26d29-217">Sono disponibili le opzioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="26d29-217">Options are:</span></span>

- <span data-ttu-id="26d29-218">RouteBased</span><span class="sxs-lookup"><span data-stu-id="26d29-218">RouteBased</span></span>

    <span data-ttu-id="26d29-219">I dispositivi VPN basati su route usano selettori di traffico any-to-any (jolly) e consentono alle tabelle di routing/inoltro di indirizzare il traffico a tunnel IPsec diversi.</span><span class="sxs-lookup"><span data-stu-id="26d29-219">Route-based VPN devices use any-to-any (wildcard) traffic selectors, and let routing/forwarding tables direct traffic to different IPsec tunnels.</span></span> <span data-ttu-id="26d29-220">Le connessioni basate su route vengono in genere create su piattaforme router in cui ogni tunnel IPsec è modellato come interfaccia di rete o interfaccia di tunnel virtuale.</span><span class="sxs-lookup"><span data-stu-id="26d29-220">Route-based connections are typically built on router platforms where each IPsec tunnel is modeled as a network interface or VTI (virtual tunnel interface).</span></span>

- <span data-ttu-id="26d29-221">PolicyBased</span><span class="sxs-lookup"><span data-stu-id="26d29-221">PolicyBased</span></span>

    <span data-ttu-id="26d29-222">I dispositivi VPN basati su criteri usano le combinazioni di prefissi di entrambe le reti per definire le modalità di crittografia/decrittografia del traffico nei tunnel IPsec.</span><span class="sxs-lookup"><span data-stu-id="26d29-222">Policy-based VPN devices use the combinations of prefixes from both networks to define how traffic is encrypted/decrypted through IPsec tunnels.</span></span> <span data-ttu-id="26d29-223">Una connessione basata su criteri viene in genere creata su dispositivi firewall con filtro dei pacchetti.</span><span class="sxs-lookup"><span data-stu-id="26d29-223">A policy-based connection is typically built on firewall devices that perform packet filtering.</span></span> <span data-ttu-id="26d29-224">La crittografia e la decrittografia dei tunnel IPsec vengono aggiunte al filtro dei pacchetti e al motore di elaborazione.</span><span class="sxs-lookup"><span data-stu-id="26d29-224">IPsec tunnel encryption and decryption are added to the packet filtering and processing engine.</span></span>

## <a name="set-up-a-vpn-gateway"></a><span data-ttu-id="26d29-225">Configurare un gateway VPN</span><span class="sxs-lookup"><span data-stu-id="26d29-225">Set up a VPN gateway</span></span>

<span data-ttu-id="26d29-226">La procedura da eseguire dipende dal tipo di gateway VPN che viene installato.</span><span class="sxs-lookup"><span data-stu-id="26d29-226">The steps you need to take will depend on the type of VPN gateway that you are installing.</span></span> <span data-ttu-id="26d29-227">Per creare un gateway VPN da punto a sito con il portale di Azure, ad esempio, è necessario seguire questa procedura:</span><span class="sxs-lookup"><span data-stu-id="26d29-227">For example, to create a point-to-site VPN gateway by using the Azure portal, you would carry out the following steps:</span></span>

1. <span data-ttu-id="26d29-228">Creare una rete virtuale</span><span class="sxs-lookup"><span data-stu-id="26d29-228">Create a virtual network</span></span>

2. <span data-ttu-id="26d29-229">Aggiungere una subnet del gateway</span><span class="sxs-lookup"><span data-stu-id="26d29-229">Add a gateway subnet</span></span>

3. <span data-ttu-id="26d29-230">Specificare un server DNS (facoltativo)</span><span class="sxs-lookup"><span data-stu-id="26d29-230">Specify a DNS server (optional)</span></span>

4. <span data-ttu-id="26d29-231">Creare un gateway di rete virtuale</span><span class="sxs-lookup"><span data-stu-id="26d29-231">Create a virtual network gateway</span></span>

5. <span data-ttu-id="26d29-232">Generare i certificati</span><span class="sxs-lookup"><span data-stu-id="26d29-232">Generate certificates</span></span>

6. <span data-ttu-id="26d29-233">Aggiungere il pool di indirizzi client</span><span class="sxs-lookup"><span data-stu-id="26d29-233">Add the client address pool</span></span>

7. <span data-ttu-id="26d29-234">Configurare il tipo di tunnel</span><span class="sxs-lookup"><span data-stu-id="26d29-234">Configure the tunnel type</span></span>

8. <span data-ttu-id="26d29-235">Configurare il tipo di autenticazione</span><span class="sxs-lookup"><span data-stu-id="26d29-235">Configure the authentication type</span></span>

9. <span data-ttu-id="26d29-236">Caricare i dati del certificato pubblico per il certificato radice</span><span class="sxs-lookup"><span data-stu-id="26d29-236">Upload the root certificate public certificate data</span></span>

10. <span data-ttu-id="26d29-237">Installare un certificato client esportato</span><span class="sxs-lookup"><span data-stu-id="26d29-237">Install an exported client certificate</span></span>

11. <span data-ttu-id="26d29-238">Generare e installare il pacchetto di configurazione del client VPN</span><span class="sxs-lookup"><span data-stu-id="26d29-238">Generate and install the VPN client configuration package</span></span>

12. <span data-ttu-id="26d29-239">Connettersi ad Azure</span><span class="sxs-lookup"><span data-stu-id="26d29-239">Connect to Azure</span></span>

<span data-ttu-id="26d29-240">Dato che sono disponibili numerosi percorsi di configurazione per i gateway VPN di Azure, ognuno con più opzioni, in questo corso non è possibile illustrare ogni configurazione.</span><span class="sxs-lookup"><span data-stu-id="26d29-240">As there are several configuration paths with Azure VPN gateways, each with multiple options, it is not possible to cover every setup in this course.</span></span> <span data-ttu-id="26d29-241">Per altre informazioni, vedere la sezione Risorse aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="26d29-241">For more information, see the Additional Resources section.</span></span>

## <a name="configure-the-gateway"></a><span data-ttu-id="26d29-242">Configurare il gateway</span><span class="sxs-lookup"><span data-stu-id="26d29-242">Configure the gateway</span></span>

<span data-ttu-id="26d29-243">Dopo aver creato il gateway, è necessario configurarlo.</span><span class="sxs-lookup"><span data-stu-id="26d29-243">Once your gateway is created, you'll need to configure it.</span></span>  <span data-ttu-id="26d29-244">Sarà necessario specificare numerose impostazioni di configurazione, ad esempio nome, posizione, server DNS e così via. Queste impostazioni verranno esaminate più in dettaglio nell'esercizio.</span><span class="sxs-lookup"><span data-stu-id="26d29-244">There are several configuration settings you will need to provide, such as the name, location, DNS server, etc. We will go into these in more detail in the exercise.</span></span>

## <a name="summary"></a><span data-ttu-id="26d29-245">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="26d29-245">Summary</span></span>

<span data-ttu-id="26d29-246">I gateway VPN di Azure sono un componente delle reti virtuali di Azure che abilita le connessioni da punto a sito, da sito a sito o da rete a rete.</span><span class="sxs-lookup"><span data-stu-id="26d29-246">Azure VPN gateways are a component in Azure virtual networks that enable point-to-site, site-to-site, or network-to-network connections.</span></span> <span data-ttu-id="26d29-247">I gateway VPN di Azure consentono ai singoli computer client di connettersi alle risorse in Azure, di estendere le reti locali in Azure o di agevolare le connessioni tra reti virtuali in aree e sottoscrizioni diverse.</span><span class="sxs-lookup"><span data-stu-id="26d29-247">Azure VPN gateways enable individual client computers to connect to resources in Azure, extend on-premises networks into Azure, or facilitate connections between virtual networks in different regions and subscriptions.</span></span>
