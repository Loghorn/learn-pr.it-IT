<span data-ttu-id="7d014-101">Sono state aggiunte le librerie client necessarie all'applicazione ed è ora possibile connettersi all'account di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="7d014-101">You have added the required client libraries to your application and are ready to connect to your Azure storage account.</span></span>

<span data-ttu-id="7d014-102">Per lavorare con i dati in un account di archiviazione, l'app richiede due dati:</span><span class="sxs-lookup"><span data-stu-id="7d014-102">To work with data in a storage account, your app will need two pieces of data:</span></span>

1. <span data-ttu-id="7d014-103">Una chiave di accesso</span><span class="sxs-lookup"><span data-stu-id="7d014-103">An access key</span></span>
1. <span data-ttu-id="7d014-104">L'endpoint dell'API REST</span><span class="sxs-lookup"><span data-stu-id="7d014-104">The REST API endpoint</span></span>

## <a name="security-access-keys"></a><span data-ttu-id="7d014-105">Chiavi di accesso di sicurezza</span><span class="sxs-lookup"><span data-stu-id="7d014-105">Security access keys</span></span>

<span data-ttu-id="7d014-106">Ogni account di archiviazione ha due _chiavi di accesso_ univoche, usate a scopi di protezione.</span><span class="sxs-lookup"><span data-stu-id="7d014-106">Each storage account has two unique _access keys_ that are used to secure the storage account.</span></span> <span data-ttu-id="7d014-107">Se l'app deve connettersi a più account di archiviazione, dovrà avere chiavi di accesso per ogni account.</span><span class="sxs-lookup"><span data-stu-id="7d014-107">If your app needs to connect to multiple storage accounts, then your app will require an access key for each storage account.</span></span>

![Illustrazione che mostra un'applicazione connessa a due diversi account di archiviazione nel cloud.](..\media\6-multiple-accounts.png)

## <a name="rest-api-endpoint"></a><span data-ttu-id="7d014-110">Endpoint API REST</span><span class="sxs-lookup"><span data-stu-id="7d014-110">REST API endpoint</span></span>

<span data-ttu-id="7d014-111">Oltre alle chiavi di accesso per l'autenticazione negli account di archiviazione, l'app dovrà conoscere gli endpoint del servizio di archiviazione per inviare le richieste REST.</span><span class="sxs-lookup"><span data-stu-id="7d014-111">In addition to access keys for authentication to storage accounts, your app will need to know the storage service endpoints to issue the REST requests.</span></span> 

<span data-ttu-id="7d014-112">L'endpoint REST è una combinazione di _nome_ dell'account di archiviazione, tipo di dati e un dominio noto.</span><span class="sxs-lookup"><span data-stu-id="7d014-112">The REST endpoint is a combination of your storage account _name_, the data type, and a known domain.</span></span> <span data-ttu-id="7d014-113">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="7d014-113">For example:</span></span>

| <span data-ttu-id="7d014-114">Tipo di dati</span><span class="sxs-lookup"><span data-stu-id="7d014-114">Data type</span></span> | <span data-ttu-id="7d014-115">Endpoint di esempio</span><span class="sxs-lookup"><span data-stu-id="7d014-115">Example endpoint</span></span> |
|-----------|------------------|
| <span data-ttu-id="7d014-116">BLOB</span><span class="sxs-lookup"><span data-stu-id="7d014-116">Blobs</span></span>     | `https://[name].blob.core.windows.net/` |
| <span data-ttu-id="7d014-117">Code</span><span class="sxs-lookup"><span data-stu-id="7d014-117">Queues</span></span>    | `https://[name].queue.core.windows.net/` |
| <span data-ttu-id="7d014-118">Tabella</span><span class="sxs-lookup"><span data-stu-id="7d014-118">Table</span></span>     | `https://[name].table.core.windows.net/` |
| <span data-ttu-id="7d014-119">File</span><span class="sxs-lookup"><span data-stu-id="7d014-119">Files</span></span>     | `https://[name].file.core.windows.net/` |

<span data-ttu-id="7d014-120">Se si ha un dominio personalizzato associato ad Azure, è anche possibile creare un URL di dominio personalizzato per l'endpoint.</span><span class="sxs-lookup"><span data-stu-id="7d014-120">If you have a custom domain tied to Azure, then you can also create a custom domain URL for the endpoint.</span></span>

## <a name="connection-strings"></a><span data-ttu-id="7d014-121">Stringhe di connessione</span><span class="sxs-lookup"><span data-stu-id="7d014-121">Connection strings</span></span>

<span data-ttu-id="7d014-122">Il modo più semplice per gestire le chiavi di accesso e gli URL dell'endpoint all'interno delle applicazioni è usare le **stringhe di connessione dell'account di archiviazione**.</span><span class="sxs-lookup"><span data-stu-id="7d014-122">The simplest way to handle access keys and endpoint URLs within applications is to use **storage account connection strings**.</span></span> <span data-ttu-id="7d014-123">Una stringa di connessione contiene tutte le informazioni necessarie sulla connettività in un'unica stringa di testo.</span><span class="sxs-lookup"><span data-stu-id="7d014-123">A connection string provides all needed connectivity information in a single text string.</span></span>

<span data-ttu-id="7d014-124">Le stringhe di connessione di Archiviazione di Azure sono simili a quelle illustrate nell'esempio seguente, ma con la chiave di accesso e il nome account di archiviazione specifico in uso:</span><span class="sxs-lookup"><span data-stu-id="7d014-124">Azure Storage connection strings look similar to the example below but with the access key and account name of your specific storage account:</span></span>

```
DefaultEndpointsProtocol=https;AccountName={your-storage};
   AccountKey={your-access-key};
   EndpointSuffix=core.windows.net
```

## <a name="security"></a><span data-ttu-id="7d014-125">Sicurezza</span><span class="sxs-lookup"><span data-stu-id="7d014-125">Security</span></span>

<span data-ttu-id="7d014-126">Le chiavi di accesso sono fondamentali per permettere l'accesso all'account di archiviazione e di conseguenza non devono essere fornite ad alcun sistema o utente che non deve avere accesso all'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="7d014-126">Access keys are critical to providing access to your storage account and as a result, should not be given to any system or person that you do not wish to have access to your storage account.</span></span> <span data-ttu-id="7d014-127">Le chiavi di accesso sono l'equivalente di un nome utente e una password per accedere al computer.</span><span class="sxs-lookup"><span data-stu-id="7d014-127">Access keys are the equivalent of a username and password to access your computer.</span></span>

<span data-ttu-id="7d014-128">In genere, le informazioni di connettività dell'account di archiviazione sono archiviate all'interno di una variabile di ambiente, un database o un file di configurazione.</span><span class="sxs-lookup"><span data-stu-id="7d014-128">Typically, storage account connectivity information is stored within an environment variable, database, or configuration file.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7d014-129">È importante notare che l'archiviazione di queste informazioni in un file di configurazione può essere pericolosa se il file viene incluso nel controllo del codice sorgente e salvato in un archivio pubblico.</span><span class="sxs-lookup"><span data-stu-id="7d014-129">It is important to note that storing this information in a configuration file can be dangerous if you include that file in source control and store it in a public repository.</span></span> <span data-ttu-id="7d014-130">Questo è un errore comune e fa sì che chiunque possa esplorare il codice sorgente nell'archivio pubblico e prendere visione delle informazioni di connessione dell'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="7d014-130">This is a common mistake and means that anyone can browse your source code in the public repository and see your storage account connection information.</span></span>

<span data-ttu-id="7d014-131">Ogni account di archiviazione include due chiavi di accesso.</span><span class="sxs-lookup"><span data-stu-id="7d014-131">Each storage account has two access keys.</span></span> <span data-ttu-id="7d014-132">Il motivo di questo approccio è consentire la rotazione (rigenerazione) periodica delle chiavi nell'ambito delle procedure consigliate per la sicurezza per proteggere l'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="7d014-132">The reason for this is to allow keys to be rotated (regenerated) periodically as part of security best practice in keeping your storage account secure.</span></span> <span data-ttu-id="7d014-133">Questo processo può essere eseguito dal portale di Azure o dall'interfaccia della riga di comando di Azure o dalla riga di comando di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="7d014-133">This process can be done from the Azure portal or the Azure CLI / PowerShell command line tool.</span></span>

<span data-ttu-id="7d014-134">La rotazione di una chiave annulla immediatamente la validità del valore della chiave originale e revoca l'accesso a chiunque abbia ottenuto la chiave in modo inappropriato.</span><span class="sxs-lookup"><span data-stu-id="7d014-134">Rotating a key will invalidate the original key value immediately and will revoke access to anyone who obtained the key inappropriately.</span></span> <span data-ttu-id="7d014-135">Con il supporto per due chiavi, è possibile ruotare le chiavi senza causare tempo di inattività nelle applicazioni che le usano.</span><span class="sxs-lookup"><span data-stu-id="7d014-135">With support for two keys, you can rotate keys without causing downtime in your applications that use them.</span></span> <span data-ttu-id="7d014-136">L'app può passare a usare la chiave di accesso alternativa mentre viene rigenerata l'altra chiave.</span><span class="sxs-lookup"><span data-stu-id="7d014-136">Your app can switch to using the alternate access key while the other key is regenerated.</span></span> <span data-ttu-id="7d014-137">Se più app usano questo account di archiviazione, devono usare tutte la stessa chiave per poter supportare questa tecnica.</span><span class="sxs-lookup"><span data-stu-id="7d014-137">If you have multiple apps using this storage account, they should all use the same key to support this technique.</span></span> <span data-ttu-id="7d014-138">Ecco l'idea di base:</span><span class="sxs-lookup"><span data-stu-id="7d014-138">Here's the basic idea:</span></span>

1. <span data-ttu-id="7d014-139">Aggiornare le stringhe di connessione nel codice dell'applicazione in modo che facciano riferimento alla chiave di accesso secondaria dell'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="7d014-139">Update the connection strings in your application code to reference the secondary access key of the storage account.</span></span>
2. <span data-ttu-id="7d014-140">Rigenerare la chiave di accesso primaria per l'account di archiviazione tramite lo strumento da riga di comando o il portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="7d014-140">Regenerate the primary access key for your storage account using the Azure portal or command line tool.</span></span>
3. <span data-ttu-id="7d014-141">Aggiornare le stringhe di connessione nel codice in modo che facciano riferimento alla nuova chiave di accesso primaria.</span><span class="sxs-lookup"><span data-stu-id="7d014-141">Update the connection strings in your code to reference the new primary access key.</span></span>
4. <span data-ttu-id="7d014-142">Rigenerare la chiave di accesso secondaria nello stesso modo.</span><span class="sxs-lookup"><span data-stu-id="7d014-142">Regenerate the secondary access key in the same manner.</span></span>

> [!TIP]
> <span data-ttu-id="7d014-143">Come si fa per le password, è consigliabile ruotare periodicamente le chiavi di accesso per garantire che rimangano private.</span><span class="sxs-lookup"><span data-stu-id="7d014-143">It's highly recommended that you periodically rotate your access keys to ensure they remain private, just like changing your passwords.</span></span> <span data-ttu-id="7d014-144">Se la chiave di accesso viene usata in un'applicazione server, è possibile usare un'istanza di **Azure Key Vault** per archiviarla.</span><span class="sxs-lookup"><span data-stu-id="7d014-144">If you are using the key in a server application, you can use an **Azure Key Vault** to store the access key for you.</span></span> <span data-ttu-id="7d014-145">Azure Key Vault include il supporto per la sincronizzazione diretta con l'account di archiviazione e la rotazione automatica periodica delle chiavi.</span><span class="sxs-lookup"><span data-stu-id="7d014-145">Key Vaults include support to synchronize directly to the Storage Account and automatically rotate the keys periodically.</span></span> <span data-ttu-id="7d014-146">L'uso di Key Vault offre un altro livello di sicurezza. L'app non deve infatti mai usare direttamente una chiave di accesso.</span><span class="sxs-lookup"><span data-stu-id="7d014-146">Using a Key Vault provides an additional layer of security, so your app never has to work directly with an access key.</span></span>

### <a name="shared-access-signatures-sas"></a><span data-ttu-id="7d014-147">Firme di accesso condiviso (SAS)</span><span class="sxs-lookup"><span data-stu-id="7d014-147">Shared access signatures (SAS)</span></span>

<span data-ttu-id="7d014-148">Le chiavi di accesso sono l'approccio più semplice per autenticare l'accesso a un account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="7d014-148">Access keys are the easiest approach to authenticating access to a storage account.</span></span> <span data-ttu-id="7d014-149">Offrono però totale accesso a qualsiasi elemento nell'account di archiviazione, come una password radice in un computer.</span><span class="sxs-lookup"><span data-stu-id="7d014-149">However they provide full access to anything in the storage account, similar to a root password on a computer.</span></span>

<span data-ttu-id="7d014-150">Gli account di archiviazione offrono un meccanismo di autenticazione separato denominato _firme di accesso condiviso_ che supporta la scadenza e autorizzazioni limitate per scenari in cui è necessario concedere accesso limitato.</span><span class="sxs-lookup"><span data-stu-id="7d014-150">Storage accounts offer a separate authentication mechanism called _shared access signatures_ that support expiration and limited permissions for scenarios where you need to grant limited access.</span></span> <span data-ttu-id="7d014-151">È consigliabile usare questo approccio quando si consente ad altri utenti di leggere e scrivere dati nell'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="7d014-151">You should use this approach when you are allowing other users to read and write data to your storage account.</span></span> <span data-ttu-id="7d014-152">Al termine del modulo sono disponibili collegamenti alla documentazione su questo argomento avanzato.</span><span class="sxs-lookup"><span data-stu-id="7d014-152">There are links to our documentation on this advanced topic at the end of the module.</span></span>
