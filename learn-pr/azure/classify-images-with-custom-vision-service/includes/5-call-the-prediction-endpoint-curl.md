<span data-ttu-id="0283d-101">Nell'esercizio precedente è stato testato il modello sottoposto a training tramite la funzionalità **Quick Test** (Test rapido) del portale di Servizio visione artificiale personalizzato.</span><span class="sxs-lookup"><span data-stu-id="0283d-101">In the last exercise, we tested our trained model using the **Quick Test** feature of the Custom Vision Service portal.</span></span> <span data-ttu-id="0283d-102">Si tratta di un ottimo modo per verificare rapidamente l'accuratezza del modello con alcune immagini di test.</span><span class="sxs-lookup"><span data-stu-id="0283d-102">This is a great way to quickly check the accuracy of the model with some test images.</span></span> <span data-ttu-id="0283d-103">Procedendo, è possibile eseguire chiamate all'endpoint di stima del modello su HTTP.</span><span class="sxs-lookup"><span data-stu-id="0283d-103">Let's go a little further and make calls to the prediction endpoint of our model over HTTP.</span></span>

[!include[](../../../includes/azure-sandbox-activate.md)]

1. <span data-ttu-id="0283d-104">Tornando al progetto *Artworks*\* nel portale di Servizio visione artificiale personalizzato, selezionare la scheda **Performance** (Prestazioni).</span><span class="sxs-lookup"><span data-stu-id="0283d-104">Returning to your *Artworks*\* project in the Custom Vision Service portal, select the  **Performance** tab.</span></span>

    ![Selezione della scheda Performance (Prestazioni)](../media/5-performance-tab.png)

1. <span data-ttu-id="0283d-106">Selezionare **Make default** (Imposta come predefinito) per verificare che l'ultima iterazione del modello sia l'iterazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="0283d-106">Select **Make default** to make sure the latest iteration of the model is the default iteration.</span></span>

1. <span data-ttu-id="0283d-107">Selezionare **Prediction URL** (URL previsione).</span><span class="sxs-lookup"><span data-stu-id="0283d-107">Select **Prediction URL**.</span></span> <span data-ttu-id="0283d-108">Verrà visualizzata una finestra di dialogo delle informazioni necessarie per eseguire le chiamate.</span><span class="sxs-lookup"><span data-stu-id="0283d-108">This displays a dialog of the information we need to make our calls.</span></span> 

    ![Visualizzazione delle informazioni di Prediction URL (URL previsione)](../media/5-portal-prediction-url.png)

    <span data-ttu-id="0283d-110">Come indicato nella finestra di dialogo, è possibile chiamare l'endpoint di stima e passare un URL di immagine.</span><span class="sxs-lookup"><span data-stu-id="0283d-110">As the dialog shows, we can call the prediction endpoint and pass it an image URL.</span></span> <span data-ttu-id="0283d-111">È anche possibile passare un'immagine non elaborata all'endpoint nel corpo della richiesta.</span><span class="sxs-lookup"><span data-stu-id="0283d-111">We can also pass a raw image to the endpoint in the body of the request.</span></span>

    <span data-ttu-id="0283d-112">Prendere nota delle tre informazioni incluse in questa finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="0283d-112">Take note of three pieces of information from this dialog.</span></span>
     - <span data-ttu-id="0283d-113">**Prediction-Key** (Chiave previsione): questa chiave deve essere impostata come intestazione in tutte le richieste.</span><span class="sxs-lookup"><span data-stu-id="0283d-113">**Prediction-Key**: This key has to be set as a header in all requests.</span></span> <span data-ttu-id="0283d-114">È l'elemento che fornisce l'accesso all'endpoint.</span><span class="sxs-lookup"><span data-stu-id="0283d-114">That's what gives us access to the endpoint.</span></span>
    - <span data-ttu-id="0283d-115">**Request URL** (URL richiesta): la finestra di dialogo mostra due URL diversi.</span><span class="sxs-lookup"><span data-stu-id="0283d-115">**Request URL**: The dialog shows two different URLs.</span></span> <span data-ttu-id="0283d-116">Se si pubblica un URL di immagine, usare il primo URL, che termina con `/url`.</span><span class="sxs-lookup"><span data-stu-id="0283d-116">If we're posting an image URL, then use the first URL, which ends in `/url`.</span></span> <span data-ttu-id="0283d-117">Se si intende pubblicare un'immagine non elaborata nel corpo della richiesta, usare il secondo URL, che termina con `/image`.</span><span class="sxs-lookup"><span data-stu-id="0283d-117">If we want to post a raw image in the body of our request, we use the second URL, which ends in `/image`.</span></span>
    - <span data-ttu-id="0283d-118">**Content-Type** (Tipo di contenuto): in caso di pubblicazione di un'immagine non elaborata, impostare il corpo della richiesta sulla rappresentazione binaria dell'immagine e il tipo di contenuto su `application/octet-stream`.</span><span class="sxs-lookup"><span data-stu-id="0283d-118">**Content-Type**: If we're posting a raw image, we set the body of the request to the binary representation of the image and the content type to `application/octet-stream`.</span></span> <span data-ttu-id="0283d-119">In caso di pubblicazione di un URL di immagine, inserirlo come JSON nel corpo e impostare il tipo di contenuto su `application/json`.</span><span class="sxs-lookup"><span data-stu-id="0283d-119">If we're posting an image URL, we put that as JSON in the body and set the content type to `application/json`.</span></span>
    

3. <span data-ttu-id="0283d-120">Copiare e salvare il primo URL e il valore `Prediction-Key` dalla finestra di dialogo **How to use the Prediction API** (Come usare l'API Previsioni).</span><span class="sxs-lookup"><span data-stu-id="0283d-120">Copy and save the first URL and the `Prediction-Key` value from the **How to use the Prediction API** dialog.</span></span> 

> [!TIP]
> <span data-ttu-id="0283d-121">**cURL** è uno strumento da riga di comando che può essere usato per inviare o ricevere file.</span><span class="sxs-lookup"><span data-stu-id="0283d-121">**cURL** is a command line tool that can be used to send or receive files.</span></span> <span data-ttu-id="0283d-122">È incluso in Linux, macOS e Windows 10 e può essere scaricato per la maggior parte degli altri sistemi operativi.</span><span class="sxs-lookup"><span data-stu-id="0283d-122">It's included with Linux, macOS, and Windows 10, and can be downloaded for most other operating systems.</span></span> <span data-ttu-id="0283d-123">cURL supporta vari protocolli come HTTP, HTTPS, FTP, FTPS, SFTP, LDAP, TELNET, SMTP, POP3 e così via. Per altre informazioni, consultare i collegamenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="0283d-123">cURL supports numerous protocols like HTTP, HTTPS, FTP, FTPS, SFTP, LDAP, TELNET, SMTP, POP3, etc. For more information, refer to the links below:</span></span>
>
>- <https://en.wikipedia.org/wiki/CURL>
>- <https://curl.haxx.se/docs/> 
> 
> <span data-ttu-id="0283d-124">cURL è già installato in Azure Cloud Shell nel sandbox.</span><span class="sxs-lookup"><span data-stu-id="0283d-124">cURL is already installed in the Azure Cloud Shell in the sandbox.</span></span> <span data-ttu-id="0283d-125">cURL verrà usato in questo esercizio per eseguire chiamate HTTP all'endpoint.</span><span class="sxs-lookup"><span data-stu-id="0283d-125">So, we'll cURL in this exercise to make HTTP calls to our endpoint.</span></span>

2. <span data-ttu-id="0283d-126">Eseguire il comando seguente in Cloud Shell.</span><span class="sxs-lookup"><span data-stu-id="0283d-126">Execute the following command in the Cloud Shell.</span></span> <span data-ttu-id="0283d-127">Sostituire **[endpoint-URL]** con l'URL salvato nell'ultimo passaggio.</span><span class="sxs-lookup"><span data-stu-id="0283d-127">Replace **[endpoint-URL]** with the URL you saved from the last step.</span></span> <span data-ttu-id="0283d-128">Sostituire **[Prediction-Key]** con il valore di `Prediction-Key` salvato nell'ultimo passaggio.</span><span class="sxs-lookup"><span data-stu-id="0283d-128">Replace **[Prediction-Key]** with the value of `Prediction-Key` you saved from the last step.</span></span> 

    ```azurecli
    curl [endpoint-URL] \
    -H "Prediction-Key: [Prediction-Key]" \
    -H "Content-Type: application/json" \
    -d "{'url' : 'https://raw.githubusercontent.com/MicrosoftDocs/mslearn-classify-images-with-the-custom-vision-service/master/test-images/VanGoghTest_02.jpg'}" \
    | jq '.'
    ```

    <span data-ttu-id="0283d-129">Al termine del comando, si noterà una risposta JSON simile allo screenshot seguente.</span><span class="sxs-lookup"><span data-stu-id="0283d-129">When the command completes, you'll see a JSON response similar to the following screenshot.</span></span> <span data-ttu-id="0283d-130">L'API restituisce la probabilità per ogni tag nel modello.</span><span class="sxs-lookup"><span data-stu-id="0283d-130">The API returns a probability for every tag in the model.</span></span> <span data-ttu-id="0283d-131">Come si può notare, con una probabilità vicina a 1 per il valore `"painting"` **tagName**, questa immagine è certamente un disegno.</span><span class="sxs-lookup"><span data-stu-id="0283d-131">As you can see, with a probability close to 1 for the `"painting"` **tagName** value, this image is definitely a painting.</span></span> <span data-ttu-id="0283d-132">Tuttavia, non è un disegno di uno qualsiasi degli artisti con cui è stato eseguito il training del modello.</span><span class="sxs-lookup"><span data-stu-id="0283d-132">However, it's not a painting by any of the artists with which we trained our model.</span></span> 

    ![Anteprima di un'immagine di Picasso di prova](../media/5-prediction-json.png) 

3. <span data-ttu-id="0283d-134">Provare altre stime sostituendo l'URL nel corpo della richiesta precedente con uno degli URL nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="0283d-134">Try more predictions by replacing the URL in the request body above, with the URLs in the following table.</span></span> 

    |<span data-ttu-id="0283d-135">Immagine</span><span class="sxs-lookup"><span data-stu-id="0283d-135">Image</span></span>  | <span data-ttu-id="0283d-136">URL</span><span class="sxs-lookup"><span data-stu-id="0283d-136">URL</span></span>  |
    |---------|---------|
    |![Anteprima di un'immagine di Picasso di prova](../media/picasso-test-02-thumb.jpg)     | `https://raw.githubusercontent.com/MicrosoftDocs/mslearn-classify-images-with-the-custom-vision-service/master/test-images/PicassoTest_02.jpg`        |
    |![Anteprima di un'immagine di Rembrandt di prova](../media/rembrandt-test-01-thumb.jpg)     |  `https://raw.githubusercontent.com/MicrosoftDocs/mslearn-classify-images-with-the-custom-vision-service/master/test-images/RembrandtTest_01.jpg`       |
    |![Anteprima di un'immagine di Pollock di prova](../media/pollock-test-01-thumb.jpg)  |   `https://raw.githubusercontent.com/MicrosoftDocs/mslearn-classify-images-with-the-custom-vision-service/master/test-images/PollockTest_01.jpg`     |
   

<span data-ttu-id="0283d-140">L'endpoint di stima funziona come previsto.</span><span class="sxs-lookup"><span data-stu-id="0283d-140">Our prediction endpoint is working as expected.</span></span> <span data-ttu-id="0283d-141">Chiamare l'API è semplice come eseguire una richiesta HTTP all'endpoint con un valore Prediction-Key e un URL di immagine.</span><span class="sxs-lookup"><span data-stu-id="0283d-141">Calling the API is as simple as making a HTTP request to the endpoint with a Prediction-Key and an image URL.</span></span>