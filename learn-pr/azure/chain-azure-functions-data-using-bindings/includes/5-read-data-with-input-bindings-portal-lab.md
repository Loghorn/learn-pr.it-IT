<span data-ttu-id="ef42a-101">Si supponga di voler creare un semplice servizio di ricerca di segnalibri.</span><span class="sxs-lookup"><span data-stu-id="ef42a-101">Imagine that you want to create a simple bookmark lookup service.</span></span> <span data-ttu-id="ef42a-102">Il servizio inizialmente è di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="ef42a-102">Your service is read-only initially.</span></span> <span data-ttu-id="ef42a-103">Se un utente vuole trovare una voce, invia una richiesta con l'ID della voce e viene restituito l'URL.</span><span class="sxs-lookup"><span data-stu-id="ef42a-103">If users want to find an entry, they send a request with the ID of the entry and you return the URL.</span></span> <span data-ttu-id="ef42a-104">Nel diagramma seguente viene illustrato il flusso:</span><span class="sxs-lookup"><span data-stu-id="ef42a-104">The following flowchart explains the flow:</span></span>

![Diagramma di flusso che illustra il processo per trovare un segnalibro nel back-end di Cosmos DB.](../media/5-find-bookmark-flow-small.png)

<span data-ttu-id="ef42a-109">Quando un utente invia una richiesta con un testo, si prova a trovare nel database back-end una voce contenente questo testo come chiave o ID.</span><span class="sxs-lookup"><span data-stu-id="ef42a-109">When users send you a request with some text, you try to find an entry in your back-end database that contains this text as a key or ID.</span></span> <span data-ttu-id="ef42a-110">Viene restituito un risultato indicante se la voce è stata trovata o meno.</span><span class="sxs-lookup"><span data-stu-id="ef42a-110">You return a result that indicates whether you found the entry.</span></span>

<span data-ttu-id="ef42a-111">È necessario archiviare i dati altrove.</span><span class="sxs-lookup"><span data-stu-id="ef42a-111">You need to store the data somewhere.</span></span> <span data-ttu-id="ef42a-112">In questo diagramma di flusso l'archivio dati è un'istanza di Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="ef42a-112">In this flowchart, the data store is an Azure Cosmos DB instance.</span></span> <span data-ttu-id="ef42a-113">Ma come connettersi a tale database da una funzione e leggere i dati?</span><span class="sxs-lookup"><span data-stu-id="ef42a-113">But how do you connect to a database from a function and read data?</span></span> <span data-ttu-id="ef42a-114">Nell'ambito delle funzioni si configura un'*associazione di input* per tale processo.</span><span class="sxs-lookup"><span data-stu-id="ef42a-114">In the world of functions, you configure an *input binding* for that job.</span></span>  <span data-ttu-id="ef42a-115">Configurare un'associazione tramite il portale di Azure è davvero semplice.</span><span class="sxs-lookup"><span data-stu-id="ef42a-115">Configuring a binding through the Azure portal is straightforward.</span></span> <span data-ttu-id="ef42a-116">Come si vedrà a breve, non è necessario scrivere il codice per attività come l'apertura di una connessione di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="ef42a-116">As you'll see shortly, you don't have to write code for such tasks as opening a storage connection.</span></span> <span data-ttu-id="ef42a-117">Queste attività vengono eseguite dal runtime di Funzioni di Azure e dalle associazioni.</span><span class="sxs-lookup"><span data-stu-id="ef42a-117">The Azure Functions runtime and bindings take care of those tasks for you.</span></span>

## <a name="create-an-azure-cosmos-db-account"></a><span data-ttu-id="ef42a-118">Creare un account Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="ef42a-118">Create an Azure Cosmos DB account</span></span> 

> [!NOTE]
> <span data-ttu-id="ef42a-119">Questa unità non deve essere considerata un'esercitazione su Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="ef42a-119">This unit is not intended to be a tutorial on Azure Cosmos DB.</span></span> <span data-ttu-id="ef42a-120">Se dopo il completamento di questo modulo si è interessati a ottenere ulteriori informazioni, è disponibile un percorso di apprendimento completo in Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="ef42a-120">There is a complete learning path on Cosmos DB if you are interested in learning more after finishing this module.</span></span>

### <a name="create-a-database-account"></a><span data-ttu-id="ef42a-121">Creare un account di database</span><span class="sxs-lookup"><span data-stu-id="ef42a-121">Create a database account</span></span>

<span data-ttu-id="ef42a-122">Un account di database è un contenitore per la gestione di uno o più database.</span><span class="sxs-lookup"><span data-stu-id="ef42a-122">A database account is a container for managing one or more databases.</span></span> <span data-ttu-id="ef42a-123">Prima di poter creare un database è necessario creare un account di database.</span><span class="sxs-lookup"><span data-stu-id="ef42a-123">Before we can create a database, we need to create a database account.</span></span>

1. <span data-ttu-id="ef42a-124">Assicurarsi di aver eseguito l'accesso al [portale di Azure](https://portal.azure.com/triplecrownlabs.onmicrosoft.com?azure-portal=true) usando lo stesso account con cui è stato attivata la sandbox.</span><span class="sxs-lookup"><span data-stu-id="ef42a-124">Make sure you are signed into the [Azure portal](https://portal.azure.com/triplecrownlabs.onmicrosoft.com?azure-portal=true) using the same account you activated the sandbox with.</span></span>

1. <span data-ttu-id="ef42a-125">Selezionare il pulsante **Crea una risorsa** nell'angolo in alto a sinistra del portale di Azure, quindi selezionare **Database** > **Azure Cosmos DB**.</span><span class="sxs-lookup"><span data-stu-id="ef42a-125">Select the **Create a resource** button found on the upper left-hand corner of the Azure portal, then select **Databases** > **Azure Cosmos DB**.</span></span>

1. <span data-ttu-id="ef42a-126">Nella pagina **Nuovo account** immettere le impostazioni per il nuovo account Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="ef42a-126">In the **New account** page, enter the settings for the new Azure Cosmos DB account.</span></span>

    | <span data-ttu-id="ef42a-127">Impostazione</span><span class="sxs-lookup"><span data-stu-id="ef42a-127">Setting</span></span> | <span data-ttu-id="ef42a-128">Valore</span><span class="sxs-lookup"><span data-stu-id="ef42a-128">Value</span></span> | <span data-ttu-id="ef42a-129">Descrizione</span><span class="sxs-lookup"><span data-stu-id="ef42a-129">Description</span></span> |
    |---------|-------|-------------|
    | <span data-ttu-id="ef42a-130">ID</span><span class="sxs-lookup"><span data-stu-id="ef42a-130">ID</span></span> |<span data-ttu-id="ef42a-131">*Immettere un nome univoco*</span><span class="sxs-lookup"><span data-stu-id="ef42a-131">*Enter a unique name*</span></span>|<span data-ttu-id="ef42a-132">Immettere un nome univoco per identificare l'account Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="ef42a-132">Enter a unique name to identify this Azure Cosmos DB account.</span></span> <span data-ttu-id="ef42a-133">Poiché per creare l'URI viene aggiunto `documents.azure.com` all'ID specificato, usare un ID univoco ma identificabile.</span><span class="sxs-lookup"><span data-stu-id="ef42a-133">Because `documents.azure.com` is appended to the ID that you provide to create your URI, use a unique but identifiable ID.</span></span><br><br><span data-ttu-id="ef42a-134">L'ID può contenere solo lettere minuscole, numeri e il segno meno (-) e deve avere una lunghezza compresa tra 3 e 50 caratteri.</span><span class="sxs-lookup"><span data-stu-id="ef42a-134">The ID can contain only lowercase letters, numbers, and the hyphen (-) character, and it must contain 3 to 50 characters.</span></span> |
    | <span data-ttu-id="ef42a-135">API</span><span class="sxs-lookup"><span data-stu-id="ef42a-135">API</span></span> |<span data-ttu-id="ef42a-136">SQL</span><span class="sxs-lookup"><span data-stu-id="ef42a-136">SQL</span></span>|<span data-ttu-id="ef42a-137">L'API determina il tipo di account da creare.</span><span class="sxs-lookup"><span data-stu-id="ef42a-137">The API determines the type of account to create.</span></span> <span data-ttu-id="ef42a-138">Azure Cosmos DB offre cinque API per soddisfare le esigenze dell'applicazione, ovvero SQL (database di documenti), Gremlin (database di grafi), MongoDB (database di documenti), Tabella di Azure e Cassandra, per ognuna delle quali è attualmente necessario un account separato.</span><span class="sxs-lookup"><span data-stu-id="ef42a-138">Azure Cosmos DB provides five APIs to suit the needs of your application: SQL (document database), Gremlin (graph database), MongoDB (document database), Azure Table, and Cassandra, each of which currently require a separate account.</span></span> <br><br><span data-ttu-id="ef42a-139">Selezionare **SQL**.</span><span class="sxs-lookup"><span data-stu-id="ef42a-139">Select **SQL**.</span></span> <span data-ttu-id="ef42a-140">Al momento, il trigger e le associazioni di input e output di Azure Cosmos DB funzionano solo con gli account API SQL e API Graph.</span><span class="sxs-lookup"><span data-stu-id="ef42a-140">At this time, the Azure Cosmos DB trigger, input bindings, and output bindings only work with SQL API and Graph API accounts.</span></span> |
    | <span data-ttu-id="ef42a-141">Sottoscrizione</span><span class="sxs-lookup"><span data-stu-id="ef42a-141">Subscription</span></span> | <span data-ttu-id="ef42a-142">Sottoscrizione Concierge</span><span class="sxs-lookup"><span data-stu-id="ef42a-142">Concierge subscription</span></span> | <span data-ttu-id="ef42a-143">Selezionare la sottoscrizione di Azure che si desidera usare per l'account Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="ef42a-143">Select Azure subscription that you want to use for this Azure Cosmos DB account.</span></span> |
    <span data-ttu-id="ef42a-144">Gruppo di risorse</span><span class="sxs-lookup"><span data-stu-id="ef42a-144">Resource Group</span></span>|<span data-ttu-id="ef42a-145">Usa esistente</span><span class="sxs-lookup"><span data-stu-id="ef42a-145">Use existing</span></span><br><br><span data-ttu-id="ef42a-146">Quindi, selezionare il **<rgn>[nome gruppo di risorse sandbox]</rgn>**.</span><span class="sxs-lookup"><span data-stu-id="ef42a-146">Then select **<rgn>[Sandbox resource group name]</rgn>**.</span></span> | <span data-ttu-id="ef42a-147">Si seleziona **Usa esistente** perché si vogliono raggruppare tutte le risorse create per questo modulo nello stesso gruppo di risorse sandbox.</span><span class="sxs-lookup"><span data-stu-id="ef42a-147">We're selecting **Use existing**, because we want to group all resources created for this module under the free Sandbox resource group.</span></span> |
    | <span data-ttu-id="ef42a-148">Località</span><span class="sxs-lookup"><span data-stu-id="ef42a-148">Location</span></span> | <span data-ttu-id="ef42a-149">Viene inserita automaticamente dopo che **Usa esistente** è stato impostato.</span><span class="sxs-lookup"><span data-stu-id="ef42a-149">Auto-filled once **Use existing** is set.</span></span> | <span data-ttu-id="ef42a-150">Selezionare la località geografica in cui ospitare l'account Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="ef42a-150">Select the geographic location in which to host your Azure Cosmos DB account.</span></span> <span data-ttu-id="ef42a-151">Usare la località più vicina agli utenti per offrire loro la massima velocità di accesso ai dati.</span><span class="sxs-lookup"><span data-stu-id="ef42a-151">Use the location that's closest to your users to give them the fastest access to the data.</span></span> <span data-ttu-id="ef42a-152">In questo lab la località è predeterminata come località impostata per il gruppo di risorse esistente.</span><span class="sxs-lookup"><span data-stu-id="ef42a-152">In this lab, the location is pre-determined for us as the location set for the existing resource group.</span></span>|
    
    <span data-ttu-id="ef42a-153">Lasciare tutti gli altri campi nel pannello **Nuovo account** impostati sul valore predefinito in quanto verranno usati in questo modulo.</span><span class="sxs-lookup"><span data-stu-id="ef42a-153">Leave all other fields in the **New account** blade at their default values because we're using them in this module.</span></span>  <span data-ttu-id="ef42a-154">Sono inclusi **Abilita ridondanza geografica**, **Abilita Multimaster** e **Reti virtuali**.</span><span class="sxs-lookup"><span data-stu-id="ef42a-154">That includes **Enable geo-redundancy**, **Enable Multi Master**, **Virtual networks**.</span></span>

1. <span data-ttu-id="ef42a-155">Selezionare **Crea** per effettuare il provisioning dell'account del database e distribuirlo.</span><span class="sxs-lookup"><span data-stu-id="ef42a-155">Select **Create** to provision and deploy the database account.</span></span>

1. <span data-ttu-id="ef42a-156">La distribuzione potrebbe richiedere tempo.</span><span class="sxs-lookup"><span data-stu-id="ef42a-156">Deployment can take some time.</span></span> <span data-ttu-id="ef42a-157">Quindi, prima di procedere, attendere il messaggio **Distribuzione riuscita** nell'hub di notifica.</span><span class="sxs-lookup"><span data-stu-id="ef42a-157">So, wait for a **Deployment succeeded** message in the Notification Hub before proceeding.</span></span>

    ![Notifica di completamento della distribuzione dell'account database](../media/5-db-deploy-success.PNG)

1. <span data-ttu-id="ef42a-159">Per passare all'account del database nel portale, selezionare **Vai alla risorsa**.</span><span class="sxs-lookup"><span data-stu-id="ef42a-159">Select **Go to resource** to navigate to the database account in the portal.</span></span> <span data-ttu-id="ef42a-160">Successivamente verrà aggiunta una raccolta al database.</span><span class="sxs-lookup"><span data-stu-id="ef42a-160">We'll add a collection to the database next.</span></span>

### <a name="add-a-collection"></a><span data-ttu-id="ef42a-161">Aggiungere una raccolta</span><span class="sxs-lookup"><span data-stu-id="ef42a-161">Add a collection</span></span>

<span data-ttu-id="ef42a-162">In Cosmos DB un *contenitore* include le entità arbitrarie generate dall'utente.</span><span class="sxs-lookup"><span data-stu-id="ef42a-162">In Cosmos DB, a *container* holds arbitrary user-generated entities.</span></span> <span data-ttu-id="ef42a-163">Per gli account dell'API MongoDB e SQL un contenitore esegue il mapping a una *raccolta*.</span><span class="sxs-lookup"><span data-stu-id="ef42a-163">For SQL and MongoDB API accounts, a container maps to a *collection*.</span></span> <span data-ttu-id="ef42a-164">All'interno di una raccolta vengono archiviati i documenti.</span><span class="sxs-lookup"><span data-stu-id="ef42a-164">Inside a collection, we store documents.</span></span>

<span data-ttu-id="ef42a-165">Verrà ora usato lo strumento Esplora dati nel portale di Azure per creare un database e una raccolta.</span><span class="sxs-lookup"><span data-stu-id="ef42a-165">Let's use the Data Explorer tool in the Azure portal to create a database and collection.</span></span>

1. <span data-ttu-id="ef42a-166">Fare clic su **Esplora dati** > **Nuova raccolta**.</span><span class="sxs-lookup"><span data-stu-id="ef42a-166">Select **Data Explorer** > **New Collection**.</span></span>

2. <span data-ttu-id="ef42a-167">In **Aggiungi raccolta** immettere le impostazioni per la nuova raccolta.</span><span class="sxs-lookup"><span data-stu-id="ef42a-167">Under **Add collection**, enter the settings for the new collection.</span></span>

    >[!TIP]
    ><span data-ttu-id="ef42a-168">L'area **Aggiungi raccolta** viene visualizzata all'estrema destra.</span><span class="sxs-lookup"><span data-stu-id="ef42a-168">The **Add Collection** area is displayed on the far right.</span></span> <span data-ttu-id="ef42a-169">Potrebbe essere necessario scorrere verso destra per visualizzarlo.</span><span class="sxs-lookup"><span data-stu-id="ef42a-169">You may need to scroll right to see it.</span></span>

    |<span data-ttu-id="ef42a-170">Impostazione</span><span class="sxs-lookup"><span data-stu-id="ef42a-170">Setting</span></span>|<span data-ttu-id="ef42a-171">Valore consigliato</span><span class="sxs-lookup"><span data-stu-id="ef42a-171">Suggested value</span></span>|<span data-ttu-id="ef42a-172">Descrizione</span><span class="sxs-lookup"><span data-stu-id="ef42a-172">Description</span></span>
    |---|---|---|
    |<span data-ttu-id="ef42a-173">ID database</span><span class="sxs-lookup"><span data-stu-id="ef42a-173">Database ID</span></span>|[!INCLUDE [cosmos-db-name](./cosmos-db-name.md)]| <span data-ttu-id="ef42a-174">I nomi dei database devono avere una lunghezza compresa tra 1 e 255 caratteri e non possono contenere /, \\, #, ? o spazi finali.</span><span class="sxs-lookup"><span data-stu-id="ef42a-174">Database names must contain from 1 through 255 characters, and they cannot contain /, \\, #, ?, or a trailing space.</span></span><br><br><span data-ttu-id="ef42a-175">È possibile immettere qualsiasi valore, ma è consigliabile usare [!INCLUDE [cosmos-db-name](./cosmos-db-name.md)] come nome del nuovo database, perché è quello che verrà usato in questa unità.</span><span class="sxs-lookup"><span data-stu-id="ef42a-175">You are free to enter whatever you want here, but we suggest [!INCLUDE [cosmos-db-name](./cosmos-db-name.md)] as the name for the new database, and that's what we'll refer to in this unit.</span></span> |
    |<span data-ttu-id="ef42a-176">ID raccolta</span><span class="sxs-lookup"><span data-stu-id="ef42a-176">Collection ID</span></span>|[!INCLUDE [cosmos-coll-name](./cosmos-coll-name.md)]|<span data-ttu-id="ef42a-177">Immettere [!INCLUDE [cosmos-coll-name](./cosmos-coll-name.md)] come nome della nuova raccolta.</span><span class="sxs-lookup"><span data-stu-id="ef42a-177">Enter [!INCLUDE [cosmos-coll-name](./cosmos-coll-name.md)] as the name for our new collection.</span></span> <span data-ttu-id="ef42a-178">Gli ID delle raccolte prevedono gli stessi requisiti relativi ai caratteri dei nomi di database.</span><span class="sxs-lookup"><span data-stu-id="ef42a-178">Collection IDs have the same character requirements as database names.</span></span>|
    |<span data-ttu-id="ef42a-179">Capacità di archiviazione</span><span class="sxs-lookup"><span data-stu-id="ef42a-179">Storage capacity</span></span>| <span data-ttu-id="ef42a-180">Fissa (10 GB)</span><span class="sxs-lookup"><span data-stu-id="ef42a-180">Fixed (10 GB)</span></span>|<span data-ttu-id="ef42a-181">Usare il valore predefinito **Fisso (10 GB)**.</span><span class="sxs-lookup"><span data-stu-id="ef42a-181">Use the default value of **Fixed (10 GB)**.</span></span> <span data-ttu-id="ef42a-182">Questo valore indica la capacità di archiviazione del database.</span><span class="sxs-lookup"><span data-stu-id="ef42a-182">This value is the storage capacity of the database.</span></span>|
    |<span data-ttu-id="ef42a-183">Velocità effettiva</span><span class="sxs-lookup"><span data-stu-id="ef42a-183">Throughput</span></span>|<span data-ttu-id="ef42a-184">1000 UR</span><span class="sxs-lookup"><span data-stu-id="ef42a-184">1000 RU</span></span>|<span data-ttu-id="ef42a-185">Modificare la velocità effettiva in 1000 unità richiesta al secondo (UR/sec).</span><span class="sxs-lookup"><span data-stu-id="ef42a-185">Change the throughput to 1000 request units per second (RU/s).</span></span> <span data-ttu-id="ef42a-186">Per impostare la velocità effettiva su 400 UR/sec la capacità di archiviazione deve essere impostata su **Fisso (10 GB)**.</span><span class="sxs-lookup"><span data-stu-id="ef42a-186">Storage capacity must be set to **Fixed (10 GB)** to set throughput to 400 RU/s.</span></span> <span data-ttu-id="ef42a-187">Se si vuole ridurre la latenza, è possibile aumentare le prestazioni in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="ef42a-187">If you want to reduce latency, you can scale up the performance later.</span></span>|
        
3. <span data-ttu-id="ef42a-188">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="ef42a-188">Click **OK**.</span></span> <span data-ttu-id="ef42a-189">In Esplora dati verranno visualizzati il nuovo database e la nuova raccolta.</span><span class="sxs-lookup"><span data-stu-id="ef42a-189">The Data Explorer displays the new database and collection.</span></span> <span data-ttu-id="ef42a-190">È stato quindi creato un database.</span><span class="sxs-lookup"><span data-stu-id="ef42a-190">So, now we have a database.</span></span> <span data-ttu-id="ef42a-191">All'interno del database è stata definita una raccolta.</span><span class="sxs-lookup"><span data-stu-id="ef42a-191">Inside the database, we've defined a collection.</span></span> <span data-ttu-id="ef42a-192">Verranno ora aggiunti alcuni dati, noti anche come documenti.</span><span class="sxs-lookup"><span data-stu-id="ef42a-192">Next, we'll add some data, also known as documents.</span></span>

### <a name="add-test-data"></a><span data-ttu-id="ef42a-193">Aggiungere i dati del test</span><span class="sxs-lookup"><span data-stu-id="ef42a-193">Add test data</span></span>

<span data-ttu-id="ef42a-194">All'interno del database è stata definita una raccolta denominata [!INCLUDE [cosmos-coll-name](./cosmos-coll-name.md)].</span><span class="sxs-lookup"><span data-stu-id="ef42a-194">We've defined a collection in our database called [!INCLUDE [cosmos-coll-name](./cosmos-coll-name.md)].</span></span> <span data-ttu-id="ef42a-195">Si vuole archiviare un URL e un ID in ogni documento, come ad esempio un elenco di segnalibri di pagine Web.</span><span class="sxs-lookup"><span data-stu-id="ef42a-195">We want to store a URL and ID in each document, like a list of web page bookmarks.</span></span> 

<span data-ttu-id="ef42a-196">I dati verranno aggiunti alla nuova raccolta usando Esplora dati.</span><span class="sxs-lookup"><span data-stu-id="ef42a-196">You'll add data to your new collection using Data Explorer.</span></span>

1. <span data-ttu-id="ef42a-197">In Esplora dati il nuovo database viene visualizzato nel riquadro Raccolte.</span><span class="sxs-lookup"><span data-stu-id="ef42a-197">In Data Explorer, the new database appears in the Collections pane.</span></span> <span data-ttu-id="ef42a-198">Espandere il database [!INCLUDE [cosmos-db-name](./cosmos-db-name.md)], espandere la raccolta [!INCLUDE [cosmos-coll-name](./cosmos-coll-name.md)], selezionare **Documenti**, quindi **Nuovo documento**.</span><span class="sxs-lookup"><span data-stu-id="ef42a-198">Expand the [!INCLUDE [cosmos-db-name](./cosmos-db-name.md)] database, expand the [!INCLUDE [cosmos-coll-name](./cosmos-coll-name.md)] collection, select **Documents**, and then select **New Document**.</span></span>
  
2. <span data-ttu-id="ef42a-199">Sostituire il contenuto predefinito del nuovo documento con il JSON seguente.</span><span class="sxs-lookup"><span data-stu-id="ef42a-199">Replace the default content of the new document with the following JSON.</span></span>

     ```json
     {
         "id": "docs",
         "URL": "https://docs.microsoft.com/azure"
     }
     ```

3. <span data-ttu-id="ef42a-200">Dopo avere aggiunto il JSON alla scheda **Documenti**, selezionare **Salva**.</span><span class="sxs-lookup"><span data-stu-id="ef42a-200">After you've added the JSON to the **Documents** tab, select **Save**.</span></span>

    <span data-ttu-id="ef42a-201">Si noti che sono presenti più proprietà di quelle aggiunte.</span><span class="sxs-lookup"><span data-stu-id="ef42a-201">Notice that there are more properties than the ones we added.</span></span> <span data-ttu-id="ef42a-202">Iniziano tutte con un carattere di sottolineatura (_rid, _self, _etag, _attachments, _ts).</span><span class="sxs-lookup"><span data-stu-id="ef42a-202">They all begin with an underline (_rid, _self, _etag, _attachments, _ts).</span></span> <span data-ttu-id="ef42a-203">Si tratta di proprietà generate dal sistema per semplificare la gestione del documento.</span><span class="sxs-lookup"><span data-stu-id="ef42a-203">These are properties generated by the system to help manage the document.</span></span>

    |<span data-ttu-id="ef42a-204">Proprietà</span><span class="sxs-lookup"><span data-stu-id="ef42a-204">Property</span></span>  |<span data-ttu-id="ef42a-205">Descrizione</span><span class="sxs-lookup"><span data-stu-id="ef42a-205">Description</span></span>  |
    |---------|---------|
    | `_rid`     |     <span data-ttu-id="ef42a-206">L'ID della risorsa è un identificatore univoco e anche gerarchico per ogni stack di risorse nel modello di risorsa.</span><span class="sxs-lookup"><span data-stu-id="ef42a-206">The resource ID is a unique identifier that is also hierarchical per the resource stack on the resource model.</span></span> <span data-ttu-id="ef42a-207">Viene usato internamente per il posizionamento e l'esplorazione della risorsa documento.</span><span class="sxs-lookup"><span data-stu-id="ef42a-207">It is used internally for placement and navigation of the document resource.</span></span>    |
    | `_self`     |   <span data-ttu-id="ef42a-208">URI indirizzabile univoco per la risorsa.</span><span class="sxs-lookup"><span data-stu-id="ef42a-208">The unique addressable URI for the resource.</span></span>      |
    | `_etag`     |   <span data-ttu-id="ef42a-209">Necessario per il controllo della concorrenza ottimistica.</span><span class="sxs-lookup"><span data-stu-id="ef42a-209">Required for optimistic concurrency control.</span></span>     |
    | `_attachments`     |  <span data-ttu-id="ef42a-210">Percorso indirizzabile della risorsa allegati.</span><span class="sxs-lookup"><span data-stu-id="ef42a-210">The addressable path for the attachments resource.</span></span>       |
    | `_ts`     |    <span data-ttu-id="ef42a-211">Timestamp dell'ultimo aggiornamento di questa risorsa.</span><span class="sxs-lookup"><span data-stu-id="ef42a-211">The time stamp of the last update of this resource.</span></span>    |
     
4. <span data-ttu-id="ef42a-212">Verranno ora aggiunti alcuni altri documenti alla raccolta.</span><span class="sxs-lookup"><span data-stu-id="ef42a-212">Let's add a few more documents into the collection.</span></span> <span data-ttu-id="ef42a-213">Creare quattro documenti aggiuntivi con il contenuto di seguito.</span><span class="sxs-lookup"><span data-stu-id="ef42a-213">Create four more documents with the following content.</span></span> <span data-ttu-id="ef42a-214">Ricordarsi di salvare il lavoro.</span><span class="sxs-lookup"><span data-stu-id="ef42a-214">Remember to save your work.</span></span>

    ```json
    {
        "id": "portal",
        "URL": "https://portal.azure.com"
    }
    ```
    
    ```json
    {
        "id": "learn",
        "URL": "https://docs.microsoft.com/learn"
    }
    ```
    
    ```json
    {
        "id": "marketplace",
        "URL": "https://azuremarketplace.microsoft.com/marketplace/apps"
    }
    ```
    
    ```json
    {
        "id": "blog",
        "URL": "https://azure.microsoft.com/blog"
    }
    ```
    
1. <span data-ttu-id="ef42a-215">Al termine dell'operazione, la raccolta sarà simile a quella rappresentata di seguito:</span><span class="sxs-lookup"><span data-stu-id="ef42a-215">When you've finished, your collection should look like the following:</span></span>

    ![Interfaccia utente dell'API SQL nel portale, che mostra l'elenco di voci aggiunte alla raccolta di segnalibri](../media/5-db-bookmark-coll.PNG)
    
<span data-ttu-id="ef42a-217">Alcune voci sono ora disponibili nella raccolta di segnalibri.</span><span class="sxs-lookup"><span data-stu-id="ef42a-217">You now have a few entries in your bookmark collection.</span></span> <span data-ttu-id="ef42a-218">Questo scenario funziona come indicato di seguito.</span><span class="sxs-lookup"><span data-stu-id="ef42a-218">Our scenario will work as follows.</span></span> <span data-ttu-id="ef42a-219">Se ad esempio arriva una richiesta con "id=docs", si cercherà tale ID nella raccolta di segnalibri e si restituirà l'URL `https://docs.microsoft.com/azure`.</span><span class="sxs-lookup"><span data-stu-id="ef42a-219">If a request arrives with, for example, "id=docs", you'll look up that ID in your bookmarks collection and return the URL `https://docs.microsoft.com/azure`.</span></span> <span data-ttu-id="ef42a-220">Verrà ora creata una funzione di Azure che esegue la ricerca di valori in questa raccolta.</span><span class="sxs-lookup"><span data-stu-id="ef42a-220">Let's make an Azure function that looks up values in this collection.</span></span>

## <a name="create-your-function"></a><span data-ttu-id="ef42a-221">Creare una funzione</span><span class="sxs-lookup"><span data-stu-id="ef42a-221">Create your function</span></span>

1. <span data-ttu-id="ef42a-222">Passare all'app per le funzioni creata nell'unità precedente.</span><span class="sxs-lookup"><span data-stu-id="ef42a-222">Navigate to the function app that you created in the preceding unit.</span></span>

1. <span data-ttu-id="ef42a-223">Espandere l'app per le funzioni, quindi passare il puntatore sulla raccolta di funzioni e selezionare il pulsante **Aggiungi** (**+**) accanto a **Funzioni**.</span><span class="sxs-lookup"><span data-stu-id="ef42a-223">Expand your function app, hover over the functions collection, and then select the **Add** (**+**) button next to **Functions**.</span></span>  
   <span data-ttu-id="ef42a-224">Questa azione avvia il processo di creazione della funzione.</span><span class="sxs-lookup"><span data-stu-id="ef42a-224">This action starts the function creation process.</span></span> <span data-ttu-id="ef42a-225">L'animazione di seguito illustra l'azione:</span><span class="sxs-lookup"><span data-stu-id="ef42a-225">The following animation illustrates the action:</span></span>

   ![Animazione del segno più che viene visualizzata quando l'utente passa il puntatore sulla voce di menu delle funzioni](../media/3-func-app-plus-hover-small.gif)

   <span data-ttu-id="ef42a-227">La pagina mostra il set completo di trigger supportati.</span><span class="sxs-lookup"><span data-stu-id="ef42a-227">The page displays the complete set of supported triggers.</span></span> 
   
1. <span data-ttu-id="ef42a-228">Selezionare **Trigger HTTP**, che è la prima voce nello screenshot di seguito:</span><span class="sxs-lookup"><span data-stu-id="ef42a-228">Select **HTTP trigger**, which is the first entry in the following screenshot:</span></span>

    ![Screenshot della parte dell'interfaccia utente di selezione del modello di trigger, con il trigger HTTP visualizzato per primo nell'angolo in alto a sinistra dell'immagine.](../media/5-trigger-templates-small.png)

1. <span data-ttu-id="ef42a-230">Compilare con i valori seguenti la finestra di dialogo **Nuova funzione** che viene visualizzata a destra.</span><span class="sxs-lookup"><span data-stu-id="ef42a-230">Fill out the **New Function** dialog that appears to the right using the following values.</span></span>

    | <span data-ttu-id="ef42a-231">Campo</span><span class="sxs-lookup"><span data-stu-id="ef42a-231">Field</span></span> | <span data-ttu-id="ef42a-232">Valore</span><span class="sxs-lookup"><span data-stu-id="ef42a-232">Value</span></span> |
    |----------|--------|
    | <span data-ttu-id="ef42a-233">Linguaggio</span><span class="sxs-lookup"><span data-stu-id="ef42a-233">Language</span></span> | <span data-ttu-id="ef42a-234">**JavaScript**</span><span class="sxs-lookup"><span data-stu-id="ef42a-234">**JavaScript**</span></span> |
    | <span data-ttu-id="ef42a-235">Nome</span><span class="sxs-lookup"><span data-stu-id="ef42a-235">Name</span></span>     | [!INCLUDE [func-name-find](./func-name-find.md)] |
    | <span data-ttu-id="ef42a-236">Livello di autorizzazione</span><span class="sxs-lookup"><span data-stu-id="ef42a-236">Authorization level</span></span> | <span data-ttu-id="ef42a-237">**Funzione**</span><span class="sxs-lookup"><span data-stu-id="ef42a-237">**Function**</span></span> |
    
1. <span data-ttu-id="ef42a-238">Selezionare **Crea** per creare la funzione.</span><span class="sxs-lookup"><span data-stu-id="ef42a-238">Select **Create** to create your function.</span></span>  
    <span data-ttu-id="ef42a-239">Verrà aperto il file *index.js* nell'editor di codice e visualizzata un'implementazione predefinita della funzione attivata da HTTP.</span><span class="sxs-lookup"><span data-stu-id="ef42a-239">This action opens the *index.js* file in the code editor and displays a default implementation of the HTTP-triggered function.</span></span>

### <a name="verify-the-function"></a><span data-ttu-id="ef42a-240">Verificare la funzione</span><span class="sxs-lookup"><span data-stu-id="ef42a-240">Verify the function</span></span>

<span data-ttu-id="ef42a-241">È possibile verificare quanto fatto finora eseguendo test sulla nuova funzione come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="ef42a-241">You can verify what we have done so far by testing our new function as follows:</span></span>

1. <span data-ttu-id="ef42a-242">Nella nuova funzione fare clic su **Recupera URL della funzione** nell'angolo in alto a destra, selezionare **predefinito (Tasto funzione)**, quindi fare clic su **Copia**.</span><span class="sxs-lookup"><span data-stu-id="ef42a-242">In your new function, click **Get function URL** at the top right, select **default (Function key)**, and then click **Copy**.</span></span>

1. <span data-ttu-id="ef42a-243">Incollare l'URL della funzione copiato nella barra degli indirizzi del browser.</span><span class="sxs-lookup"><span data-stu-id="ef42a-243">Paste the function URL you copied into your browser's address bar.</span></span> <span data-ttu-id="ef42a-244">Aggiungere il valore della stringa di query `&name=<yourname>` alla fine dell'URL e premere **Invio** per eseguire la richiesta.</span><span class="sxs-lookup"><span data-stu-id="ef42a-244">Add the query string value `&name=<yourname>` to the end of the URL and press **Enter** to execute the request.</span></span> <span data-ttu-id="ef42a-245">Si dovrebbe ottenere una risposta dalla funzione di Azure direttamente nel browser.</span><span class="sxs-lookup"><span data-stu-id="ef42a-245">You should get a response from the Azure Function right in the browser.</span></span>  

<span data-ttu-id="ef42a-246">Ora che la funzione essenziale è pronta, è possibile concentrare l'attenzione sulla lettura dei dati da Azure Cosmos DB, ovvero, in questo scenario, dalla raccolta [!INCLUDE [cosmos-coll-name](./cosmos-coll-name.md)].</span><span class="sxs-lookup"><span data-stu-id="ef42a-246">Now that we have our bare-bones function working, let's turn our attention to reading data from our Azure Cosmos DB, or in our scenario, our [!INCLUDE [cosmos-coll-name](./cosmos-coll-name.md)] collection.</span></span>

## <a name="add-an-azure-cosmos-db-input-binding"></a><span data-ttu-id="ef42a-247">Aggiungere un'associazione di input di Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="ef42a-247">Add an Azure Cosmos DB input binding</span></span>

<span data-ttu-id="ef42a-248">Per leggere i dati dal database è necessario definire un'associazione di input.</span><span class="sxs-lookup"><span data-stu-id="ef42a-248">To read data from the database, you need to define an input binding.</span></span> <span data-ttu-id="ef42a-249">Come si vedrà, con pochi passaggi è possibile configurare un'associazione che può comunicare con il database.</span><span class="sxs-lookup"><span data-stu-id="ef42a-249">As you'll see, you can configure a binding that can talk to your database in just a few steps.</span></span>

1. <span data-ttu-id="ef42a-250">Per aprire la scheda dell'integrazione, selezionare **Integra** nel riquadro a sinistra.</span><span class="sxs-lookup"><span data-stu-id="ef42a-250">Select **Integrate** in the left pane to open the integration tab.</span></span>  
   <span data-ttu-id="ef42a-251">Il modello usato ha creato automaticamente un trigger HTTP e un'associazione di output HTTP.</span><span class="sxs-lookup"><span data-stu-id="ef42a-251">The template you used created an HTTP trigger and an HTTP output binding.</span></span> <span data-ttu-id="ef42a-252">È ora possibile aggiungere la nuova associazione di input di Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="ef42a-252">Now add your new Azure Cosmos DB input binding.</span></span> 

2. <span data-ttu-id="ef42a-253">Dalla colonna **Input**, selezionare **+ Nuovo input**.</span><span class="sxs-lookup"><span data-stu-id="ef42a-253">Select **New Input** in the **Inputs** column.</span></span>  
   <span data-ttu-id="ef42a-254">Viene visualizzato un elenco di tutti i tipi di associazione di input possibili.</span><span class="sxs-lookup"><span data-stu-id="ef42a-254">A list of all possible input binding types is displayed.</span></span>

3. <span data-ttu-id="ef42a-255">Nell'elenco selezionare **Azure Cosmos DB**, quindi **Seleziona**.</span><span class="sxs-lookup"><span data-stu-id="ef42a-255">In the list, select **Azure Cosmos DB**, and then select **Select**.</span></span>  
   <span data-ttu-id="ef42a-256">Verrà aperta la pagina di configurazione di input di Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="ef42a-256">This action opens the Azure Cosmos DB input configuration page.</span></span> <span data-ttu-id="ef42a-257">Successivamente, verrà configurata una connessione al database.</span><span class="sxs-lookup"><span data-stu-id="ef42a-257">Next, you'll set up a connection to your database.</span></span>

4. <span data-ttu-id="ef42a-258">Accanto alla casella della **connessione all'account Azure Cosmos DB**, selezionare **nuova**.</span><span class="sxs-lookup"><span data-stu-id="ef42a-258">Next to the **Azure Cosmos DB account connection** box, select **new**.</span></span>  
   <span data-ttu-id="ef42a-259">Verrà aperta la finestra di dialogo **Connessione**, in cui sono già selezionati l'**account Azure Cosmos DB** e la sottoscrizione ad Azure.</span><span class="sxs-lookup"><span data-stu-id="ef42a-259">This action opens the **Connection** window, which already has **Azure Cosmos DB account** and your Azure subscription selected.</span></span> <span data-ttu-id="ef42a-260">L'unica cosa che rimane da fare è selezionare un ID account del database.</span><span class="sxs-lookup"><span data-stu-id="ef42a-260">The only thing left to do is to select a database account ID.</span></span>

5. <span data-ttu-id="ef42a-261">Nella sezione "Creare un account del database" è stato necessario specificare un valore di ID.</span><span class="sxs-lookup"><span data-stu-id="ef42a-261">In the "Create a database account" section, you had to supply an ID value.</span></span> <span data-ttu-id="ef42a-262">Trovare ora tale valore nell'elenco a discesa **Account del database**, quindi fare clic su **Seleziona**.</span><span class="sxs-lookup"><span data-stu-id="ef42a-262">Find that value in the **Database Account** drop-down list, and then click **Select**.</span></span>

6. <span data-ttu-id="ef42a-263">Una nuova connessione al database viene configurata e visualizzata nel campo della **connessione all'account di Azure Cosmos DB**.</span><span class="sxs-lookup"><span data-stu-id="ef42a-263">A new connection to the database is configured and is shown in the **Azure Cosmos DB account connection** field.</span></span> <span data-ttu-id="ef42a-264">Per sapere che cosa indica effettivamente questo nome astratto, fare clic su *mostra valore* per visualizzare la stringa di connessione.</span><span class="sxs-lookup"><span data-stu-id="ef42a-264">If you're curious about what is actually behind this abstract name, click *show value* to reveal the connection string.</span></span>

<span data-ttu-id="ef42a-265">Poiché si vuole cercare un segnalibro con un ID specifico, ora si collegherà l'ID ricevuto all'associazione.</span><span class="sxs-lookup"><span data-stu-id="ef42a-265">You want to look up a bookmark with a specific ID, so let's tie the ID we receive to the binding.</span></span>

7. <span data-ttu-id="ef42a-266">Nel campo **ID documento (facoltativo)** immettere `{id}`.</span><span class="sxs-lookup"><span data-stu-id="ef42a-266">In the **Document ID (optional)** field, enter `{id}`.</span></span> <span data-ttu-id="ef42a-267">Questa sintassi è nota come *espressione di associazione*.</span><span class="sxs-lookup"><span data-stu-id="ef42a-267">This syntax is known as a *binding expression*.</span></span> <span data-ttu-id="ef42a-268">La funzione viene attivata da una richiesta HTTP che usa una stringa di query per specificare l'ID da cercare.</span><span class="sxs-lookup"><span data-stu-id="ef42a-268">The function is triggered by an HTTP request that uses a query string to specify the ID to look up.</span></span> <span data-ttu-id="ef42a-269">Poiché gli ID sono univoci nella raccolta, l'associazione restituirà 0 (non trovato) o 1 documento (trovato).</span><span class="sxs-lookup"><span data-stu-id="ef42a-269">Since IDs are unique in our collection, the binding will return either 0 (not found) or 1 (found) documents.</span></span>

8. <span data-ttu-id="ef42a-270">Compilare con attenzione i campi rimanenti in questa pagina usando i valori della tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="ef42a-270">Carefully fill out the remaining fields on this page using the values in the following table.</span></span> <span data-ttu-id="ef42a-271">In qualsiasi momento è possibile fare clic sull'icona delle informazioni a destra del nome di ogni campo per altre informazioni sullo scopo di ogni campo.</span><span class="sxs-lookup"><span data-stu-id="ef42a-271">At any time, you can click on the information icon to the right of each field name to learn more about the purpose of each field.</span></span>

    |<span data-ttu-id="ef42a-272">Impostazione</span><span class="sxs-lookup"><span data-stu-id="ef42a-272">Setting</span></span>  |<span data-ttu-id="ef42a-273">Valore</span><span class="sxs-lookup"><span data-stu-id="ef42a-273">Value</span></span>  |<span data-ttu-id="ef42a-274">Descrizione</span><span class="sxs-lookup"><span data-stu-id="ef42a-274">Description</span></span>  |
    |---------|---------|---------|
    |<span data-ttu-id="ef42a-275">Nome del parametro del documento</span><span class="sxs-lookup"><span data-stu-id="ef42a-275">Document parameter name</span></span>     |  <span data-ttu-id="ef42a-276">**bookmark**</span><span class="sxs-lookup"><span data-stu-id="ef42a-276">**bookmark**</span></span>       |  <span data-ttu-id="ef42a-277">Nome usato per identificare questa associazione nel codice.</span><span class="sxs-lookup"><span data-stu-id="ef42a-277">The name used to identify this binding in your code.</span></span>      |
    |<span data-ttu-id="ef42a-278">Nome database</span><span class="sxs-lookup"><span data-stu-id="ef42a-278">Database name</span></span>     |  [!INCLUDE [cosmos-db-name](./cosmos-db-name.md)]       | <span data-ttu-id="ef42a-279">Il database da usare.</span><span class="sxs-lookup"><span data-stu-id="ef42a-279">The database to work with.</span></span> <span data-ttu-id="ef42a-280">Questo valore corrisponde al nome del database impostato in precedenza in questa lezione.</span><span class="sxs-lookup"><span data-stu-id="ef42a-280">This value is the database name we set earlier in this lesson.</span></span>        |
    |<span data-ttu-id="ef42a-281">Nome raccolta</span><span class="sxs-lookup"><span data-stu-id="ef42a-281">Collection Name</span></span>     |  [!INCLUDE [cosmos-db-name](./cosmos-coll-name.md)]        | <span data-ttu-id="ef42a-282">Raccolta da cui si leggeranno i dati.</span><span class="sxs-lookup"><span data-stu-id="ef42a-282">The collection from which we'll read data.</span></span> <span data-ttu-id="ef42a-283">Questa impostazione è stata definita in precedenza nella lezione.</span><span class="sxs-lookup"><span data-stu-id="ef42a-283">This setting was defined earlier in the lesson.</span></span> |
    |<span data-ttu-id="ef42a-284">Query SQL (facoltativa)</span><span class="sxs-lookup"><span data-stu-id="ef42a-284">SQL Query (optional)</span></span>    |   <span data-ttu-id="ef42a-285">lasciare vuoto</span><span class="sxs-lookup"><span data-stu-id="ef42a-285">leave blank</span></span>       |   <span data-ttu-id="ef42a-286">Si sta recuperando un solo documento alla volta in base all'ID.</span><span class="sxs-lookup"><span data-stu-id="ef42a-286">We are only retrieving one document at a time based on the ID.</span></span> <span data-ttu-id="ef42a-287">L'applicazione di filtri con il campo ID documento è quindi meglio che usare una query SQL in questa istanza.</span><span class="sxs-lookup"><span data-stu-id="ef42a-287">So, filtering with the Document ID field is a better than using a SQL Query in this instance.</span></span> <span data-ttu-id="ef42a-288">Sarebbe possibile creare una query SQL per restituire una voce (`SELECT * from b where b.ID = {id}`).</span><span class="sxs-lookup"><span data-stu-id="ef42a-288">We could craft a SQL Query to return one entry (`SELECT * from b where b.ID = {id}`).</span></span> <span data-ttu-id="ef42a-289">Tale query restituirebbe in effetti un documento, ma lo restituirebbe in una raccolta di documenti.</span><span class="sxs-lookup"><span data-stu-id="ef42a-289">That query would indeed return a document, but it would return it in a document collection.</span></span> <span data-ttu-id="ef42a-290">Il codice dovrebbe modificare una raccolta inutilmente.</span><span class="sxs-lookup"><span data-stu-id="ef42a-290">Our code would have to manipulate a collection unnecessarily.</span></span> <span data-ttu-id="ef42a-291">Usare l'approccio basato sulle query SQL quando si vuole ottenere più documenti.</span><span class="sxs-lookup"><span data-stu-id="ef42a-291">Use the SQL Query approach when you want to get multiple documents.</span></span>   |
    |<span data-ttu-id="ef42a-292">Chiave di partizione (facoltativa)</span><span class="sxs-lookup"><span data-stu-id="ef42a-292">Partition key (optional)</span></span>     |   <span data-ttu-id="ef42a-293">lasciare vuoto</span><span class="sxs-lookup"><span data-stu-id="ef42a-293">leave blank</span></span>      |  <span data-ttu-id="ef42a-294">È possibile accettare l'impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="ef42a-294">We can accept the default here.</span></span>       |
    
9. <span data-ttu-id="ef42a-295">Per salvare tutte le modifiche apportate a questa configurazione di associazione, selezionare **Salva**.</span><span class="sxs-lookup"><span data-stu-id="ef42a-295">Select **Save** to save all changes to this binding configuration.</span></span> 

<span data-ttu-id="ef42a-296">Ora che l'associazione è stata definita, è possibile usarla nella funzione.</span><span class="sxs-lookup"><span data-stu-id="ef42a-296">Now that you have your binding defined, it's time to use it in your function.</span></span>

## <a name="update-function-implementation"></a><span data-ttu-id="ef42a-297">Aggiornare l'implementazione della funzione</span><span class="sxs-lookup"><span data-stu-id="ef42a-297">Update function implementation</span></span>

1. <span data-ttu-id="ef42a-298">Seleziona la tua funzione, [!INCLUDE [func-name-find](./func-name-find.md)], per aprire *index.js* nell'editor di codice.</span><span class="sxs-lookup"><span data-stu-id="ef42a-298">Select your function, [!INCLUDE [func-name-find](./func-name-find.md)], to open *index.js* in the code editor.</span></span> <span data-ttu-id="ef42a-299">Poiché è stata aggiunta un'associazione di input per leggere dal database, ora si aggiornerà la logica per usare questa associazione.</span><span class="sxs-lookup"><span data-stu-id="ef42a-299">You've added an input binding to read from your database, so update the logic to use this binding.</span></span>

2. <span data-ttu-id="ef42a-300">Sostituire tutto il codice in *index.js* con il codice del frammento di seguito e fare clic su **Salva**.</span><span class="sxs-lookup"><span data-stu-id="ef42a-300">Replace all code in *index.js* with the code from the following snippet and hit **Save**.</span></span>

   [!code-javascript[](../code/find-bookmark-single.js)]

<span data-ttu-id="ef42a-301">Una richiesta HTTP in ingresso attiva la funzione e il passaggio di un parametro di query `id` all'associazione di input di Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="ef42a-301">An incoming HTTP request triggers the function, and an `id` query parameter is passed to the Cosmos DB input binding.</span></span> <span data-ttu-id="ef42a-302">Se nel database viene trovato un documento corrispondente a questo ID, il parametro `bookmark` verrà impostato sul documento trovato.</span><span class="sxs-lookup"><span data-stu-id="ef42a-302">If the database finds a document that matches this ID, then the `bookmark` parameter will be set to the located document.</span></span> <span data-ttu-id="ef42a-303">In tal caso, viene creata una risposta che contiene il valore dell'URL trovato nel documento con segnalibro.</span><span class="sxs-lookup"><span data-stu-id="ef42a-303">In that case, we construct a response that contains the URL value found in the bookmarked document.</span></span> <span data-ttu-id="ef42a-304">Se non sono stati trovati documenti corrispondenti a questa chiave, si risponde con un payload e un codice di stato che comunica all'utente la cattiva notizia.</span><span class="sxs-lookup"><span data-stu-id="ef42a-304">If no document is found matching this key, we would respond with a payload and status code that tells the user the bad news.</span></span>

## <a name="try-it-out"></a><span data-ttu-id="ef42a-305">Provare questa operazione</span><span class="sxs-lookup"><span data-stu-id="ef42a-305">Try it out</span></span>

1. <span data-ttu-id="ef42a-306">Selezionare **Recupera URL della funzione** in alto a destra, selezionare **predefinita (Tasto funzione)**, quindi selezionare **Copia** per copiare l'URL della funzione.</span><span class="sxs-lookup"><span data-stu-id="ef42a-306">Select **Get function URL** at the top right, select **default (Function key)**, and then select **Copy** to copy the function's URL.</span></span>

2. <span data-ttu-id="ef42a-307">Incollare l'URL della funzione copiato nella barra degli indirizzi del browser.</span><span class="sxs-lookup"><span data-stu-id="ef42a-307">Paste the function URL you copied into your browser's address bar.</span></span> <span data-ttu-id="ef42a-308">Aggiungere il valore della stringa di query `&id=docs` alla fine dell'URL e premere il tasto `Enter` per eseguire la richiesta.</span><span class="sxs-lookup"><span data-stu-id="ef42a-308">Add the query string value `&id=docs` to the end of this URL and press the `Enter` key on your keyboard to execute the request.</span></span> <span data-ttu-id="ef42a-309">Verrà visualizzata una risposta che include un URL per tale risorsa.</span><span class="sxs-lookup"><span data-stu-id="ef42a-309">You should see a response that includes a URL to that resource.</span></span>

3. <span data-ttu-id="ef42a-310">Sostituire `&id=docs` con `&id=missing` e osservare la risposta.</span><span class="sxs-lookup"><span data-stu-id="ef42a-310">Replace `&id=docs` with `&id=missing`, and observe the response.</span></span>

4. <span data-ttu-id="ef42a-311">Sostituire la stringa di query precedente con `&id=` e osservare la risposta.</span><span class="sxs-lookup"><span data-stu-id="ef42a-311">Replace the previous query string with `&id=`, and observe the response.</span></span>

    >[!TIP]
    ><span data-ttu-id="ef42a-312">È anche possibile testare la funzione usando la scheda **Test** nell'interfaccia utente del portale della funzione.</span><span class="sxs-lookup"><span data-stu-id="ef42a-312">You can also test the function using the **Test** tab in the function portal UI.</span></span> <span data-ttu-id="ef42a-313">È possibile aggiungere un parametro di query o fornire un corpo della richiesta per ottenere gli stessi risultati descritti nei passaggi precedenti.</span><span class="sxs-lookup"><span data-stu-id="ef42a-313">You can add a query parameter or supply a request body to get the same results as described in the preceding steps.</span></span>
    
<span data-ttu-id="ef42a-314">In questa unità è stata creata manualmente la prima associazione di input per leggere da un database Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="ef42a-314">In this unit, we created our first input binding manually to read from an Azure Cosmos DB database.</span></span> <span data-ttu-id="ef42a-315">Grazie alle associazioni, la quantità di codice scritto per eseguire una ricerca nel database e leggere i dati è stata minima.</span><span class="sxs-lookup"><span data-stu-id="ef42a-315">The amount of code we wrote to search our database and read data was minimal, thanks to bindings.</span></span> <span data-ttu-id="ef42a-316">La maggior parte del lavoro è stato finalizzato alla configurazione dichiarativa dell'associazione, mentre la piattaforma ha eseguito le altre operazioni.</span><span class="sxs-lookup"><span data-stu-id="ef42a-316">We did most of our work configuring the binding declaratively, and the platform took care of the rest.</span></span>  

<span data-ttu-id="ef42a-317">Nell'unità successiva si aggiungeranno altri dati alla raccolta di segnalibri tramite un'associazione di output di Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="ef42a-317">In the next unit, we'll add more data to our bookmark collection through an Azure Cosmos DB output binding.</span></span>