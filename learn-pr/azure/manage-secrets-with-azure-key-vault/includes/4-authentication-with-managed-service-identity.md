<span data-ttu-id="027f9-101">Per l'autenticazione degli utenti e delle applicazioni che tentano di accedere a un insieme di credenziali, Azure Key Vault usa **Azure Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="027f9-101">Azure Key Vault uses **Azure Active Directory** to authenticate users and applications that try to access a vault.</span></span> <span data-ttu-id="027f9-102">Per concedere l'accesso delle applicazioni web all'insieme di credenziali, è necessario innanzitutto registrare l'app con Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="027f9-102">To grant our web application access to the vault, we first need to register our app with Azure Active Directory.</span></span> <span data-ttu-id="027f9-103">La registrazione consente di creare un'identità per l'app.</span><span class="sxs-lookup"><span data-stu-id="027f9-103">Registering creates an identity for the app.</span></span> <span data-ttu-id="027f9-104">Dopo aver ottenuto un'identità, è possibile assegnare le autorizzazioni dell'insieme di credenziali.</span><span class="sxs-lookup"><span data-stu-id="027f9-104">Once we have an identity, we can assign vault permissions to it.</span></span>

<span data-ttu-id="027f9-105">Le app e gli utenti eseguono l'autenticazione a Key Vault usando un token di autenticazione di Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="027f9-105">Apps and users authenticate to Key Vault using an Azure Active Directory authentication token.</span></span> <span data-ttu-id="027f9-106">Ottenere un token da Azure Active Directory implica la richiesta di un segreto o certificato, perché tutti gli utenti con un token usano l'identità dell'applicazione per accedere a tutti i segreti nell'insieme di credenziali.</span><span class="sxs-lookup"><span data-stu-id="027f9-106">Getting a token from Azure Active Directory requires a secret or certificate, because anyone with a token could use the application identity to access all of the secrets in the vault.</span></span>

<span data-ttu-id="027f9-107">I segreti dell'applicazione sono protetti nell'insieme di credenziali, ma è comunque necessario mantenere un segreto o un certificato all'esterno dell'insieme di credenziali per potervi accedere.</span><span class="sxs-lookup"><span data-stu-id="027f9-107">Our application secrets are secure in the vault, but we still need to keep a secret or certificate outside of the vault in order to access them!</span></span> <span data-ttu-id="027f9-108">Questo problema viene definito  *problema di bootstrap*, ma Azure offre una soluzione.</span><span class="sxs-lookup"><span data-stu-id="027f9-108">This problem is called the *bootstrapping problem*, and Azure has a solution for it.</span></span>

## <a name="managed-service-identity"></a><span data-ttu-id="027f9-109">Identità del servizio gestito</span><span class="sxs-lookup"><span data-stu-id="027f9-109">Managed Service Identity</span></span>

<span data-ttu-id="027f9-110">*L'identità del servizio gestito* (MSI) è una funzionalità del servizio app di Azure che l'app può usare per accedere a Key Vault e altri servizi di Azure senza dover gestire alcun segreto.</span><span class="sxs-lookup"><span data-stu-id="027f9-110">*Managed Service Identity* (MSI) is a feature of Azure App Service that your app can use to access Key Vault and other Azure services without having to manage even a single secret.</span></span> <span data-ttu-id="027f9-111">L'uso dell'identità del servizio gestito è più semplice e più sicuro rispetto alla gestione di un segreto.</span><span class="sxs-lookup"><span data-stu-id="027f9-111">Using MSI is simpler and more secure than managing a secret yourself.</span></span>

<span data-ttu-id="027f9-112">Quando si abilita l'identità del servizio gestito, Azure abilita un servizio REST separato per la concessione di token che l'app può usare.</span><span class="sxs-lookup"><span data-stu-id="027f9-112">When you enable MSI, Azure activates a separate token-granting REST service specifically for use by your app.</span></span> <span data-ttu-id="027f9-113">Quando l'app richiede un token dal servizio token dell'identità del servizio gestito, il servizio contatta Azure Active Directory per ottenere un token per l'identità del servizio gestito e lo passa nuovamente all'app per l'uso con Key Vault.</span><span class="sxs-lookup"><span data-stu-id="027f9-113">When your app requests a token from the MSI token service, the service contacts Azure Active Directory to get a token for the MSI identity and hands it back to your app for use with Key Vault.</span></span> <span data-ttu-id="027f9-114">La parte più importante di questo flusso di lavoro è il modo in cui l'app esegue l'autenticazione al servizio token dell'identità del servizio gestito &mdash; anziché richiedere un segreto o un certificato per la gestione della configurazione, l'app usa un segreto che Azure inserisce in modo sicuro nelle relative variabili dell'ambiente al momento dell'avvio.</span><span class="sxs-lookup"><span data-stu-id="027f9-114">The most important part of this workflow is the way that your app authenticates to the MSI token service &mdash; instead of requiring a secret or certificate you need to manage in your configuration, your app uses a secret that Azure securely injects into its environment variables when it starts up.</span></span> <span data-ttu-id="027f9-115">Non è necessario gestire o archiviare il valore di questo segreto.</span><span class="sxs-lookup"><span data-stu-id="027f9-115">You don't need to manage or store this secret value anywhere.</span></span> <span data-ttu-id="027f9-116">Nulla al di fuori dell'app può accedere a questo segreto o all'endpoint del servizio token dell'identità del servizio gestito.</span><span class="sxs-lookup"><span data-stu-id="027f9-116">Nothing outside of your app can access this secret or the MSI token service endpoint.</span></span>

<span data-ttu-id="027f9-117">L'identità del servizio gestito registra l'app in Azure Active Directory ed elimina la registrazione se si disabilita l'identità o si elimina l'app.</span><span class="sxs-lookup"><span data-stu-id="027f9-117">MSI also registers your app in Azure Active Directory for you, and will delete the registration if you disable MSI or delete the app.</span></span>

<span data-ttu-id="027f9-118">L'identità del servizio gestito è disponibile in tutte le edizioni di Azure Active Directory, inclusa la versione gratuita fornita con la sottoscrizione ad Azure.</span><span class="sxs-lookup"><span data-stu-id="027f9-118">MSI is available in all editions of Azure Active Directory, including the Free edition included with an Azure subscription.</span></span> <span data-ttu-id="027f9-119">Il relativo uso in Servizio app non ha costi aggiuntivi, non richiede alcuna configurazione e può essere abilitato o disabilitato in un'app in qualsiasi momento.</span><span class="sxs-lookup"><span data-stu-id="027f9-119">Using it in App Service has no extra cost and requires no configuration, and it can be enabled or disabled on an app at any time.</span></span>

> [!NOTE]
> <span data-ttu-id="027f9-120">L'identità del servizio gestito non è attualmente supportata per le app web Linux o Contenitore.</span><span class="sxs-lookup"><span data-stu-id="027f9-120">MSI is not currently supported for Linux or Container web apps.</span></span>

<span data-ttu-id="027f9-121">Per abilitare l'identità del servizio gestito è necessario solo un singolo comando dell'interfaccia della riga di comando di Azure senza alcuna configurazione.</span><span class="sxs-lookup"><span data-stu-id="027f9-121">Enabling MSI requires only a single Azure CLI command with no configuration.</span></span> <span data-ttu-id="027f9-122">Questo argomento verrà trattato nell'unità 5 durante la configurazione di un'app di Servizio app e la relativa distribuzione in Azure.</span><span class="sxs-lookup"><span data-stu-id="027f9-122">We'll do it in unit 5 when we set up an App Service app and deploy to Azure.</span></span> <span data-ttu-id="027f9-123">Prima però sarà necessario applicare le conoscenze relative all'identità del servizio gestito per scrivere il codice per l'app.</span><span class="sxs-lookup"><span data-stu-id="027f9-123">Before that, though, we're going to apply our knowledge of MSI to write the code for our app.</span></span>