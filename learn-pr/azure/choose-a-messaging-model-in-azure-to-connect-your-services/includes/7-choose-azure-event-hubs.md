<span data-ttu-id="6b14f-101">Esistono alcune applicazioni che generano un enorme numero di eventi da quasi altrettante origini.</span><span class="sxs-lookup"><span data-stu-id="6b14f-101">There are certain applications that produce a massive number of events from almost as many sources.</span></span> <span data-ttu-id="6b14f-102">Spesso viene usato il termine "Big Data" per fare riferimento a queste situazioni, che richiedono un'infrastruttura speciale per gestirle.</span><span class="sxs-lookup"><span data-stu-id="6b14f-102">We often hear the term "Big Data" applied to these situations and they require unique infrastructure to handle them.</span></span>

<span data-ttu-id="6b14f-103">Si supponga di lavorare per Contoso Aircraft Engines.</span><span class="sxs-lookup"><span data-stu-id="6b14f-103">Imagine you work for Contoso Aircraft Engines.</span></span> <span data-ttu-id="6b14f-104">I motori prodotti dall'azienda includono centinaia di sensori.</span><span class="sxs-lookup"><span data-stu-id="6b14f-104">The engines your employer manufactures have hundreds of sensors.</span></span> <span data-ttu-id="6b14f-105">Prima che un aereo possa essere operativo ogni giorno, i motori vengono connessi a un test harness e collaudati.</span><span class="sxs-lookup"><span data-stu-id="6b14f-105">Before an aircraft can be flown each morning, its engines are connected to a test harness and put through their paces.</span></span> <span data-ttu-id="6b14f-106">Inoltre, i dati di volo memorizzati nella cache vengono trasmessi quando l'aereo viene connesso alla strumentazione di terra.</span><span class="sxs-lookup"><span data-stu-id="6b14f-106">Additionally, cached in-flight data is streamed when the aircraft is connected to ground equipment.</span></span>

<span data-ttu-id="6b14f-107">È necessario usare i dati cronologici dei sensori per individuare modelli nelle letture dei sensori che indichino un potenziale malfunzionamento del motore a breve termine.</span><span class="sxs-lookup"><span data-stu-id="6b14f-107">You want to use historic sensor data to find patterns in the sensor readings that indicate engine failure is likely to happen soon.</span></span> <span data-ttu-id="6b14f-108">Si vuole che le letture dei sensori in tempo reale vengano confrontate con questi modelli di errore.</span><span class="sxs-lookup"><span data-stu-id="6b14f-108">You want the real-time sensor readings to be compared against these failure patterns.</span></span> <span data-ttu-id="6b14f-109">È quindi possibile avvisare gli utenti quasi in tempo reale se un motore presenta letture preoccupanti.</span><span class="sxs-lookup"><span data-stu-id="6b14f-109">You can then warn users in near real time if an engine is showing worrisome readings.</span></span>

## <a name="what-is-azure-event-hubs"></a><span data-ttu-id="6b14f-110">Che cos'è l'hub eventi di Azure</span><span class="sxs-lookup"><span data-stu-id="6b14f-110">What is Azure Event Hubs</span></span>

<span data-ttu-id="6b14f-111">Un hub eventi di Azure è un intermediario per il modello di comunicazione basato su pubblicazione-sottoscrizione, ma a differenza di Griglia di eventi è ottimizzato per velocità effettive molto elevate, un numero elevato di origini di pubblicazione, la sicurezza e la resilienza.</span><span class="sxs-lookup"><span data-stu-id="6b14f-111">Azure Event Hub is an intermediary for the publish-subscribe communication pattern, but unlike Event Grid it is optimized for extremely high throughput, a large number of publishers, security, and resiliency.</span></span>

<span data-ttu-id="6b14f-112">Mentre Griglia di eventi si integra più o meno perfettamente nel modello di pubblicazione-sottoscrizione semplicemente perché gestisce le sottoscrizioni e indirizza le comunicazioni ai sottoscrittori, hub eventi consente di eseguire alcuni servizi aggiuntivi che in un certo modo lo rendono più simile a un bus di servizio o a una coda di messaggi, piuttosto che a un semplice strumento di trasmissione di eventi.</span><span class="sxs-lookup"><span data-stu-id="6b14f-112">Whereas Event Grid fits more or less perfectly into the publish-subscribe pattern in that it simply manages subscriptions and routes communications to those subscribers, Event Hub performs quite a few additional services that in some ways make it resemble a service bus or message queue more than a simple event broadcaster.</span></span>

#### <a name="partitions"></a><span data-ttu-id="6b14f-113">Partitions</span><span class="sxs-lookup"><span data-stu-id="6b14f-113">Partitions</span></span> ####
<span data-ttu-id="6b14f-114">Quando l'hub eventi riceve le comunicazioni, le divide in partizioni.</span><span class="sxs-lookup"><span data-stu-id="6b14f-114">As Event Hub receives communications it divides them into partitions.</span></span> <span data-ttu-id="6b14f-115">Le partizioni sono buffer in cui vengono salvate le comunicazioni.</span><span class="sxs-lookup"><span data-stu-id="6b14f-115">Partitions are buffers into which the communications are saved.</span></span> <span data-ttu-id="6b14f-116">Considerati i buffer, gli eventi non sono completamente temporanei e un evento non viene perso solo perché un sottoscrittore è occupato o anche non online.</span><span class="sxs-lookup"><span data-stu-id="6b14f-116">Because of the event buffers, events are not completely ephemeral and an event isn't missed just because a subscriber is busy or even offline.</span></span> <span data-ttu-id="6b14f-117">Il sottoscrittore può sempre usare il buffer per mettersi al passo.</span><span class="sxs-lookup"><span data-stu-id="6b14f-117">The subscriber can always use the buffer to "catch up".</span></span> <span data-ttu-id="6b14f-118">Per impostazione predefinita gli eventi rimangono nel buffer 24 ore prima di scadere automaticamente.</span><span class="sxs-lookup"><span data-stu-id="6b14f-118">By default events stay in the buffer for 24 hours then automatically expire.</span></span>

<span data-ttu-id="6b14f-119">I buffer sono chiamati partizioni perché i dati vengono divisi tra di loro.</span><span class="sxs-lookup"><span data-stu-id="6b14f-119">The buffers are called partitions because the data is divided amongst them.</span></span> <span data-ttu-id="6b14f-120">Ogni hub eventi ha almeno due partizioni e ogni partizione ha un set separato di sottoscrittori.</span><span class="sxs-lookup"><span data-stu-id="6b14f-120">Every Event Hub has at least two partitions, and each partition has a separate set of subscribers.</span></span>

#### <a name="capture"></a><span data-ttu-id="6b14f-121">Acquisizione</span><span class="sxs-lookup"><span data-stu-id="6b14f-121">Capture</span></span> ####
<span data-ttu-id="6b14f-122">Un hub eventi può inviare tutti gli eventi immediatamente ad Azure Data Lake o ad Archiviazione BLOB, come soluzioni economiche di archiviazione permanente.</span><span class="sxs-lookup"><span data-stu-id="6b14f-122">Event Hub can send all your events immediately to Azure Data Lake or Blob Storage for inexpensive permanent persistence.</span></span>

#### <a name="authentication"></a><span data-ttu-id="6b14f-123">Authentication</span><span class="sxs-lookup"><span data-stu-id="6b14f-123">Authentication</span></span> ####
<span data-ttu-id="6b14f-124">Tutte le origini di pubblicazione vengono autenticate e ricevono un token.</span><span class="sxs-lookup"><span data-stu-id="6b14f-124">All publishers are authenticated and issued a token.</span></span> <span data-ttu-id="6b14f-125">Questo significa che l'hub eventi può accettare eventi da dispositivi esterni e app per dispositivi mobili senza preoccuparsi che dati illeciti possano compromettere l'analisi.</span><span class="sxs-lookup"><span data-stu-id="6b14f-125">This means Event Hub can accept events from external devices and mobile apps without worrying that fraudulent data from pranksters could ruin our analysis.</span></span> 

## <a name="using-azure-event-hub"></a><span data-ttu-id="6b14f-126">Uso dell'hub eventi di Azure</span><span class="sxs-lookup"><span data-stu-id="6b14f-126">Using Azure Event Hub</span></span>

<span data-ttu-id="6b14f-127">L'hub eventi include il supporto per l'invio di pipeline di flussi di eventi ad altri servizi di Azure.</span><span class="sxs-lookup"><span data-stu-id="6b14f-127">Event Hubs has support for pipelining event streams to other Azure services.</span></span> <span data-ttu-id="6b14f-128">È possibile usarlo con Analisi di flusso, ad esempio, per eseguire analisi complesse dei dati quasi in tempo reale con la possibilità di correlare più eventi e di individuare modelli.</span><span class="sxs-lookup"><span data-stu-id="6b14f-128">Using it with Stream Analytics for instance allows complex analysis of data in near real time with the ability to correlate multiple events and look for patterns.</span></span> <span data-ttu-id="6b14f-129">In questo scenario, Analisi di flusso sarebbe considerato un sottoscrittore.</span><span class="sxs-lookup"><span data-stu-id="6b14f-129">In this case, Stream Analytics would be considered a subscriber.</span></span>

<span data-ttu-id="6b14f-130">Per l'esempio dei motori degli aerei, l'architettura verrà configurata in modo che l'hub eventi esegua l'autenticazione delle comunicazioni dai motori.</span><span class="sxs-lookup"><span data-stu-id="6b14f-130">For our aircraft engines, we'll set up our architecture so that Event Hubs will authenticate the communications from our engines.</span></span> <span data-ttu-id="6b14f-131">Verrà quindi impostato l'uso di Capture per salvare tutti i dati in Azure Data Lake e in un secondo momento sarà possibile usare tutti i dati per ripetere il training e migliorare i modelli di machine learning.</span><span class="sxs-lookup"><span data-stu-id="6b14f-131">We will then have it use Capture to save all the data to Azure Data Lake, later we can use all that data to retrain and improve our machine learning models.</span></span> <span data-ttu-id="6b14f-132">Infine, i flussi di eventi verranno prelevati da sottoscrittori di Analisi di flusso di Azure.</span><span class="sxs-lookup"><span data-stu-id="6b14f-132">Finally, our event streams will be picked up by Azure Stream Analytics subscribers.</span></span> <span data-ttu-id="6b14f-133">Analisi di flusso userà il modello di machine learning per individuare modelli nei dati dei sensori che potrebbero indicare un problema.</span><span class="sxs-lookup"><span data-stu-id="6b14f-133">Stream Analytics will use our machine learning model to look for patterns in the sensor data that might indicate problems.</span></span>

<span data-ttu-id="6b14f-134">Dato che sono disponibili varie partizioni e che ogni motore invia tutti i relativi dati a una sola partizione, ogni istanza del sottoscrittore di Analisi di flusso deve gestire solo un subset dei dati complessivi, invece di dover eseguire operazioni di filtro e correlazione su tutti.</span><span class="sxs-lookup"><span data-stu-id="6b14f-134">Because we have several partitions, and each engine sends all its data to only one partition each instance of our Stream Analytics subscriber only need deal with a subset of our overall data instead of filtering and correlating over all of it.</span></span>

## <a name="choose-event-grid-or-event-hub"></a><span data-ttu-id="6b14f-135">Scegliere Griglia di eventi o l'hub eventi</span><span class="sxs-lookup"><span data-stu-id="6b14f-135">Choose Event Grid or Event Hub</span></span>

<span data-ttu-id="6b14f-136">Entrambi supportano la semantica *At-Least-Once*.</span><span class="sxs-lookup"><span data-stu-id="6b14f-136">Both support *At Least Once* semantics.</span></span>

<span data-ttu-id="6b14f-137">Se è necessaria una semplice infrastruttura di pubblicazione-sottoscrizione degli eventi con origini di pubblicazione attendibili (ad esempio il proprio server Web), è consigliabile scegliere Griglia di eventi di Azure.</span><span class="sxs-lookup"><span data-stu-id="6b14f-137">If you need a simple event publish-subscribe infrastructure with trusted publishers (for instance your own web server), you should choose Azure Event Grid.</span></span>

### <a name="consider-event-hub-if"></a><span data-ttu-id="6b14f-138">Prendere in considerazione l'hub eventi se:</span><span class="sxs-lookup"><span data-stu-id="6b14f-138">Consider Event Hub if</span></span>
* <span data-ttu-id="6b14f-139">È necessario supportare l'autenticazione di un numero elevato di origini di pubblicazione</span><span class="sxs-lookup"><span data-stu-id="6b14f-139">You need to support authenticating a large number of publishers</span></span>
* <span data-ttu-id="6b14f-140">È necessario salvare un flusso di eventi in Azure Data Lake o in Archiviazione BLOB</span><span class="sxs-lookup"><span data-stu-id="6b14f-140">You need to save a stream of events to Azure Data Lake or Blob Storage</span></span>
* <span data-ttu-id="6b14f-141">È necessario eseguire operazioni di aggregazione o analisi sul flusso di eventi</span><span class="sxs-lookup"><span data-stu-id="6b14f-141">You need aggregation or analytics on your event stream</span></span>
* <span data-ttu-id="6b14f-142">Sono necessarie funzionalità di messaggistica affidabili o resilienza</span><span class="sxs-lookup"><span data-stu-id="6b14f-142">You need reliable messaging or resiliency</span></span> 