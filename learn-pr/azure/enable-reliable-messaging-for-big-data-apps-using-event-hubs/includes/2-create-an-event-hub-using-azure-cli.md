<span data-ttu-id="9fa13-101">Il team ha deciso di sfruttare le funzionalità di Hub eventi di Azure per gestire ed elaborare i crescenti volumi di transazioni gestiti dal sistema.</span><span class="sxs-lookup"><span data-stu-id="9fa13-101">Your team has decided to leverage the capabilities of the Azure Event Hubs to manage and process the increasing transaction volumes coming through your system.</span></span>

<span data-ttu-id="9fa13-102">Un hub eventi è una risorsa di Azure, quindi il primo passaggio consiste nel creare un nuovo hub in Azure e configurarlo per soddisfare gli specifici requisiti delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="9fa13-102">An event hub is an Azure resource, so your first step is to create a new hub in Azure and configure it to meet the specific requirements of your applications.</span></span>

## <a name="what-is-an-azure-event-hub"></a><span data-ttu-id="9fa13-103">Che cos'è un hub eventi di Azure?</span><span class="sxs-lookup"><span data-stu-id="9fa13-103">What is an Azure event hub?</span></span>

<span data-ttu-id="9fa13-104">Hub eventi di Azure è un servizio di elaborazione di eventi basato sul cloud, in grado di ricevere ed elaborare milioni di eventi al secondo.</span><span class="sxs-lookup"><span data-stu-id="9fa13-104">Azure Event Hubs is a cloud-based, event-processing service that's capable of receiving and processing millions of events per second.</span></span> <span data-ttu-id="9fa13-105">Hub eventi opera come una porta principale per una pipeline di eventi, poiché riceve i dati in ingresso e li archivia finché non sono disponibili le risorse di elaborazione.</span><span class="sxs-lookup"><span data-stu-id="9fa13-105">Event Hubs acts as a front door for an event pipeline, where it receives incoming data and stores it until processing resources are available.</span></span>

<span data-ttu-id="9fa13-106">Un'entità che invia dati a Hub eventi è denominata *autore*, mentre un'entità che legge i dati da Hub eventi è denominata *consumer* o *sottoscrittore*.</span><span class="sxs-lookup"><span data-stu-id="9fa13-106">An entity that sends data to the Event Hubs is called a *publisher* and an entity that reads data from the Event Hubs is called a *consumer* or a *subscriber*.</span></span> <span data-ttu-id="9fa13-107">Hub eventi di Azure è posizionato tra queste due entità per suddividere la produzione (dall'autore) e l'uso (verso il sottoscrittore) di un flusso di eventi.</span><span class="sxs-lookup"><span data-stu-id="9fa13-107">Azure Event Hubs sits between these two entities to divide the production (from publisher) and consumption (to subscriber) of an event stream.</span></span> <span data-ttu-id="9fa13-108">Questa separazione consente di gestire scenari in cui il tasso di produzione di eventi è notevolmente superiore al consumo.</span><span class="sxs-lookup"><span data-stu-id="9fa13-108">This decoupling helps to manage scenarios where the rate of event production is much higher than the consumption.</span></span> <span data-ttu-id="9fa13-109">L'illustrazione seguente mostra il ruolo di un hub eventi.</span><span class="sxs-lookup"><span data-stu-id="9fa13-109">The following illustration shows the role of an event hub.</span></span>

![Illustrazione che mostra un hub eventi di Azure posizionato tra quattro server di pubblicazione e due sottoscrittori.](../media-draft/2-event-hub-overview.png)

### <a name="events"></a><span data-ttu-id="9fa13-112">Eventi</span><span class="sxs-lookup"><span data-stu-id="9fa13-112">Events</span></span>

<span data-ttu-id="9fa13-113">Un **evento** è un pacchetto di piccole dimensioni che contiene una notifica di una modifica, senza tutti i dettagli sull'elemento che è stato modificato.</span><span class="sxs-lookup"><span data-stu-id="9fa13-113">An **event** is a small packet that contains a notification of a change and not the details of what exactly has changed.</span></span> <span data-ttu-id="9fa13-114">È possibile configurare un'applicazione consumer per avviare una query allo scopo di ottenere i dettagli, ma questo non è un requisito e Hub eventi non gestisce questa operazione.</span><span class="sxs-lookup"><span data-stu-id="9fa13-114">You can't configure a consumer application to initiate some form of query to find out the details, but this isn't a requirement and Event Hubs doesn't handle this.</span></span> <span data-ttu-id="9fa13-115">Gli eventi possono essere pubblicati singolarmente o in batch, ma una pubblicazione (singola o in batch) non può superare i 256 KB.</span><span class="sxs-lookup"><span data-stu-id="9fa13-115">Events can be published individually, or in batches, but a single publication (individual or batch) can't exceed 256 KB.</span></span>

<span data-ttu-id="9fa13-116">Al contrario, nell'accodamento dei messaggi (nel bus di servizio di Azure) il **messaggio** contiene sia i dati che l'evento e l'autore del messaggio si aspetta che il consumer elabori il messaggio in un modo specifico.</span><span class="sxs-lookup"><span data-stu-id="9fa13-116">On the contrary, in message queuing (in Azure Service Bus), the **message** contains data and the event, and the publisher of the message expects the consumer to process the message in a particular way.</span></span>

### <a name="publishers-and-subscribers"></a><span data-ttu-id="9fa13-117">Autori e sottoscrittori</span><span class="sxs-lookup"><span data-stu-id="9fa13-117">Publishers and subscribers</span></span>

<span data-ttu-id="9fa13-118">Un autore di eventi è qualsiasi applicazione o dispositivo che può inviare dati di eventi tramite HTTPS o Advance Message Queueing Protocol (AMQP) 1.0.</span><span class="sxs-lookup"><span data-stu-id="9fa13-118">Event publishers are any application or device that can send out event data using either HTTPS or Advanced Message Queuing Protocol (AQMP) 1.0.</span></span> 

<span data-ttu-id="9fa13-119">Per gli autori che inviano dati di frequente, AMQP offre le migliori prestazioni.</span><span class="sxs-lookup"><span data-stu-id="9fa13-119">For publishers that send data frequently, AMQP has the better performance.</span></span> <span data-ttu-id="9fa13-120">Tuttavia, presenta un maggiore sovraccarico iniziale per le sessioni, perché è prima necessario configurare un socket bidirezionale persistente e TLS (Transport Layer Security) o SSL/TLS.</span><span class="sxs-lookup"><span data-stu-id="9fa13-120">However, it has a higher initial session overhead, because a persistent bidirectional socket and transport level security (TLS) or SSL/TLS has to be set up first.</span></span> 

<span data-ttu-id="9fa13-121">Per una pubblicazione più intermittente, è preferibile HTTPS.</span><span class="sxs-lookup"><span data-stu-id="9fa13-121">For more intermittent publishing, HTTPS is the better option.</span></span> <span data-ttu-id="9fa13-122">Anche se HTTPS richiede un sovraccarico SSL aggiuntivo per ogni richiesta, non presenta il sovraccarico di inizializzazione della sessione.</span><span class="sxs-lookup"><span data-stu-id="9fa13-122">Though HTTPS requires additional SSL overhead for every request, there isn’t the session initialization overhead.</span></span>

> [!NOTE] 
> <span data-ttu-id="9fa13-123">Anche le applicazioni esistenti basate su Kafka, che usano client Apache Kafka 1.0 e versioni successive, possono operare come autori per Hub eventi.</span><span class="sxs-lookup"><span data-stu-id="9fa13-123">Existing Kafka-based applications, using Apache Kafka 1.0 and newer client versions, can also act as Event Hubs publishers.</span></span>

<span data-ttu-id="9fa13-124">I sottoscrittori di eventi sono applicazioni che usano uno dei due metodi supportati a livello di programmazione per ricevere ed elaborare gli eventi da un hub eventi.</span><span class="sxs-lookup"><span data-stu-id="9fa13-124">Event subscribers are applications that use one of two supported programmatic methods to receive and process events from an event hub.</span></span>

- <span data-ttu-id="9fa13-125">**EventHubReceiver**: un metodo semplice che include opzioni di gestione limitate.</span><span class="sxs-lookup"><span data-stu-id="9fa13-125">**EventHubReceiver** - A simple method that provides limited management options.</span></span>
- <span data-ttu-id="9fa13-126">**EventProcessorHost**: un metodo efficiente che verrà usato più avanti in questo modulo.</span><span class="sxs-lookup"><span data-stu-id="9fa13-126">**EventProcessorHost** - An efficient method that we’ll use later in this module.</span></span>

### <a name="consumer-groups"></a><span data-ttu-id="9fa13-127">Gruppi di consumer</span><span class="sxs-lookup"><span data-stu-id="9fa13-127">Consumer groups</span></span>

<span data-ttu-id="9fa13-128">Un **gruppo di consumer** di un hub eventi rappresenta una visualizzazione specifica di un flusso di dati dell'hub eventi.</span><span class="sxs-lookup"><span data-stu-id="9fa13-128">An event hub **consumer group** represents a specific view of an event hub data stream.</span></span> <span data-ttu-id="9fa13-129">Usando gruppi di consumer distinti, più applicazioni sottoscrittore possono elaborare un flusso di eventi in modo indipendente e senza influire sulle altre applicazioni.</span><span class="sxs-lookup"><span data-stu-id="9fa13-129">By using separate consumer groups, multiple subscriber applications can process an event stream independently, and without affecting other applications.</span></span> <span data-ttu-id="9fa13-130">Tuttavia, l'uso di più gruppi di consumer non è un requisito e per molte applicazioni il gruppo di consumer predefinito è sufficiente.</span><span class="sxs-lookup"><span data-stu-id="9fa13-130">However, the use of multiple consumer groups is not a requirement, and for many applications, the single default consumer group is sufficient.</span></span>

### <a name="pricing"></a><span data-ttu-id="9fa13-131">Prezzi</span><span class="sxs-lookup"><span data-stu-id="9fa13-131">Pricing</span></span>

<span data-ttu-id="9fa13-132">Sono disponibili tre piani tariffari per Hub eventi di Azure: Basic, Standard e Dedicato.</span><span class="sxs-lookup"><span data-stu-id="9fa13-132">There are three pricing tiers for Azure Event Hubs: Basic, Standard, and Dedicated.</span></span> <span data-ttu-id="9fa13-133">I livelli presentano differenze in termini di connessioni supportate, numero di gruppi di consumer disponibili e velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="9fa13-133">The tiers differ in terms of supported connections, number of available Consumer groups, and throughput.</span></span> <span data-ttu-id="9fa13-134">Quando si usa l'interfaccia della riga di comando di Azure per creare uno spazio dei nomi di Hub eventi, se non si specifica un piano tariffario, viene assegnato il valore predefinito **Standard** (20 gruppi di consumer, 1000 connessioni negoziate).</span><span class="sxs-lookup"><span data-stu-id="9fa13-134">When using Azure CLI to create an Event Hubs Namespace, if you don't specify a pricing tier, the default of **Standard** (20 Consumer groups, 1000 Brokered connections) is assigned.</span></span>

## <a name="creating-and-configuring-a-new-azure-event-hubs"></a><span data-ttu-id="9fa13-135">Creazione e configurazione di un nuovo hub eventi di Azure</span><span class="sxs-lookup"><span data-stu-id="9fa13-135">Creating and configuring a new Azure Event Hubs</span></span>

<span data-ttu-id="9fa13-136">La creazione e la configurazione di un nuovo hub eventi di Azure comprende due passaggi principali.</span><span class="sxs-lookup"><span data-stu-id="9fa13-136">There are two main steps when creating and configuring a new Azure Event Hubs.</span></span> <span data-ttu-id="9fa13-137">Il primo passaggio consiste nel definire lo **spazio dei nomi** di Hub eventi.</span><span class="sxs-lookup"><span data-stu-id="9fa13-137">The first step is to define an Event Hubs **namespace**.</span></span> <span data-ttu-id="9fa13-138">Il secondo passaggio consiste nel creare un hub eventi nello spazio dei nomi.</span><span class="sxs-lookup"><span data-stu-id="9fa13-138">The second step is to create an event hub in that namespace.</span></span>

### <a name="defining-an-event-hubs-namespace"></a><span data-ttu-id="9fa13-139">Definizione di uno spazio dei nomi di Hub eventi</span><span class="sxs-lookup"><span data-stu-id="9fa13-139">Defining an Event Hubs namespace</span></span>

<span data-ttu-id="9fa13-140">Uno spazio dei nomi di Hub eventi è un'entità contenitore per la gestione di uno o più hub eventi.</span><span class="sxs-lookup"><span data-stu-id="9fa13-140">An Event Hubs namespace is a containing entity for managing one or more Event Hubs.</span></span> 

<span data-ttu-id="9fa13-141">La creazione di uno spazio dei nomi di Hub eventi in genere comporta quanto segue:</span><span class="sxs-lookup"><span data-stu-id="9fa13-141">Creating an Event Hubs namespace typically involves the following:</span></span>

1. <span data-ttu-id="9fa13-142">Definizione delle impostazioni a livello di spazio dei nomi.</span><span class="sxs-lookup"><span data-stu-id="9fa13-142">Defining namespace-level settings.</span></span> <span data-ttu-id="9fa13-143">Alcune impostazioni, come la capacità dello spazio dei nomi (configurata tramite le **unità elaborate**), il piano tariffario e le metriche delle prestazioni, sono definite a livello di spazio dei nomi.</span><span class="sxs-lookup"><span data-stu-id="9fa13-143">Certain settings such as namespace capacity (configured using **throughput units**), pricing tier, and performance metrics are defined at the namespace level.</span></span> <span data-ttu-id="9fa13-144">Queste sono applicabili per tutti gli hub eventi nello spazio dei nomi.</span><span class="sxs-lookup"><span data-stu-id="9fa13-144">These are applicable for all the event hubs within that namespace.</span></span> <span data-ttu-id="9fa13-145">Se non si definiscono queste impostazioni, viene usato un valore predefinito: *1* per la capacità e *Standard* per il piano tariffario.</span><span class="sxs-lookup"><span data-stu-id="9fa13-145">If you don't define these settings, a default value is used: *1* for capacity and *Standard* for pricing tier.</span></span>

    <span data-ttu-id="9fa13-146">Una volta impostate le unità elaborate, non è possibile modificarle.</span><span class="sxs-lookup"><span data-stu-id="9fa13-146">You cannot change the throughput unit once you set it.</span></span> <span data-ttu-id="9fa13-147">È necessario bilanciare la configurazione rispetto alle aspettative per il budget di Azure.</span><span class="sxs-lookup"><span data-stu-id="9fa13-147">You must balance your configuration against your Azure budget expectations.</span></span> <span data-ttu-id="9fa13-148">È possibile valutare la configurazione di diversi hub eventi per differenti requisiti di velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="9fa13-148">You might consider configuring different event hubs for different throughput requirements.</span></span> <span data-ttu-id="9fa13-149">Ad esempio, se si dispone di un'applicazione per i dati di vendita e si prevede di usare due hub eventi (uno per la raccolta con una velocità effettiva elevata di informazioni di telemetria in tempo reale sui dati di vendita e uno per la raccolta dei log eventi con una minore frequenza), potrebbe essere utile usare uno spazio dei nomi distinto per ogni hub.</span><span class="sxs-lookup"><span data-stu-id="9fa13-149">For example, if you have a sales data application and you are planning for two Event Hubs, one for high throughput collection of real-time sales data telemetry and one for infrequent event log collection, it would make sense to use a separate namespace for each hub.</span></span> <span data-ttu-id="9fa13-150">In questo modo, è sufficiente configurare (ed effettuare il pagamento per) la capacità con velocità effettiva elevata nell'hub di telemetria.</span><span class="sxs-lookup"><span data-stu-id="9fa13-150">This way you only need to configure (and pay for) high throughput capacity on the telemetry hub.</span></span>

1. <span data-ttu-id="9fa13-151">Selezione di un nome univoco per lo spazio dei nomi.</span><span class="sxs-lookup"><span data-stu-id="9fa13-151">Selecting a unique name for the namespace.</span></span> <span data-ttu-id="9fa13-152">Lo spazio dei nomi è accessibile all'URL: *_spazio dei nomi_.servicebus.windows.net*</span><span class="sxs-lookup"><span data-stu-id="9fa13-152">The namespace is accessible through this url: *_namespace_.servicebus.windows.net*</span></span>

1. <span data-ttu-id="9fa13-153">Definizione delle proprietà facoltative seguenti:</span><span class="sxs-lookup"><span data-stu-id="9fa13-153">Defining the following optional properties:</span></span>

    - <span data-ttu-id="9fa13-154">Abilita Kafka.</span><span class="sxs-lookup"><span data-stu-id="9fa13-154">Enable Kafka.</span></span> <span data-ttu-id="9fa13-155">Questa opzione consente alle applicazioni Kafka di pubblicare eventi nell'hub eventi.</span><span class="sxs-lookup"><span data-stu-id="9fa13-155">This option enables Kafka applications to publish events to the event hub.</span></span>
    - <span data-ttu-id="9fa13-156">Imposta la ridondanza della zona per questo spazio dei nomi.</span><span class="sxs-lookup"><span data-stu-id="9fa13-156">Make this namespace zone redundant.</span></span> <span data-ttu-id="9fa13-157">La ridondanza della zona replica i dati tra data center distinti con infrastrutture di alimentazione, rete e raffreddamento indipendenti.</span><span class="sxs-lookup"><span data-stu-id="9fa13-157">Zone-redundancy replicates data across separate data centers with their own independent power, networking, and cooling infrastructures.</span></span>
    - <span data-ttu-id="9fa13-158">Abilita aumento automatico e Numero massimo di unità elaborate per l'aumento automatico.</span><span class="sxs-lookup"><span data-stu-id="9fa13-158">Enable Auto-Inflate, and Auto-Inflate Maximum Throughput Units.</span></span> <span data-ttu-id="9fa13-159">L'aumento automatico offre un'opzione per la scalabilità, aumentando il numero di unità elaborate fino a un valore massimo.</span><span class="sxs-lookup"><span data-stu-id="9fa13-159">Auto-Inflate provides an automatic scale-up option, by increasing the number of throughput units up to a maximum value.</span></span> <span data-ttu-id="9fa13-160">Questo è utile per evitare la limitazione delle richieste nelle situazioni in cui le velocità dei dati in ingresso o in uscita superano il numero di unità elaborate attualmente impostato.</span><span class="sxs-lookup"><span data-stu-id="9fa13-160">This is useful to avoid throttling in situations when incoming or outgoing data rates exceed the currently set number of throughput units.</span></span>

### <a name="azure-cli-commands-for-creating-an-event-hubs-namespace"></a><span data-ttu-id="9fa13-161">Comandi dell'interfaccia della riga di comando di Azure per la creazione di uno spazio dei nomi di Hub eventi</span><span class="sxs-lookup"><span data-stu-id="9fa13-161">Azure CLI commands for creating an Event Hubs namespace</span></span>

<span data-ttu-id="9fa13-162">Per creare un nuovo spazio dei nomi di Hub eventi, usare i comandi seguenti:</span><span class="sxs-lookup"><span data-stu-id="9fa13-162">To create a new Event Hubs namespace, you use the following commands:</span></span>

1. <span data-ttu-id="9fa13-163">Un gruppo di risorse di Azure è un contenitore con risorse di Azure correlate per facilitare la gestione.</span><span class="sxs-lookup"><span data-stu-id="9fa13-163">In Azure, a resource group is a container that holds related Azure resources for ease of management.</span></span> <span data-ttu-id="9fa13-164">Se necessario, creare un nuovo gruppo di risorse per l'hub eventi.</span><span class="sxs-lookup"><span data-stu-id="9fa13-164">If required, create a new resource group for your event hub.</span></span>

    ```azurecli
    az group create --name <resource group name> --location <location>
    ```

1. <span data-ttu-id="9fa13-165">Creare lo spazio dei nomi di Hub eventi con lo stesso gruppo di risorse e la stessa posizione del passaggio precedente.</span><span class="sxs-lookup"><span data-stu-id="9fa13-165">Create the Event Hubs Namespace, using the same resource group and location as in the previous step.</span></span>

    ```azurecli
    az eventhubs namespace create --name <Event Hubs namespace name> --resource-group <resource group name> -l <location>
    ```

1. <span data-ttu-id="9fa13-166">Tutti gli hub eventi nello stesso spazio dei nomi di Hub eventi condividono credenziali di connessione comuni.</span><span class="sxs-lookup"><span data-stu-id="9fa13-166">All Event Hubs within the same Event Hubs namespace share common connection credentials.</span></span> <span data-ttu-id="9fa13-167">Queste credenziali saranno necessarie per configurare le applicazioni per inviare e ricevere messaggi tramite l'hub eventi.</span><span class="sxs-lookup"><span data-stu-id="9fa13-167">You will need these credentials when you configure applications to send and receive messages using the event hub.</span></span> <span data-ttu-id="9fa13-168">Usare il comando seguente per restituire la stringa di connessione per lo spazio dei nomi di Hub eventi, con il gruppo di risorse e il nome dello spazio dei nomi di Hub eventi usati in precedenza.</span><span class="sxs-lookup"><span data-stu-id="9fa13-168">Use the following command to return the connection string for your Event Hubs namespace, using the same resource group and Event Hubs namespace name as before.</span></span>

    ```azurecli
    az eventhubs namespace authorization-rule keys list --resource-group <resource group name> --namespace-name <EventHub namespace name> --name RootManageSharedAccessKey
    ```

### <a name="configuring-a-new-event-hub"></a><span data-ttu-id="9fa13-169">Configurazione di un nuovo hub eventi</span><span class="sxs-lookup"><span data-stu-id="9fa13-169">Configuring a new event hub</span></span>

<span data-ttu-id="9fa13-170">Dopo aver creato lo spazio dei nomi di Hub eventi, è possibile creare un hub eventi.</span><span class="sxs-lookup"><span data-stu-id="9fa13-170">After the Event Hubs namespace has been created, you can create an event hub.</span></span> <span data-ttu-id="9fa13-171">Quando si crea un nuovo hub eventi, esistono alcuni parametri obbligatori.</span><span class="sxs-lookup"><span data-stu-id="9fa13-171">When creating a new event hub, there are several mandatory parameters.</span></span>

<span data-ttu-id="9fa13-172">Per creare un hub eventi, sono necessari i parametri seguenti:</span><span class="sxs-lookup"><span data-stu-id="9fa13-172">The following parameters are required to create an event hub:</span></span>

- <span data-ttu-id="9fa13-173">**Nome hub eventi**: nome dell'hub eventi. Deve essere univoco all'interno della sottoscrizione e:</span><span class="sxs-lookup"><span data-stu-id="9fa13-173">**Event hub name** - Event hub name that is unique within your subscription and:</span></span>
  - <span data-ttu-id="9fa13-174">Compreso tra 1 e 50 caratteri.</span><span class="sxs-lookup"><span data-stu-id="9fa13-174">Is between 1 and 50 characters long</span></span>
  - <span data-ttu-id="9fa13-175">Deve contenere solo lettere, numeri, punti, trattini e caratteri di sottolineatura.</span><span class="sxs-lookup"><span data-stu-id="9fa13-175">Contains only letters, numbers, periods, hyphens, and underscores</span></span>
  - <span data-ttu-id="9fa13-176">Deve iniziare e terminare con una lettera o un numero.</span><span class="sxs-lookup"><span data-stu-id="9fa13-176">Starts and ends with a letter or number</span></span>
- <span data-ttu-id="9fa13-177">**Numero di partizioni**: numero di partizioni necessarie in un hub eventi (compreso tra 2 e 32).</span><span class="sxs-lookup"><span data-stu-id="9fa13-177">**Partition Count** -  The number of partitions required in an event hub (between 2 and 32).</span></span> <span data-ttu-id="9fa13-178">Deve essere direttamente correlato al numero di consumer concorrenti previsto.</span><span class="sxs-lookup"><span data-stu-id="9fa13-178">This should be directly related to the expected number of concurrent consumers.</span></span> <span data-ttu-id="9fa13-179">Questa opzione non può essere modificata dopo la creazione dell'hub.</span><span class="sxs-lookup"><span data-stu-id="9fa13-179">This cannot be changed after the hub has been created.</span></span> <span data-ttu-id="9fa13-180">La partizione separa il flusso dei messaggi, in modo che per le applicazioni consumer o ricevitore sia sufficiente leggere uno specifico subset del flusso di dati.</span><span class="sxs-lookup"><span data-stu-id="9fa13-180">The partition separates the message stream, so that consumer or receiver applications only need to read a specific subset of the data stream.</span></span> <span data-ttu-id="9fa13-181">Se non è definito, il valore predefinito è *4*.</span><span class="sxs-lookup"><span data-stu-id="9fa13-181">If not defined, this defaults to *4*.</span></span>
- <span data-ttu-id="9fa13-182">**Conservazione messaggi**: numero di giorni (compreso tra 1 e 7) per cui rimarranno disponibili i messaggi, se dovesse essere necessario riprodurre il flusso dei dati per qualsiasi motivo.</span><span class="sxs-lookup"><span data-stu-id="9fa13-182">**Message Retention** - The number of days (between 1 and 7) that messages will remain available, if the data stream needs to be replayed for any reason.</span></span> <span data-ttu-id="9fa13-183">Se non è definito, il valore predefinito è *7*.</span><span class="sxs-lookup"><span data-stu-id="9fa13-183">If not defined, this defaults to *7*.</span></span>

<span data-ttu-id="9fa13-184">È anche possibile configurare un hub eventi per trasmettere i dati a un account di Archiviazione BLOB di Azure o Azure Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="9fa13-184">You can also optionally configure an event hub to stream data to an Azure Blob storage or Azure Data Lake Store account.</span></span>

### <a name="azure-cli-commands-for-creating-an-event-hub"></a><span data-ttu-id="9fa13-185">Comandi dell'interfaccia della riga di comando di Azure per la creazione di un hub eventi</span><span class="sxs-lookup"><span data-stu-id="9fa13-185">Azure CLI commands for creating an event hub</span></span>

<span data-ttu-id="9fa13-186">Per creare un nuovo hub eventi, usare i comandi seguenti:</span><span class="sxs-lookup"><span data-stu-id="9fa13-186">To create a new event hub, you use the following commands:</span></span>

1. <span data-ttu-id="9fa13-187">Creare l'hub eventi con lo stesso gruppo di risorse e la stessa posizione usati per la creazione dello spazio dei nomi.</span><span class="sxs-lookup"><span data-stu-id="9fa13-187">Create the event hub, using the same resource group and location as you used when creating the namespace.</span></span>

    ```azurecli
    az eventhubs eventhub create --name <event hub name> --resource-group <Resource Group name> --namespace-name <Event Hubs namespace name>
    ```

1. <span data-ttu-id="9fa13-188">Visualizzare i dettagli dell'hub eventi nello spazio dei nomi, con il gruppo di risorse, il nome dell'hub eventi e il nome dello spazio dei nomi usati in precedenza.</span><span class="sxs-lookup"><span data-stu-id="9fa13-188">View the details of your event hub in the namespace, using the same resource group and event hub name and namespace name as before.</span></span>

    ```azurecli
    az eventhubs eventhub show --resource-group <Resource Group name> --namespace-name <Event Hubs namespace name> --name <event hub name>

## Summary

To deploy Azure Event Hubs, you must configure an Event Hubs namespace and then configure the event hub itself. In the next section, you will go through the detailed configuration steps to create a new namespace and event hub.