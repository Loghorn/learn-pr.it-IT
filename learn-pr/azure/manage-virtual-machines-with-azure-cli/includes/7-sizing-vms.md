<span data-ttu-id="5a7e0-101">È necessario ridimensionare le macchine virtuali in base al carico di lavoro previsto.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-101">Virtual machines must be sized appropriately for the expected work.</span></span> <span data-ttu-id="5a7e0-102">Una macchina virtuale senza la corretta quantità di memoria o CPU non riesce a funzionare in condizioni di carico o può risultare troppo lenta e quindi poco efficiente.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-102">A VM without the correct amount of memory or CPU will fail under load or run too slowly to be effective.</span></span> 

<span data-ttu-id="5a7e0-103">Quando si crea una macchina virtuale, è possibile specificare un valore per le _dimensioni_ in base al quale verrà determinata la quantità di risorse di calcolo da dedicare alla macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-103">When you create a virtual machine, you can supply a _VM size_ value that will determine the amount of compute resources that will be devoted to the VM.</span></span> <span data-ttu-id="5a7e0-104">In queste sono incluse la CPU, la GPU e la memoria che vengono rese disponibili da Azure per la macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-104">This includes CPU, GPU, and memory that are made available to the virtual machine from Azure.</span></span>

<span data-ttu-id="5a7e0-105">Azure definisce un set di [dimensioni di macchina virtuale predefinite](https://docs.microsoft.com/azure/virtual-machines/linux/sizes) per Linux e Windows che è possibile scegliere in base all'utilizzo previsto.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-105">Azure defines a set of [pre-defined VM sizes](https://docs.microsoft.com/azure/virtual-machines/linux/sizes) for Linux and Windows to choose from based on the expected usage.</span></span> 

| <span data-ttu-id="5a7e0-106">Tipo</span><span class="sxs-lookup"><span data-stu-id="5a7e0-106">Type</span></span> | <span data-ttu-id="5a7e0-107">Dimensioni</span><span class="sxs-lookup"><span data-stu-id="5a7e0-107">Sizes</span></span> | <span data-ttu-id="5a7e0-108">Descrizione</span><span class="sxs-lookup"><span data-stu-id="5a7e0-108">Description</span></span> |
|------|-------|-------------|
| <span data-ttu-id="5a7e0-109">Utilizzo generico</span><span class="sxs-lookup"><span data-stu-id="5a7e0-109">General purpose</span></span>   | <span data-ttu-id="5a7e0-110">Dsv3, Dv3, DSv2, Dv2, DS, D, Av2, A0-7</span><span class="sxs-lookup"><span data-stu-id="5a7e0-110">Dsv3, Dv3, DSv2, Dv2, DS, D, Av2, A0-7</span></span> | <span data-ttu-id="5a7e0-111">Rapporto equilibrato tra CPU e memoria.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-111">Balanced CPU-to-memory.</span></span> <span data-ttu-id="5a7e0-112">Soluzione ideale per sviluppo/test e soluzioni di dati e applicazioni medio-piccole.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-112">Ideal for dev/test and small to medium applications and data solutions.</span></span> |
| <span data-ttu-id="5a7e0-113">Ottimizzate per il calcolo</span><span class="sxs-lookup"><span data-stu-id="5a7e0-113">Compute optimized</span></span> | <span data-ttu-id="5a7e0-114">Fs, F</span><span class="sxs-lookup"><span data-stu-id="5a7e0-114">Fs, F</span></span> | <span data-ttu-id="5a7e0-115">Rapporto elevato tra CPU e memoria.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-115">High CPU-to-memory.</span></span> <span data-ttu-id="5a7e0-116">Soluzione idonea per applicazioni con livelli medi di traffico, appliance di rete e processi batch.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-116">Good for medium-traffic applications, network appliances, and batch processes.</span></span> |
| <span data-ttu-id="5a7e0-117">Ottimizzate per la memoria</span><span class="sxs-lookup"><span data-stu-id="5a7e0-117">Memory optimized</span></span>  | <span data-ttu-id="5a7e0-118">Esv3, Ev3, M, GS, G, DSv2, DS, Dv2, D</span><span class="sxs-lookup"><span data-stu-id="5a7e0-118">Esv3, Ev3, M, GS, G, DSv2, DS, Dv2, D</span></span>   | <span data-ttu-id="5a7e0-119">Rapporto elevato tra memoria e core.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-119">High memory-to-core.</span></span> <span data-ttu-id="5a7e0-120">Soluzione ideale per database relazionali, cache medio-grandi e analisi in memoria.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-120">Great for relational databases, medium to large caches, and in-memory analytics.</span></span> |
| <span data-ttu-id="5a7e0-121">Ottimizzate per l'archiviazione</span><span class="sxs-lookup"><span data-stu-id="5a7e0-121">Storage optimized</span></span> | <span data-ttu-id="5a7e0-122">Ls</span><span class="sxs-lookup"><span data-stu-id="5a7e0-122">Ls</span></span> | <span data-ttu-id="5a7e0-123">I/O e velocità effettiva del disco elevati.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-123">High disk throughput and IO.</span></span> <span data-ttu-id="5a7e0-124">Soluzione ideale per Big Data, database SQL e NoSQL.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-124">Ideal for big data, SQL, and NoSQL databases.</span></span> |
| <span data-ttu-id="5a7e0-125">Ottimizzate per la GPU</span><span class="sxs-lookup"><span data-stu-id="5a7e0-125">GPU optimized</span></span> | <span data-ttu-id="5a7e0-126">NV, NC</span><span class="sxs-lookup"><span data-stu-id="5a7e0-126">NV, NC</span></span> | <span data-ttu-id="5a7e0-127">Macchine virtuali specializzate ottimizzate per livelli intensivi di rendering della grafica ed editing di video.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-127">Specialized VMs targeted for heavy graphic rendering and video editing.</span></span> |
| <span data-ttu-id="5a7e0-128">Prestazioni elevate</span><span class="sxs-lookup"><span data-stu-id="5a7e0-128">High performance</span></span> | <span data-ttu-id="5a7e0-129">H, A8-11</span><span class="sxs-lookup"><span data-stu-id="5a7e0-129">H, A8-11</span></span> | <span data-ttu-id="5a7e0-130">Le macchine virtuali con CPU più potenti, con interfacce di rete ad alta velocità effettiva opzionali (RDMA).</span><span class="sxs-lookup"><span data-stu-id="5a7e0-130">Our most powerful CPU VMs with optional high-throughput network interfaces (RDMA).</span></span> | 

<span data-ttu-id="5a7e0-131">Le dimensioni disponibili variano in base all'area in cui si crea la macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-131">The available sizes change based on the region you're creating the VM in.</span></span> <span data-ttu-id="5a7e0-132">È possibile ottenere un elenco delle dimensioni disponibili tramite il comando `vm list-sizes`.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-132">You can get a list of the available sizes using the `vm list-sizes` command.</span></span> <span data-ttu-id="5a7e0-133">Provare a digitare quanto segue in Azure Cloud Shell:</span><span class="sxs-lookup"><span data-stu-id="5a7e0-133">Try typing this into Azure Cloud Shell:</span></span>

```azurecli
az vm list-sizes --location eastus --output table
```

<span data-ttu-id="5a7e0-134">Ecco una risposta abbreviata per `eastus`:</span><span class="sxs-lookup"><span data-stu-id="5a7e0-134">Here's an abbreviated response for `eastus`:</span></span>

```
  MaxDataDiskCount    MemoryInMb  Name                      NumberOfCores    OsDiskSizeInMb    ResourceDiskSizeInMb
------------------  ------------  ----------------------  ---------------  ----------------  ----------------------
                 2          2048  Standard_B1ms                         1           1047552                    4096
                 2          1024  Standard_B1s                          1           1047552                    2048
                 4          8192  Standard_B2ms                         2           1047552                   16384
                 4          4096  Standard_B2s                          2           1047552                    8192
                 8         16384  Standard_B4ms                         4           1047552                   32768
                16         32768  Standard_B8ms                         8           1047552                   65536
                 4          3584  Standard_DS1_v2                       1           1047552                    7168
                 8          7168  Standard_DS2_v2                       2           1047552                   14336
                16         14336  Standard_DS3_v2                       4           1047552                   28672
                32         28672  Standard_DS4_v2                       8           1047552                   57344
                64         57344  Standard_DS5_v2                      16           1047552                  114688
        ....
                64       3891200  Standard_M128-32ms                  128           1047552                 4096000
                64       3891200  Standard_M128-64ms                  128           1047552                 4096000
                64       3891200  Standard_M128ms                     128           1047552                 4096000
                64       2048000  Standard_M128s                      128           1047552                 4096000
                64       1024000  Standard_M64                         64           1047552                 8192000
                64       1792000  Standard_M64m                        64           1047552                 8192000
                64       2048000  Standard_M128                       128           1047552                16384000
                64       3891200  Standard_M128m                      128           1047552                16384000
```

<span data-ttu-id="5a7e0-135">Al momento della creazione della macchina virtuale non è stata specificata una dimensione. Azure ha pertanto selezionato automaticamente una dimensione predefinita per utilizzo generico, ovvero `Standard_DS1_v2`.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-135">We didn't specify a size when we created our VM - so Azure selected a default general-purpose size for us of `Standard_DS1_v2`.</span></span> <span data-ttu-id="5a7e0-136">È tuttavia possibile specificare la dimensione come parte del comando `vm create` usando il parametro `--size`.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-136">However, we can specify the size as part of the `vm create` command using the `--size` parameter.</span></span> <span data-ttu-id="5a7e0-137">Per creare una macchina virtuale con 16 core, ad esempio, è possibile usare il comando seguente:</span><span class="sxs-lookup"><span data-stu-id="5a7e0-137">For example, you could use the following command to create a 16-core virtual machine:</span></span>

```azurecli
az vm create --resource-group ExerciseResources --name SampleVM \
  --image Debian --admin-username aldis --generate-ssh-keys --verbose \
  --size "Standard_DS5_v2"
```

> [!WARNING]
> <span data-ttu-id="5a7e0-138">Il livello di sottoscrizione [applica i limiti](https://docs.microsoft.com/azure/azure-subscription-service-limits) al numero di risorse che è possibile creare e alle dimensioni totali di queste risorse.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-138">Your subscription tier [enforces limits](https://docs.microsoft.com/azure/azure-subscription-service-limits) on how many resources you can create, as well as the total size of those resources.</span></span> <span data-ttu-id="5a7e0-139">Ad esempio, il limite massimo è di **20 CPU virtuali** per la sottoscrizione con pagamento in base al consumo e di solo **4 vCPU** per il livello gratuito.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-139">For example, you are capped to **20 virtual CPUs** with the pay-as-you-go subscription, and only **4 vCPUs** for a free tier.</span></span> <span data-ttu-id="5a7e0-140">Quando il limite viene superato, l'interfaccia della riga di comando di Azure visualizzerà l'errore **Quota superata**.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-140">The Azure CLI will let you know when you exceed this with a **Quota Exceeded** error.</span></span> <span data-ttu-id="5a7e0-141">Se viene visualizzato questo errore durante la creazione dell'architettura, è possibile richiedere l'aumento dei limiti associati alla sottoscrizione a pagamento (fino a 10.000 vCPU) inviando una [richiesta online gratuita](https://docs.microsoft.com/azure/azure-resource-manager/resource-manager-quota-errors).</span><span class="sxs-lookup"><span data-stu-id="5a7e0-141">If you hit this error when creating your architecture, you can request to raise the limits associated with your paid subscription (up to 10,000 vCPUs!) through a [free online request](https://docs.microsoft.com/azure/azure-resource-manager/resource-manager-quota-errors).</span></span> 

## <a name="resizing-an-existing-vm"></a><span data-ttu-id="5a7e0-142">Ridimensionamento di una macchina virtuale esistente</span><span class="sxs-lookup"><span data-stu-id="5a7e0-142">Resizing an existing VM</span></span>
<span data-ttu-id="5a7e0-143">È anche possibile ridimensionare una macchina virtuale esistente se si verifica una variazione del carico di lavoro o se non è stata definita la dimensione corretta in fase di creazione.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-143">We can also resize an existing VM if the workload changes, or if it was incorrectly sized at creation.</span></span> <span data-ttu-id="5a7e0-144">Prima di richiedere un ridimensionamento, è necessario verificare se la dimensione desiderata è disponibile nel cluster di cui fa parte la macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-144">Before a resize is requested, we must check to see if the desired size is available in the cluster our VM is part of.</span></span> <span data-ttu-id="5a7e0-145">A questo scopo, usare il comando `vm list-vm-resize-options`:</span><span class="sxs-lookup"><span data-stu-id="5a7e0-145">We can do this with the `vm list-vm-resize-options` command:</span></span>

```azurecli
az vm list-vm-resize-options --resource-group ExerciseResources --name SampleVM --output table
```

<span data-ttu-id="5a7e0-146">Verrà restituito l'elenco di tutte le possibili configurazioni di dimensione che sono disponibili nel gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-146">This will return a list of all the possible size configurations available in the resource group.</span></span> <span data-ttu-id="5a7e0-147">Se la dimensione desiderata non è disponibile nel cluster, ma _è_ disponibile nell'area, è possibile [deallocare la macchina virtuale](https://docs.microsoft.com/cli/azure/vm?view=azure-cli-latest#az-vm-deallocate).</span><span class="sxs-lookup"><span data-stu-id="5a7e0-147">If the size we want isn't available in our cluster, but _is_ available in the region, we can [deallocate the VM](https://docs.microsoft.com/cli/azure/vm?view=azure-cli-latest#az-vm-deallocate).</span></span> <span data-ttu-id="5a7e0-148">Questo comando arresta la macchina virtuale in esecuzione e la rimuove dal cluster corrente senza che si verifichi alcuna perdita di risorse.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-148">This command will stop the running VM and remove it from the current cluster without losing any resources.</span></span> <span data-ttu-id="5a7e0-149">È quindi possibile ridimensionarla, creando nuovamente la macchina virtuale in un altro cluster in cui è disponibile la configurazione di dimensione desiderata.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-149">Then we can resize it, which will re-create the VM in a new cluster where the size configuration is available.</span></span>

<span data-ttu-id="5a7e0-150">Per ridimensionare una macchina virtuale, usare il comando `vm resize`.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-150">To resize a VM, we use the `vm resize` command.</span></span> <span data-ttu-id="5a7e0-151">Si supponga ad esempio di voler ridurre al minimo le risorse correnti della macchina virtuale: 2 GB di memoria, 1 core CPU e 4 GB di spazio su disco.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-151">For example, let's reduce our current VM resources to the bare minimum: 2G of memory, 1 CPU core, and 4G of disk space.</span></span> <span data-ttu-id="5a7e0-152">Digitare questo comando in Cloud Shell:</span><span class="sxs-lookup"><span data-stu-id="5a7e0-152">Type this command in Cloud Shell:</span></span>

```azurecli
az vm resize --resource-group ExerciseResources --name SampleVM --size "Standard_B1ms"
```

<span data-ttu-id="5a7e0-153">Il comando impiegherà alcuni minuti per ridurre le risorse della macchina virtuale e al termine dell'esecuzione restituirà una nuova configurazione JSON.</span><span class="sxs-lookup"><span data-stu-id="5a7e0-153">This command will take a few minutes to reduce the resources of the VM, and once it's done, it will return a new JSON configuration.</span></span>