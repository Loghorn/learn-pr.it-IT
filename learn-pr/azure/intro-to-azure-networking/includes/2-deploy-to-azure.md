<span data-ttu-id="afe0a-101">La prima operazione sarà probabilmente ricreare la configurazione locale nel cloud.</span><span class="sxs-lookup"><span data-stu-id="afe0a-101">Your first step will likely be to re-create your on-premises configuration in the cloud.</span></span>

<span data-ttu-id="afe0a-102">Questa configurazione di base offre un'idea di come vengono configurate le reti e di come il traffico di rete entra ed esce da Azure.</span><span class="sxs-lookup"><span data-stu-id="afe0a-102">This basic configuration will give you a sense of how networks are configured, and how network traffic moves in and out of Azure.</span></span>

## <a name="your-e-commerce-site-at-a-glance"></a><span data-ttu-id="afe0a-103">Riepilogo del sito di e-commerce</span><span class="sxs-lookup"><span data-stu-id="afe0a-103">Your e-commerce site at a glance</span></span>

<span data-ttu-id="afe0a-104">I sistemi aziendali più grandi sono spesso costituiti da più applicazioni e servizi interconnessi che interagiscono tra loro.</span><span class="sxs-lookup"><span data-stu-id="afe0a-104">Larger enterprise systems are often composed of multiple inter-connected applications and services that work together.</span></span> <span data-ttu-id="afe0a-105">Potrebbe essere presente un sistema Web front-end che visualizza l'inventario e consente ai clienti di creare un ordine.</span><span class="sxs-lookup"><span data-stu-id="afe0a-105">You might have a front-end web system that displays inventory and allows customers to create an order.</span></span> <span data-ttu-id="afe0a-106">Tale sistema potrebbe comunicare con svariati servizi Web per fornire i dati dell'inventario, gestire i profili utente, elaborare le carte di credito e richiedere l'evasione degli ordini elaborati.</span><span class="sxs-lookup"><span data-stu-id="afe0a-106">That might talk to a variety of web services to provide the inventory data, manage user profiles, process credit cards, and request fulfillment of processed orders.</span></span>

<span data-ttu-id="afe0a-107">Esistono diverse strategie e modelli adottati dagli architetti e progettisti di software per semplificare la progettazione, la compilazione, la gestione e la manutenzione di questi sistemi complessi.</span><span class="sxs-lookup"><span data-stu-id="afe0a-107">There are several strategies and patterns employed by software architects and designers to make these complex systems easier to design, build, manage, and maintain.</span></span> <span data-ttu-id="afe0a-108">Ne verranno analizzati alcuni, tra cui le _architetture a regime di controllo libero_.</span><span class="sxs-lookup"><span data-stu-id="afe0a-108">Let's look at a few of them, starting with _loosely coupled architectures_.</span></span>

#### <a name="benefits-of-loosely-coupled-architectures"></a><span data-ttu-id="afe0a-109">Vantaggi delle architetture a regime di controllo libero</span><span class="sxs-lookup"><span data-stu-id="afe0a-109">Benefits of Loosely Coupled Architectures</span></span>

> [!VIDEO https://www.microsoft.com/videoplayer/embed/RE2yHrc]

### <a name="using-an-n-tier-architecture"></a><span data-ttu-id="afe0a-110">Uso di un'architettura a più livelli</span><span class="sxs-lookup"><span data-stu-id="afe0a-110">Using an N-tier architecture</span></span>

<span data-ttu-id="afe0a-111">Un modello architettonico che può essere usato per compilare sistemi a regime di controllo libero è _a più livelli_.</span><span class="sxs-lookup"><span data-stu-id="afe0a-111">An architectural pattern that can be used to build loosely coupled systems is _N-tier_.</span></span>

<span data-ttu-id="afe0a-112">Un'[architettura a più livelli](https://docs.microsoft.com/azure/architecture/guide/architecture-styles/n-tier) consente di dividere un'applicazione in due o più livelli logici.</span><span class="sxs-lookup"><span data-stu-id="afe0a-112">An [N-tier architecture](https://docs.microsoft.com/azure/architecture/guide/architecture-styles/n-tier) divides an application into two or more logical tiers.</span></span> <span data-ttu-id="afe0a-113">Dal punto di vista dell'architettura, un livello superiore può accedere ai servizi da un livello inferiore, ma un livello inferiore non deve mai accedere a un livello superiore.</span><span class="sxs-lookup"><span data-stu-id="afe0a-113">Architecturally, a higher tier can access services from a lower tier, but a lower tier should never access a higher tier.</span></span>

<span data-ttu-id="afe0a-114">I livelli consentono di separare le problematiche e idealmente sono progettati in modo da poter essere usati più volte.</span><span class="sxs-lookup"><span data-stu-id="afe0a-114">Tiers help separate concerns, and are ideally designed to be reusable.</span></span> <span data-ttu-id="afe0a-115">L'uso di un'architettura a livelli semplifica anche la manutenzione.</span><span class="sxs-lookup"><span data-stu-id="afe0a-115">Using a tiered architecture also simplifies maintenance.</span></span> <span data-ttu-id="afe0a-116">I livelli possono essere aggiornati o sostituiti in modo indipendente e, se necessario, si possono inserire nuovi livelli.</span><span class="sxs-lookup"><span data-stu-id="afe0a-116">Tiers can be updated or replaced independently, and new tiers can be inserted if needed.</span></span>

<span data-ttu-id="afe0a-117">_A tre livelli_ si riferisce a un'applicazione a più livelli che include tre livelli.</span><span class="sxs-lookup"><span data-stu-id="afe0a-117">_Three-tier_ refers to an n-tier application that has three tiers.</span></span> <span data-ttu-id="afe0a-118">L'applicazione Web di e-commerce segue questa architettura a tre livelli:</span><span class="sxs-lookup"><span data-stu-id="afe0a-118">Your e-commerce web application follows this three-tier architecture:</span></span>

* <span data-ttu-id="afe0a-119">Il **livello Web** rende disponibile agli utenti l'interfaccia Web in un browser.</span><span class="sxs-lookup"><span data-stu-id="afe0a-119">The **web tier** provides the web interface to your users through a browser.</span></span>
* <span data-ttu-id="afe0a-120">Il **livello applicazione** esegue la logica di business.</span><span class="sxs-lookup"><span data-stu-id="afe0a-120">The **application tier** runs business logic.</span></span>
* <span data-ttu-id="afe0a-121">Il **livello dati** include i database e altre risorse di archiviazione che contengono le informazioni sui prodotti e gli ordini dei clienti.</span><span class="sxs-lookup"><span data-stu-id="afe0a-121">The **data tier** includes databases and other storage that hold product information and customer orders.</span></span>

<span data-ttu-id="afe0a-122">La figura seguente illustra il flusso della richiesta dall'utente al livello dati.</span><span class="sxs-lookup"><span data-stu-id="afe0a-122">The following illustration shows the flow of request from the user to the data tier.</span></span>

![Figura che illustra un'architettura a tre livelli in cui ogni livello è ospitato in una macchina virtuale dedicata.](../media/2-three-tier.png)

<span data-ttu-id="afe0a-124">Quando l'utente fa clic sul pulsante per effettuare l'ordine, la richiesta viene inviata al livello Web, insieme all'indirizzo dell'utente e alle informazioni di pagamento.</span><span class="sxs-lookup"><span data-stu-id="afe0a-124">When the user clicks the button to place the order, the request is sent to the web tier, along with the user's address and payment information.</span></span> <span data-ttu-id="afe0a-125">Il livello Web passa queste informazioni al livello applicazione per la convalida delle informazioni di pagamento e il controllo dell'inventario.</span><span class="sxs-lookup"><span data-stu-id="afe0a-125">The web tier passes this information to the application tier, which would validate payment information and check inventory.</span></span> <span data-ttu-id="afe0a-126">Il livello applicazione può quindi archiviare l'ordine nel livello dati in modo da selezionarlo in un secondo tempo per evadere l'ordine.</span><span class="sxs-lookup"><span data-stu-id="afe0a-126">The application tier might then store the order in the data tier, to be picked up later for fulfillment.</span></span>

## <a name="your-e-commerce-site-running-on-azure"></a><span data-ttu-id="afe0a-127">Il sito di e-commerce in esecuzione in Azure</span><span class="sxs-lookup"><span data-stu-id="afe0a-127">Your e-commerce site running on Azure</span></span>

<span data-ttu-id="afe0a-128">Azure offre diversi modi per ospitare le applicazioni Web, da ambienti completamente preconfigurati che ospitano il codice per le macchine virtuali configurate, personalizzate e gestite dall'utente.</span><span class="sxs-lookup"><span data-stu-id="afe0a-128">Azure provides many different ways to host your web applications, from fully pre-configured environments that host your code, to virtual machines that you configure, customize, and manage.</span></span>

<span data-ttu-id="afe0a-129">Si supponga di scegliere di eseguire il sito di e-commerce in macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="afe0a-129">Let's say you choose to run your e-commerce site on virtual machines.</span></span> <span data-ttu-id="afe0a-130">Di seguito è riportato un esempio di ciò che potrebbe apparire nell'ambiente di test in esecuzione in Azure.</span><span class="sxs-lookup"><span data-stu-id="afe0a-130">Here's what that might look like in your test environment running on Azure.</span></span> <span data-ttu-id="afe0a-131">La figura seguente mostra un'architettura a tre livelli in esecuzione in macchine virtuali con funzionalità di sicurezza abilitate per limitare le richieste in ingresso.</span><span class="sxs-lookup"><span data-stu-id="afe0a-131">The following illustration shows a three-tier architecture running on virtual machines with security features enabled to restrict inbound requests.</span></span> 

![Figura che illustra un'architettura a tre livelli in cui ogni livello è in esecuzione in una macchina virtuale separata.](../media/2-test-deployment.png)

<span data-ttu-id="afe0a-135">L'app si può scomporre come segue.</span><span class="sxs-lookup"><span data-stu-id="afe0a-135">Let's break this down.</span></span>

:::row:::
  :::column:::
    <span data-ttu-id="afe0a-136">![Un segnaposto di una località sulla Terra che rappresenta un'area di Azure](../media/2-azure-region.png)</span><span class="sxs-lookup"><span data-stu-id="afe0a-136">![A pinned location on the Earth representing an Azure region](../media/2-azure-region.png)</span></span>
  :::column-end:::
    <span data-ttu-id="afe0a-137">:::column span="3"::: **Che cos'è un'area di Azure?**</span><span class="sxs-lookup"><span data-stu-id="afe0a-137">:::column span="3"::: **What's an Azure region?**</span></span>

<span data-ttu-id="afe0a-138">Un'_area_ è un data center di Azure in un'area geografica specifica.</span><span class="sxs-lookup"><span data-stu-id="afe0a-138">A _region_ is an Azure data center within a specific geographic location.</span></span> <span data-ttu-id="afe0a-139">Stati Uniti orientali, Stati Uniti occidentali ed Europa settentrionale sono esempi di aree.</span><span class="sxs-lookup"><span data-stu-id="afe0a-139">East US, West US, and North Europe are examples of regions.</span></span> <span data-ttu-id="afe0a-140">In questo caso l'applicazione viene eseguita nell'area Stati Uniti orientali.</span><span class="sxs-lookup"><span data-stu-id="afe0a-140">In this instance, you see that the application is running in the East US region.</span></span>

  :::column-end:::
:::row-end:::
:::row:::
  :::column:::
    <span data-ttu-id="afe0a-141">![Due macchine virtuali in esecuzione in una rete virtuale](../media/2-azure-vnet.png)</span><span class="sxs-lookup"><span data-stu-id="afe0a-141">![Two virtual machines running on a virtual network](../media/2-azure-vnet.png)</span></span>
  :::column-end:::
    <span data-ttu-id="afe0a-142">:::column span="3"::: **Che cos'è una rete virtuale?**</span><span class="sxs-lookup"><span data-stu-id="afe0a-142">:::column span="3"::: **What's a virtual network?**</span></span>

<span data-ttu-id="afe0a-143">Una _rete virtuale_ è una rete isolata logicamente in Azure.</span><span class="sxs-lookup"><span data-stu-id="afe0a-143">A _virtual network_ is a logically isolated network on Azure.</span></span> <span data-ttu-id="afe0a-144">L'utente avrà dimestichezza con le reti virtuali di Azure se ha configurato le reti in Hyper-V, VMware o anche in altri cloud pubblici.</span><span class="sxs-lookup"><span data-stu-id="afe0a-144">Azure virtual networks will be familiar to you if you've set up networks on Hyper-V, VMware, or even on other public clouds.</span></span>

<span data-ttu-id="afe0a-145">Ogni livello Web, applicazione e dati ha un'unica macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="afe0a-145">The web, application, and data tiers each have a single VM.</span></span> <span data-ttu-id="afe0a-146">Ogni macchina virtuale appartiene a una rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="afe0a-146">Each VM belongs to a virtual network.</span></span>

<span data-ttu-id="afe0a-147">Gli utenti interagiscono con il livello Web direttamente, quindi la macchina virtuale ha un indirizzo IP pubblico.</span><span class="sxs-lookup"><span data-stu-id="afe0a-147">Users interact with the web tier directly, so that VM has a public IP address.</span></span> <span data-ttu-id="afe0a-148">Gli utenti non interagiscono con i livelli dati o applicazione.</span><span class="sxs-lookup"><span data-stu-id="afe0a-148">Users don't interact with the application or data tiers.</span></span> <span data-ttu-id="afe0a-149">Quindi queste macchine virtuali hanno un indirizzo IP privato.</span><span class="sxs-lookup"><span data-stu-id="afe0a-149">So these VMs each have a private IP address.</span></span>

<span data-ttu-id="afe0a-150">I data center di Azure gestiscono l'hardware fisico per l'utente.</span><span class="sxs-lookup"><span data-stu-id="afe0a-150">Azure data centers manage the physical hardware for you.</span></span> <span data-ttu-id="afe0a-151">Le reti virtuali si configurano usando il software, che consente di gestire una rete virtuale esattamente come la propria rete.</span><span class="sxs-lookup"><span data-stu-id="afe0a-151">You configure virtual networks through software, which enables you to treat a virtual network just like your own network.</span></span> <span data-ttu-id="afe0a-152">Ad esempio, è possibile suddividere una rete virtuale in subnet per controllare meglio il modo in cui la rete assegna gli indirizzi IP.</span><span class="sxs-lookup"><span data-stu-id="afe0a-152">For example, you can divide a virtual network into subnets to better control how the network assigns IP addresses.</span></span> <span data-ttu-id="afe0a-153">È anche possibile scegliere quali altre reti può raggiungere la rete virtuale, se la rete Internet pubblica o altre reti nello spazio indirizzi IP privato.</span><span class="sxs-lookup"><span data-stu-id="afe0a-153">You also choose which other networks your virtual network can reach, whether that's the public internet or other networks in the private IP address space.</span></span>

  :::column-end:::
:::row-end:::
:::row:::
  :::column:::
    <span data-ttu-id="afe0a-154">![Due macchine virtuali con un gruppo di sicurezza di rete condiviso](../media/2-azure-nsg.png)</span><span class="sxs-lookup"><span data-stu-id="afe0a-154">![Two virtual machines with a shared network security group](../media/2-azure-nsg.png)</span></span>
  :::column-end:::
    <span data-ttu-id="afe0a-155">:::column span="3"::: **Che cos'è un gruppo di sicurezza di rete?**</span><span class="sxs-lookup"><span data-stu-id="afe0a-155">:::column span="3"::: **What's a network security group?**</span></span>

<span data-ttu-id="afe0a-156">Un _gruppo di sicurezza di rete_, o NSG, consente o nega il traffico di rete in ingresso alle risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="afe0a-156">A _network security group_, or NSG, allows or denies inbound network traffic to your Azure resources.</span></span> <span data-ttu-id="afe0a-157">Un gruppo di sicurezza di rete può essere paragonato a un firewall a livello cloud per la rete.</span><span class="sxs-lookup"><span data-stu-id="afe0a-157">Think of a network security group as a cloud-level firewall for your network.</span></span>

<span data-ttu-id="afe0a-158">Si può notare ad esempio che la macchina virtuale nel livello Web consente il traffico in ingresso sulle porte 22 (SSH) e 80 (HTTP).</span><span class="sxs-lookup"><span data-stu-id="afe0a-158">For example, notice that the VM in the web tier allows inbound traffic on ports 22 (SSH) and 80 (HTTP).</span></span> <span data-ttu-id="afe0a-159">Il gruppo di sicurezza di rete della macchina virtuale consente il traffico in ingresso attraverso queste porte da tutte le origini.</span><span class="sxs-lookup"><span data-stu-id="afe0a-159">This VM's network security group allows inbound traffic over these ports from all sources.</span></span> <span data-ttu-id="afe0a-160">È possibile configurare un gruppo di sicurezza di rete per accettare il traffico solo da origini note, ad esempio gli indirizzi IP considerati attendibili.</span><span class="sxs-lookup"><span data-stu-id="afe0a-160">You can configure a network security group to accept traffic only from known sources, such as IP addresses that you trust.</span></span>

> [!NOTE]
> <span data-ttu-id="afe0a-161">La porta 22 consente di connettersi direttamente ai sistemi Linux con SSH.</span><span class="sxs-lookup"><span data-stu-id="afe0a-161">Port 22 enables you to connect directly to Linux systems over SSH.</span></span> <span data-ttu-id="afe0a-162">Di seguito è illustrata la porta 22 aperta ai fini dell'apprendimento.</span><span class="sxs-lookup"><span data-stu-id="afe0a-162">Here we show port 22 open for learning purposes.</span></span> <span data-ttu-id="afe0a-163">In pratica, è possibile configurare l'accesso VPN alla rete virtuale per avere una maggiore protezione.</span><span class="sxs-lookup"><span data-stu-id="afe0a-163">In practice, you might configure VPN access to your virtual network to increase security.</span></span>

  :::column-end:::
:::row-end:::

## <a name="summary"></a><span data-ttu-id="afe0a-164">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="afe0a-164">Summary</span></span>

<span data-ttu-id="afe0a-165">L'applicazione a tre livelli è ora in esecuzione in Azure nell'area Stati Uniti orientali.</span><span class="sxs-lookup"><span data-stu-id="afe0a-165">Your three-tier application is now running on Azure in the East US region.</span></span> <span data-ttu-id="afe0a-166">Un'_area_ è un data center di Azure in un'area geografica specifica.</span><span class="sxs-lookup"><span data-stu-id="afe0a-166">A _region_ is an Azure data center within a specific geographic location.</span></span>

<span data-ttu-id="afe0a-167">Ogni livello può accedere ai servizi solo da un livello inferiore.</span><span class="sxs-lookup"><span data-stu-id="afe0a-167">Each tier can access services only from a lower tier.</span></span> <span data-ttu-id="afe0a-168">La macchina virtuale in esecuzione nel livello Web ha un indirizzo IP pubblico perché riceve il traffico da Internet.</span><span class="sxs-lookup"><span data-stu-id="afe0a-168">The VM running in the web tier has a public IP address because it receives traffic from the internet.</span></span> <span data-ttu-id="afe0a-169">Le macchine virtuali nei livelli inferiori, ovvero i livelli applicazione e dati, hanno tutte indirizzi IP privati perché non comunicano direttamente su Internet.</span><span class="sxs-lookup"><span data-stu-id="afe0a-169">The VMs in the lower tiers, the application and data tiers, each have private IP addresses because they don't communicate directly over the internet.</span></span>

<span data-ttu-id="afe0a-170">Le _reti virtuali_ consentono di raggruppare e isolare i sistemi correlati.</span><span class="sxs-lookup"><span data-stu-id="afe0a-170">_Virtual networks_ enable you to group and isolate related systems.</span></span> <span data-ttu-id="afe0a-171">Si definiscono i _gruppi di sicurezza di rete_ per stabilire quale traffico può passare attraverso una rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="afe0a-171">You define _network security groups_ to control what traffic can flow through a virtual network.</span></span>

<span data-ttu-id="afe0a-172">La configurazione illustrata qui è un buon punto di partenza.</span><span class="sxs-lookup"><span data-stu-id="afe0a-172">The configuration you saw here is a good start.</span></span> <span data-ttu-id="afe0a-173">Quando tuttavia si distribuisce il sito di e-commerce nell'ambiente di produzione nel cloud, è probabile che si incontrino gli stessi problemi incontrati nella distribuzione a livello locale.</span><span class="sxs-lookup"><span data-stu-id="afe0a-173">But when you deploy your e-commerce site to production in the cloud, you'll likely run into the same problems as you did in your on-premises deployment.</span></span>
