<span data-ttu-id="a9af2-101">Per il funzionamento corretto del servizio di bilanciamento del carico, è prima necessario configurare le impostazioni che ne controllano il comportamento.</span><span class="sxs-lookup"><span data-stu-id="a9af2-101">Before the load balancer will function correctly, you must configure settings that control the load balancer's behavior.</span></span> <span data-ttu-id="a9af2-102">Di seguito verrà illustrata la configurazione della rete, del probe di integrità, delle regole di sicurezza, delle regole di bilanciamento del carico e del pool di server.</span><span class="sxs-lookup"><span data-stu-id="a9af2-102">Here, you will look at configuring the network, health probe, security rules, load-balancing rules, and server pool.</span></span>

## <a name="steps-to-configure-a-basic-public-load-balancer"></a><span data-ttu-id="a9af2-103">Passaggi per la configurazione di un servizio di bilanciamento del carico pubblico Basic</span><span class="sxs-lookup"><span data-stu-id="a9af2-103">Steps to configure a Basic Public Load Balancer</span></span>

<span data-ttu-id="a9af2-104">Di seguito è riportata una panoramica dei principali passaggi di configurazione per un servizio di bilanciamento del carico pubblico Basic. I passaggi per un servizio di bilanciamento del carico Standard e per un servizio di bilanciamento del carico interno saranno simili.</span><span class="sxs-lookup"><span data-stu-id="a9af2-104">The following is an overview of the main configuration steps for a Basic Public Load balancer; the steps for a Standard Load Balancer, and for an internal Load Balancer will be similar.</span></span>

### <a name="backend-servers"></a><span data-ttu-id="a9af2-105">Server back-end</span><span class="sxs-lookup"><span data-stu-id="a9af2-105">Backend servers</span></span>

<span data-ttu-id="a9af2-106">Per prima cosa, è necessario configurare il pool di VM back-end.</span><span class="sxs-lookup"><span data-stu-id="a9af2-106">First, you need to configure your backend VM pool.</span></span> <span data-ttu-id="a9af2-107">Le VM devono essere incluse nello stesso set di disponibilità e avere un proprio indirizzo IP pubblico, nonostante questo non venga effettivamente usato dagli endpoint pubblici.</span><span class="sxs-lookup"><span data-stu-id="a9af2-107">The VMs should be in the same availability set and have their own public IP address (although this will not actually be used by your public endpoints).</span></span>

<span data-ttu-id="a9af2-108">È necessario creare una nuova rete virtuale e definire una subnet da usare per il pool di VM.</span><span class="sxs-lookup"><span data-stu-id="a9af2-108">You must create a new virtual network (vNet), and define a subnet for the VM pool to use.</span></span>

<span data-ttu-id="a9af2-109">Anche se non fa direttamente parte del bilanciamento del carico, in presenza di più VM che offrono gli stessi servizi è consigliabile usare un **gruppo di sicurezza di rete (NSG)** per garantire che nell'intero pool di VM vengano applicate le stesse regole del firewall.</span><span class="sxs-lookup"><span data-stu-id="a9af2-109">While not part of load balancing directly, when you have multiple VMs providing the same services, you should use a **Network Security Group (NSG)** to ensure that the same firewall rules are in place across the VM pool.</span></span> <span data-ttu-id="a9af2-110">Per le VM che ospitano applicazioni Web, ad esempio, sarà necessario creare regole di sicurezza in ingresso sulla porta 80 per HTTP o sulla porta 8080 per HTTPS.</span><span class="sxs-lookup"><span data-stu-id="a9af2-110">For example, for VMs hosting web applications, you will need to create inbound security rules on port 80 for HTTP or port 8080 for HTTPS.</span></span>

### <a name="public-ip-address"></a><span data-ttu-id="a9af2-111">Indirizzo IP pubblico</span><span class="sxs-lookup"><span data-stu-id="a9af2-111">Public IP address</span></span>

<span data-ttu-id="a9af2-112">Quando si crea un servizio di bilanciamento del carico pubblico Basic usando il portale, l'**indirizzo IP pubblico** viene configurato automaticamente come front-end del servizio di bilanciamento del carico.</span><span class="sxs-lookup"><span data-stu-id="a9af2-112">When you create a public Basic load balancer using the portal, the **public IP address** is automatically configured as the load balancer's front end.</span></span>

<span data-ttu-id="a9af2-113">La configurazione del servizio di bilanciamento del carico include il **pool di indirizzi back-end**, che contiene gli indirizzi IP delle schede di interfaccia di rete virtuali di ogni VM che sono connesse al servizio di bilanciamento del carico e vengono usate per distribuire il traffico alle VM.</span><span class="sxs-lookup"><span data-stu-id="a9af2-113">Part of the configuration of the load balancer is the **backend address pool**, containing the IP addresses of each VM's virtual NICs that are connected to the load balancer and used to distribute traffic to the VMs.</span></span> 

### <a name="health-probe"></a><span data-ttu-id="a9af2-114">Probe di integrità</span><span class="sxs-lookup"><span data-stu-id="a9af2-114">Health probe</span></span>

<span data-ttu-id="a9af2-115">Il probe di integrità aggiunge o rimuove in modo dinamico le VM nella rotazione del servizio di bilanciamento del carico in base alla rispettiva risposta ai controlli di integrità.</span><span class="sxs-lookup"><span data-stu-id="a9af2-115">The health probe dynamically adds or removes VMs from the load balancer rotation based on their response to health checks.</span></span>
<span data-ttu-id="a9af2-116">Per impostazione predefinita, l'intervallo tra i tentativi di probe è di 15 secondi e una VM viene considerata non integra dopo due errori di probe consecutivi.</span><span class="sxs-lookup"><span data-stu-id="a9af2-116">By default, there are 15 seconds between probe attempts, and after two consecutive probe failures a VM is considered unhealthy.</span></span>

### <a name="rules"></a><span data-ttu-id="a9af2-117">Regole</span><span class="sxs-lookup"><span data-stu-id="a9af2-117">Rules</span></span>

<span data-ttu-id="a9af2-118">La regola del servizio di bilanciamento del carico specifica la porta su cui è in ascolto il front-end e la porta usata per inviare il traffico al back-end.</span><span class="sxs-lookup"><span data-stu-id="a9af2-118">The load balancer rule specifies the port that the frontend is listening on, and the port used to send traffic to the backend.</span></span>