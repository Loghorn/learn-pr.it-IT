<span data-ttu-id="74eb8-101">Ci sono molte piattaforme di comunicazione che consentono di migliorare l'affidabilità di un'applicazione distribuita, tra cui diverse in Azure.</span><span class="sxs-lookup"><span data-stu-id="74eb8-101">There are many communications platforms that can help improve the reliability of a distributed application, including several within Azure.</span></span> <span data-ttu-id="74eb8-102">Ognuno di questi strumenti svolge una funzione diversa. Verranno ora analizzati i singoli strumenti di Azure per aiutare a scegliere quello più appropriato.</span><span class="sxs-lookup"><span data-stu-id="74eb8-102">Each of these tools serves a different purpose; let's review each tool in Azure to help choose the right one.</span></span>

<span data-ttu-id="74eb8-103">L'architettura dell'applicazione per l'ordinazione di una pizza e il monitoraggio dell'ordine richiede diversi componenti: un sito Web, spazio di archiviazione dei dati, servizio back-end e così via. È possibile associare i componenti dell'applicazione tra loro in molti modi diversi e una singola applicazione può sfruttare i vantaggi di più tecniche.</span><span class="sxs-lookup"><span data-stu-id="74eb8-103">The architecture of our pizza ordering and tracking application requires several components: a website, data storage, back-end service, etc. We can bind the components of our application together in many different ways, and a single application can take advantage of multiple techniques.</span></span> 

<span data-ttu-id="74eb8-104">È necessario stabilire quali tecniche usare nell'applicazione Contoso Slices.</span><span class="sxs-lookup"><span data-stu-id="74eb8-104">We need to decide which techniques to use in the Contoso Slices application.</span></span> <span data-ttu-id="74eb8-105">Il primo passaggio consiste nel valutare ogni posizione in cui avviene una comunicazione tra più parti.</span><span class="sxs-lookup"><span data-stu-id="74eb8-105">The first step is to evaluate each place where there is communication between multiple parts.</span></span> <span data-ttu-id="74eb8-106">Alcuni componenti _devono_ venire eseguiti in modo tempestivo per il corretto funzionamento dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="74eb8-106">Some components _must_ run in a timely manner for our application to be doing its job at all.</span></span> <span data-ttu-id="74eb8-107">Altri componenti sono importanti ma non hanno requisiti di tempo critici.</span><span class="sxs-lookup"><span data-stu-id="74eb8-107">Some may be important, but not time-critical.</span></span> <span data-ttu-id="74eb8-108">Infine, altri componenti, ad esempio le notifiche dell'app per dispositivi mobili, possono essere facoltativi.</span><span class="sxs-lookup"><span data-stu-id="74eb8-108">Finally, other components, like our mobile app notifications, are a bit more optional.</span></span>

<span data-ttu-id="74eb8-109">In questo modulo si apprenderanno informazioni sulle piattaforme di comunicazione disponibili in Azure, in modo da poter scegliere quella più adatta per ogni requisito dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="74eb8-109">Here, you will learn about the communications platforms available in Azure, so that you can choose the right one for each requirement in your application.</span></span>

## <a name="decide-between-messages-and-events"></a><span data-ttu-id="74eb8-110">Scegliere tra messaggi ed eventi</span><span class="sxs-lookup"><span data-stu-id="74eb8-110">Decide between messages and events</span></span>

<span data-ttu-id="74eb8-111">Messaggi ed eventi sono entrambi **datagrammi**: pacchetti di dati inviati da un componente a un altro.</span><span class="sxs-lookup"><span data-stu-id="74eb8-111">Messages and events are both **datagrams**: packages of data sent from one component to another.</span></span> <span data-ttu-id="74eb8-112">Le differenze tra di essi a prima vista possono sembrare minime, ma possono determinare differenze significative nella progettazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="74eb8-112">They are different in ways that at first seem subtle, but can make significant differences in how you architect your application.</span></span>

### <a name="messages"></a><span data-ttu-id="74eb8-113">Messaggi</span><span class="sxs-lookup"><span data-stu-id="74eb8-113">Messages</span></span>

<span data-ttu-id="74eb8-114">Nella terminologia delle applicazioni distribuite, la caratteristica distintiva di un messaggio è il fatto che l'integrità complessiva dell'applicazione può basarsi sulla ricezione dei messaggi.</span><span class="sxs-lookup"><span data-stu-id="74eb8-114">In the terminology of distributed applications, the defining characteristic of a message is that the overall integrity of the application may rely on messages being received.</span></span> <span data-ttu-id="74eb8-115">È possibile pensare all'invio di un messaggio come un componente che passa il testimone di un flusso di lavoro a un altro componente.</span><span class="sxs-lookup"><span data-stu-id="74eb8-115">You can think of sending a message as one component passing the baton of a workflow to a different component.</span></span> <span data-ttu-id="74eb8-116">L'intero flusso di lavoro può essere un processo di business fondamentale e il messaggio è il cemento che tiene uniti i componenti.</span><span class="sxs-lookup"><span data-stu-id="74eb8-116">The entire workflow may be a vital business process, and the message is the mortar that holds the components together.</span></span>

<span data-ttu-id="74eb8-117">Un messaggio contiene in genere i dati stessi e non solo un riferimento (come un ID o un URL) ai dati.</span><span class="sxs-lookup"><span data-stu-id="74eb8-117">A message generally contains the data itself, not just a reference (like an ID or URL) to data.</span></span> <span data-ttu-id="74eb8-118">L'invio dei dati come parte del datagramma è meno fragile rispetto all'invio di un riferimento.</span><span class="sxs-lookup"><span data-stu-id="74eb8-118">Sending the data as part of the datagram is less brittle than sending a reference.</span></span> <span data-ttu-id="74eb8-119">L'architettura di messaggistica garantisce il recapito del messaggio e poiché non sono richieste ricerche aggiuntive, il messaggio viene gestito in modo affidabile.</span><span class="sxs-lookup"><span data-stu-id="74eb8-119">The messaging architecture guarantees delivery of the message, and because no additional lookups are required, the message is reliably handled.</span></span> <span data-ttu-id="74eb8-120">Tuttavia, l'applicazione mittente deve sapere esattamente quali dati includere, per evitare l'invio di troppi dati che comporterebbero un lavoro non necessario da parte del componente destinatario.</span><span class="sxs-lookup"><span data-stu-id="74eb8-120">However, the sending application needs to know exactly what data to include, to avoid sending too much data, which requires the receiving component to do unnecessary work.</span></span> <span data-ttu-id="74eb8-121">Da questo punto di vista, il mittente e il destinatario di un messaggio sono spesso collegati da un rigoroso contratto di dati.</span><span class="sxs-lookup"><span data-stu-id="74eb8-121">In this sense, the sender and receiver of a message are often coupled by a strict data contract.</span></span>

<span data-ttu-id="74eb8-122">Nella nuova architettura di Contoso Slices, quando viene immesso un ordine per una pizza, vengono probabilmente usati messaggi.</span><span class="sxs-lookup"><span data-stu-id="74eb8-122">In Contoso Slices new architecture, when a pizza order is entered, they would likely use messages.</span></span> <span data-ttu-id="74eb8-123">Il front-end Web o l'app per dispositivi mobili invia un messaggio ai componenti di elaborazione back-end.</span><span class="sxs-lookup"><span data-stu-id="74eb8-123">The web front end or mobile app would send a message to the back-end processing components.</span></span> <span data-ttu-id="74eb8-124">Nel back-end vengono eseguiti passaggi come l'instradamento al negozio vicino al cliente e l'addebito sulla carta di credito.</span><span class="sxs-lookup"><span data-stu-id="74eb8-124">In the back end, steps like routing to the store near the customer and charging the credit card would take place.</span></span>

### <a name="events"></a><span data-ttu-id="74eb8-125">Eventi</span><span class="sxs-lookup"><span data-stu-id="74eb8-125">Events</span></span>

<span data-ttu-id="74eb8-126">Un evento attiva una notifica indicante che si è verificato qualcosa.</span><span class="sxs-lookup"><span data-stu-id="74eb8-126">An event triggers notification that something has occurred.</span></span> <span data-ttu-id="74eb8-127">Gli eventi sono più "leggeri" rispetto ai messaggi e vengono più spesso usati per le comunicazioni broadcast.</span><span class="sxs-lookup"><span data-stu-id="74eb8-127">Events are "lighter" than messages and are most often used for broadcast communications.</span></span>

<span data-ttu-id="74eb8-128">Gli eventi hanno le caratteristiche seguenti:</span><span class="sxs-lookup"><span data-stu-id="74eb8-128">Events have the following characteristics:</span></span>

* <span data-ttu-id="74eb8-129">L'evento può essere inviato a più destinatari o a nessuno</span><span class="sxs-lookup"><span data-stu-id="74eb8-129">The event may be sent to multiple receivers, or to none at all</span></span>
* <span data-ttu-id="74eb8-130">Gli eventi sono spesso destinati a una distribuzione estesa, ovvero hanno un numero elevato di sottoscrittori per ogni origine di pubblicazione</span><span class="sxs-lookup"><span data-stu-id="74eb8-130">Events are often intended to "fan out," or have a large number of subscribers for each publisher</span></span>
* <span data-ttu-id="74eb8-131">Il componente di pubblicazione dell'evento non ha aspettative sull'azione eseguita da un componente destinatario</span><span class="sxs-lookup"><span data-stu-id="74eb8-131">The publisher of the event has no expectation about the action a receiving component takes</span></span>

<span data-ttu-id="74eb8-132">La catena di pizzerie userebbe probabilmente gli eventi per inviare notifiche agli utenti relative alle modifiche di stato.</span><span class="sxs-lookup"><span data-stu-id="74eb8-132">Our pizza chain would likely use events for notifications to users about status changes.</span></span> <span data-ttu-id="74eb8-133">Gli eventi di modifica dello stato possono essere inviati a Griglia di eventi di Azure, quindi a Funzioni di Azure e a Hub di notifica di Azure, per una soluzione completamente _serverless_.</span><span class="sxs-lookup"><span data-stu-id="74eb8-133">Status change events could be sent to Azure Event Grid, then on to Azure Functions, and to Azure Notification Hubs for a completely _serverless_ solution.</span></span>

<span data-ttu-id="74eb8-134">Questa differenza tra eventi e messaggi è fondamentale perché le piattaforme di comunicazione sono in genere progettate per gestire uno o l'altro elemento.</span><span class="sxs-lookup"><span data-stu-id="74eb8-134">This difference between events and messages is fundamental because communications platforms are generally designed to handle one or the other.</span></span> <span data-ttu-id="74eb8-135">Il bus di servizio è progettato per gestire i messaggi.</span><span class="sxs-lookup"><span data-stu-id="74eb8-135">Service Bus is designed to handle messages.</span></span> <span data-ttu-id="74eb8-136">Se si vuole inviare eventi, scegliere Griglia di eventi.</span><span class="sxs-lookup"><span data-stu-id="74eb8-136">If you want to send events, you would likely choose Event Grid.</span></span>

<span data-ttu-id="74eb8-137">Azure offre anche Hub eventi di Azure, che tuttavia viene usato più spesso per un tipo specifico di streaming con flusso elevato di comunicazioni in ambito di analisi.</span><span class="sxs-lookup"><span data-stu-id="74eb8-137">Azure also has Azure Event Hubs, but it is most often used for a specific type of high-flow stream of communications used for analytics.</span></span> <span data-ttu-id="74eb8-138">Se, ad esempio, i forni delle pizze avessero sensori connessi in rete, si potrebbe usare Hub eventi con Analisi di flusso di Azure per esaminare i modelli di variazione della temperatura che potrebbero indicare un incendio indesiderato o l'usura di un componente.</span><span class="sxs-lookup"><span data-stu-id="74eb8-138">For example, if we had networked sensors on our pizza ovens, we could use Event Hubs coupled with Azure Stream Analytics to watch for patterns in the temperature changes that might indicate an unwanted fire or component wear.</span></span>

## <a name="service-bus-topics-queues-and-relays"></a><span data-ttu-id="74eb8-139">Argomenti, code e inoltri del bus di servizio</span><span class="sxs-lookup"><span data-stu-id="74eb8-139">Service Bus topics, queues, and relays</span></span>

<span data-ttu-id="74eb8-140">Il bus di servizio di Azure è in grado di scambiare messaggi in tre modi diversi: code, argomenti e inoltri.</span><span class="sxs-lookup"><span data-stu-id="74eb8-140">Azure Service Bus can exchange messages in three different ways: queues, topics, and relays.</span></span>

### <a name="what-is-a-queue"></a><span data-ttu-id="74eb8-141">Che cos'è una coda?</span><span class="sxs-lookup"><span data-stu-id="74eb8-141">What is a queue?</span></span>

<span data-ttu-id="74eb8-142">Una **coda** è una semplice posizione di archiviazione temporanea per i messaggi.</span><span class="sxs-lookup"><span data-stu-id="74eb8-142">A **queue** is a simple temporary storage location for messages.</span></span> <span data-ttu-id="74eb8-143">Un componente mittente aggiunge un messaggio alla coda.</span><span class="sxs-lookup"><span data-stu-id="74eb8-143">A sending component adds a message to the queue.</span></span> <span data-ttu-id="74eb8-144">Un componente di destinazione preleva il messaggio all'inizio della coda.</span><span class="sxs-lookup"><span data-stu-id="74eb8-144">A destination component picks up the message at the front of the queue.</span></span> <span data-ttu-id="74eb8-145">In circostanze normali, ogni messaggio viene ricevuto da un solo destinatario.</span><span class="sxs-lookup"><span data-stu-id="74eb8-145">Under ordinary circumstances, each message is received by only one receiver.</span></span>

![Coda del bus di servizio di Azure](../media/2-service-bus-queue.png)

<span data-ttu-id="74eb8-147">Le code disaccoppiano i componenti di origine e di destinazione per isolare i componenti di destinazione in caso di domanda elevata.</span><span class="sxs-lookup"><span data-stu-id="74eb8-147">Queues decouple the source and destination components to insulate destination components from high demand.</span></span> 

<span data-ttu-id="74eb8-148">Durante i periodi di picco, i messaggi possono venire inviati a una velocità maggiore di quella con cui i componenti di destinazione possono gestirli.</span><span class="sxs-lookup"><span data-stu-id="74eb8-148">During peak times, messages may come in faster than destination components can handle them.</span></span> <span data-ttu-id="74eb8-149">Poiché i componenti di origine non hanno alcuna connessione diretta con la destinazione, ciò non ha alcun effetto sull'origine e la lunghezza della coda aumenta.</span><span class="sxs-lookup"><span data-stu-id="74eb8-149">Because source components have no direct connection to the destination, the source is unaffected and the queue will grow.</span></span> <span data-ttu-id="74eb8-150">I componenti di destinazione rimuoveranno i messaggi dalla coda man mano che sono in grado di gestirli.</span><span class="sxs-lookup"><span data-stu-id="74eb8-150">Destination components will remove messages from the queue as they are able to handle them.</span></span> <span data-ttu-id="74eb8-151">Quando la domanda diminuisce, i componenti di destinazione possono recuperare e la lunghezza della coda si riduce.</span><span class="sxs-lookup"><span data-stu-id="74eb8-151">When demand drops, destination components can catch up and the queue shortens.</span></span>

<span data-ttu-id="74eb8-152">Una coda risponde a una situazione di domanda elevata di questo tipo senza che sia necessario aggiungere risorse al sistema.</span><span class="sxs-lookup"><span data-stu-id="74eb8-152">A queue responds to high demand like this without needing to add resources to the system.</span></span> <span data-ttu-id="74eb8-153">Tuttavia, per i messaggi che devono essere gestiti in modo relativamente rapido, l'aggiunta di altre istanze del componente di destinazione può consentire la condivisione del carico.</span><span class="sxs-lookup"><span data-stu-id="74eb8-153">However, for messages that need to be handled relatively quickly, adding additional instances of your destination component can allow them to share the load.</span></span> <span data-ttu-id="74eb8-154">Ogni messaggio viene gestito da una sola istanza.</span><span class="sxs-lookup"><span data-stu-id="74eb8-154">Each message would be handled by only one instance.</span></span> <span data-ttu-id="74eb8-155">Si tratta di un metodo efficace per ridimensionare l'intera applicazione aggiungendo solo le risorse per i componenti che ne hanno effettivamente bisogno.</span><span class="sxs-lookup"><span data-stu-id="74eb8-155">This is an effective way to scale your entire application while only adding resources to the components that actually need it.</span></span>

### <a name="what-is-a-topic"></a><span data-ttu-id="74eb8-156">Che cos'è un argomento?</span><span class="sxs-lookup"><span data-stu-id="74eb8-156">What is a topic?</span></span>

<span data-ttu-id="74eb8-157">Un **argomento** è simile a una coda ma può avere più sottoscrizioni.</span><span class="sxs-lookup"><span data-stu-id="74eb8-157">A **topic** is similar to a queue but can have multiple subscriptions.</span></span> <span data-ttu-id="74eb8-158">Ciò significa che più componenti di destinazione possono sottoscrivere un singolo argomento, quindi ogni messaggio viene recapitato a più destinatari.</span><span class="sxs-lookup"><span data-stu-id="74eb8-158">This means that multiple destination components can subscribe to a single topic, so each message is delivered to multiple receivers.</span></span> <span data-ttu-id="74eb8-159">Le sottoscrizioni consentono anche di filtrare i messaggi nell'argomento per ricevere solo i messaggi rilevanti.</span><span class="sxs-lookup"><span data-stu-id="74eb8-159">Subscriptions can also filter the messages in the topic to receive only messages that are relevant.</span></span> <span data-ttu-id="74eb8-160">Le sottoscrizioni offrono le stesse comunicazioni disaccoppiate delle code e rispondono nello stesso modo in caso di domanda elevata.</span><span class="sxs-lookup"><span data-stu-id="74eb8-160">Subscriptions provide the same decoupled communications as queues and respond to high demand in the same way.</span></span> <span data-ttu-id="74eb8-161">Usare un argomento se si vuole che ogni messaggio venga recapitato a più di un componente di destinazione.</span><span class="sxs-lookup"><span data-stu-id="74eb8-161">Use a topic if you want each message to be delivered to more than one destination component.</span></span>

<span data-ttu-id="74eb8-162">Gli argomenti non sono supportati nel piano tariffario Basic.</span><span class="sxs-lookup"><span data-stu-id="74eb8-162">Topics are not supported in the Basic pricing tier.</span></span>

![Argomento del bus di servizio di Azure](../media/2-service-bus-topic.png)

### <a name="what-is-a-relay"></a><span data-ttu-id="74eb8-164">Che cos'è un inoltro?</span><span class="sxs-lookup"><span data-stu-id="74eb8-164">What is a relay?</span></span>

<span data-ttu-id="74eb8-165">Un **inoltro** è un oggetto che esegue una comunicazione sincrona bidirezionale tra applicazioni.</span><span class="sxs-lookup"><span data-stu-id="74eb8-165">A **relay** is an object that performs synchronous, two-way communication between applications.</span></span> <span data-ttu-id="74eb8-166">Non si tratta di una posizione di archiviazione temporanea per i messaggi come nel caso di code e argomenti.</span><span class="sxs-lookup"><span data-stu-id="74eb8-166">It is not a temporary storage location for messages like queues and topics.</span></span> <span data-ttu-id="74eb8-167">Fornisce invece connessioni bidirezionali senza memorizzazione nel buffer attraverso i limiti di rete, ad esempio i firewall.</span><span class="sxs-lookup"><span data-stu-id="74eb8-167">Instead, it provides bidirectional, unbuffered connections across network boundaries such as firewalls.</span></span> <span data-ttu-id="74eb8-168">Usare un inoltro per ottenere comunicazioni dirette tra i componenti, come se si trovassero nello stesso segmento di rete ma separati da dispositivi di sicurezza di rete.</span><span class="sxs-lookup"><span data-stu-id="74eb8-168">Use a relay when you want direct communications between components as if they were located on the same network segment but separated by network security devices.</span></span>

> [!NOTE]
> <span data-ttu-id="74eb8-169">Anche se gli inoltri fanno parte del bus di servizio di Azure, non implementano flussi di lavoro di messaggistica con accoppiamento debole e non vengono ulteriormente esaminati in questo modulo.</span><span class="sxs-lookup"><span data-stu-id="74eb8-169">Although relays are part of Azure Service Bus, they do not implement loosely coupled messaging workflows and are not considered further in this module.</span></span>

## <a name="service-bus-queues-and-storage-queues"></a><span data-ttu-id="74eb8-170">Code di archiviazione e code del bus di servizio</span><span class="sxs-lookup"><span data-stu-id="74eb8-170">Service Bus queues and storage queues</span></span>

<span data-ttu-id="74eb8-171">Ci sono due funzionalità di Azure che includono le code di messaggi: il bus di servizio e gli account di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="74eb8-171">There are two Azure features that include message queues: Service Bus and Azure Storage accounts.</span></span> <span data-ttu-id="74eb8-172">In generale, le code di archiviazione sono più semplici da usare ma sono meno sofisticate e flessibili rispetto alle code del bus di servizio.</span><span class="sxs-lookup"><span data-stu-id="74eb8-172">As a general guide, storage queues are simpler to use but are less sophisticated and flexible than Service Bus queues.</span></span>

<span data-ttu-id="74eb8-173">I principali vantaggi delle code del bus di servizio includono:</span><span class="sxs-lookup"><span data-stu-id="74eb8-173">Key advantages of Service Bus queues include:</span></span>

* <span data-ttu-id="74eb8-174">Sono supportati messaggi di dimensioni maggiori (256 KB per ogni messaggio rispetto a 64 KB)</span><span class="sxs-lookup"><span data-stu-id="74eb8-174">Supports larger messages size (256 KB per message versus 64 KB)</span></span>
* <span data-ttu-id="74eb8-175">Sono supportati sia il recapito di tipo At-Least-Once che quello di tipo At-Most-Once: è possibile scegliere tra una probabilità molto piccola che un messaggio vada perso o una probabilità molto piccola che venga gestito due volte</span><span class="sxs-lookup"><span data-stu-id="74eb8-175">Supports both at-least-once and at-most-once delivery - choose between a very small chance that a message is lost or a very small chance it is handled twice</span></span>
* <span data-ttu-id="74eb8-176">Viene garantito l'ordine **FIFO (First-In-First-Out)**: i messaggi vengono gestiti nello stesso ordine con cui vengono aggiunti (anche se l'ordine FIFO rappresenta il normale funzionamento di una coda, non è garantito per ogni messaggio)</span><span class="sxs-lookup"><span data-stu-id="74eb8-176">Guarantees **first-in-first-out (FIFO)** order - messages are handled in the same order they are added (although FIFO is the normal operation of a queue, it is not guaranteed for every message)</span></span>
* <span data-ttu-id="74eb8-177">È possibile raggruppare più messaggi in una transazione: se un messaggio nella transazione non viene recapitato, non vengono recapitati nemmeno gli altri messaggi nella transazione</span><span class="sxs-lookup"><span data-stu-id="74eb8-177">Can group multiple messages into a transaction - if one message in the transaction fails to be delivered, all messages in the transaction will not be delivered</span></span>
* <span data-ttu-id="74eb8-178">È supportata la sicurezza basata sui ruoli</span><span class="sxs-lookup"><span data-stu-id="74eb8-178">Supports role-based security</span></span>
* <span data-ttu-id="74eb8-179">Non è necessario che i componenti di destinazione eseguano continuamente il polling della coda</span><span class="sxs-lookup"><span data-stu-id="74eb8-179">Does not require destination components to continuously poll the queue</span></span>

<span data-ttu-id="74eb8-180">Vantaggi delle code di archiviazione:</span><span class="sxs-lookup"><span data-stu-id="74eb8-180">Advantages of storage queues:</span></span>

* <span data-ttu-id="74eb8-181">Non ci sono limiti per le dimensioni delle code (rispetto al limite di 80 GB per le code del bus di servizio)</span><span class="sxs-lookup"><span data-stu-id="74eb8-181">Supports unlimited queue size (versus 80-GB limit for Service Bus queues)</span></span>
* <span data-ttu-id="74eb8-182">Viene conservato un log di tutti i messaggi</span><span class="sxs-lookup"><span data-stu-id="74eb8-182">Maintains a log of all messages</span></span>

## <a name="how-to-choose-a-communications-technology"></a><span data-ttu-id="74eb8-183">Come scegliere una tecnologia di comunicazione</span><span class="sxs-lookup"><span data-stu-id="74eb8-183">How to choose a communications technology</span></span>

<span data-ttu-id="74eb8-184">Sono stati analizzati i diversi concetti e le implementazioni offerte da Azure.</span><span class="sxs-lookup"><span data-stu-id="74eb8-184">We've seen the different concepts and the implementations Azure provides.</span></span> <span data-ttu-id="74eb8-185">Verrà ora esaminato il processo decisionale per ognuna delle comunicazioni.</span><span class="sxs-lookup"><span data-stu-id="74eb8-185">Let's discuss what our decision process should look like for each of our communications.</span></span>

#### <a name="consider-the-following-questions"></a><span data-ttu-id="74eb8-186">Prendere in considerazione le domande seguenti:</span><span class="sxs-lookup"><span data-stu-id="74eb8-186">Consider the following questions:</span></span>

1. <span data-ttu-id="74eb8-187">La comunicazione è un evento?</span><span class="sxs-lookup"><span data-stu-id="74eb8-187">Is the communication an event?</span></span> <span data-ttu-id="74eb8-188">In tal caso, usare Griglia di eventi o Hub eventi.</span><span class="sxs-lookup"><span data-stu-id="74eb8-188">If so, consider using Event Grid or Event Hubs.</span></span>

1. <span data-ttu-id="74eb8-189">Un singolo messaggio deve essere recapitato a più di una destinazione?</span><span class="sxs-lookup"><span data-stu-id="74eb8-189">Should a single message be delivered to more than one destination?</span></span> <span data-ttu-id="74eb8-190">In tal caso, usare un argomento del bus di servizio.</span><span class="sxs-lookup"><span data-stu-id="74eb8-190">If so, use a Service Bus topic.</span></span> <span data-ttu-id="74eb8-191">In caso contrario, usare una coda.</span><span class="sxs-lookup"><span data-stu-id="74eb8-191">Otherwise, use a queue.</span></span>

<span data-ttu-id="74eb8-192">Se si decide che è necessaria una coda:</span><span class="sxs-lookup"><span data-stu-id="74eb8-192">If you decide that you need a queue:</span></span>

#### <a name="choose-service-bus-queues-if"></a><span data-ttu-id="74eb8-193">Scegliere le code del bus di servizio se:</span><span class="sxs-lookup"><span data-stu-id="74eb8-193">Choose Service Bus queues if:</span></span>

* <span data-ttu-id="74eb8-194">È necessaria una garanzia di recapito At-Most-Once</span><span class="sxs-lookup"><span data-stu-id="74eb8-194">You need an at-most-once delivery guarantee</span></span>
* <span data-ttu-id="74eb8-195">È necessaria una garanzia FIFO</span><span class="sxs-lookup"><span data-stu-id="74eb8-195">You need a FIFO guarantee</span></span>
* <span data-ttu-id="74eb8-196">È necessario raggruppare i messaggi in transazioni</span><span class="sxs-lookup"><span data-stu-id="74eb8-196">You need to group messages into transactions</span></span>
* <span data-ttu-id="74eb8-197">Si vuole ricevere i messaggi senza eseguire il polling della coda</span><span class="sxs-lookup"><span data-stu-id="74eb8-197">You want to receive messages without polling the queue</span></span>
* <span data-ttu-id="74eb8-198">È necessario fornire accesso basato sui ruoli alle code</span><span class="sxs-lookup"><span data-stu-id="74eb8-198">You need to provide role-based access to the queues</span></span>
* <span data-ttu-id="74eb8-199">È necessario gestire messaggi di dimensioni superiori a 64 KB, ma inferiori a 256 KB</span><span class="sxs-lookup"><span data-stu-id="74eb8-199">You need to handle messages larger than 64 KB but smaller than 256 KB</span></span>
* <span data-ttu-id="74eb8-200">Le dimensioni della coda non supereranno gli 80 GB</span><span class="sxs-lookup"><span data-stu-id="74eb8-200">Your queue size will not grow larger than 80 GB</span></span>
* <span data-ttu-id="74eb8-201">Si vuole poter pubblicare e usare batch di messaggi</span><span class="sxs-lookup"><span data-stu-id="74eb8-201">You would like to be able to publish and consume batches of messages</span></span>

#### <a name="choose-queue-storage-if"></a><span data-ttu-id="74eb8-202">Scegliere l'archivio code se:</span><span class="sxs-lookup"><span data-stu-id="74eb8-202">Choose queue storage if:</span></span>

* <span data-ttu-id="74eb8-203">È necessaria una coda semplice senza particolari requisiti aggiuntivi</span><span class="sxs-lookup"><span data-stu-id="74eb8-203">You need a simple queue with no particular additional requirements</span></span>
* <span data-ttu-id="74eb8-204">È necessario un audit trail di tutti i messaggi che passano attraverso la coda</span><span class="sxs-lookup"><span data-stu-id="74eb8-204">You need an audit trail of all messages that pass through the queue</span></span>
* <span data-ttu-id="74eb8-205">Si prevede che le dimensioni della coda possano superare gli 80 GB</span><span class="sxs-lookup"><span data-stu-id="74eb8-205">You expect the queue to exceed 80 GB in size</span></span>
* <span data-ttu-id="74eb8-206">Si vuole tenere traccia dello stato di elaborazione di un messaggio all'interno della coda</span><span class="sxs-lookup"><span data-stu-id="74eb8-206">You want to track progress for processing a message inside of the queue</span></span>

<span data-ttu-id="74eb8-207">Anche se i componenti di un'applicazione distribuita possono comunicare direttamente, è spesso possibile migliorare l'affidabilità delle comunicazioni usando una piattaforma di comunicazione intermedia come Griglia di eventi Di Azure o il bus di servizio di Azure.</span><span class="sxs-lookup"><span data-stu-id="74eb8-207">Although the components of a distributed application can communicate directly, you can often increase the reliability of that communication by using an intermediate communication platform such as Azure Service Bus or Azure Event Grid.</span></span>

<span data-ttu-id="74eb8-208">Griglia di eventi è una soluzione progettata per gli eventi, che invia una notifica ai destinatari solo per un evento e non contiene i dati non elaborati associati all'evento.</span><span class="sxs-lookup"><span data-stu-id="74eb8-208">Event Grid is designed for events, which notify recipients only of an event and do not contain the raw data associated with that event.</span></span> <span data-ttu-id="74eb8-209">Hub eventi di Azure è progettato per tipi di eventi di analisi con un flusso elevato.</span><span class="sxs-lookup"><span data-stu-id="74eb8-209">Azure Event Hubs is designed for high-flow analytics types of events.</span></span> <span data-ttu-id="74eb8-210">Le code di archiviazione e del bus di servizio di Azure sono destinate ai messaggi e possono essere usate per associare le parti principali del flusso di lavoro di un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="74eb8-210">Azure Service Bus and storage queues are for messages, which can be used for binding the core pieces of any application workflow.</span></span>

<span data-ttu-id="74eb8-211">Se i requisiti sono semplici, se si vuole inviare ogni messaggio solo a una destinazione o se si vuole scrivere codice il più rapidamente possibile, una coda di archiviazione può rappresentare la scelta migliore.</span><span class="sxs-lookup"><span data-stu-id="74eb8-211">If your requirements are simple, if you want to send each message to only one destination, or if you want to write code as quickly as possible, a storage queue may be the best option.</span></span> <span data-ttu-id="74eb8-212">In caso contrario, le code del bus di servizio offrono molte più opzioni e flessibilità.</span><span class="sxs-lookup"><span data-stu-id="74eb8-212">Otherwise, Service Bus queues provide many more options and flexibility.</span></span>

<span data-ttu-id="74eb8-213">Se si vuole inviare messaggi a più sottoscrittori, usare un argomento del bus di servizio.</span><span class="sxs-lookup"><span data-stu-id="74eb8-213">If you want to send messages to multiple subscribers, use a Service Bus topic.</span></span>
