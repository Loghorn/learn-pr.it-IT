<span data-ttu-id="d7f26-101">Tenere presente che l'obiettivo è spostare un server Linux esistente che esegue Apache in Azure.</span><span class="sxs-lookup"><span data-stu-id="d7f26-101">Recall that our goal is to move an existing Linux server running Apache to Azure.</span></span> <span data-ttu-id="d7f26-102">Per iniziare verrà creato un server Ubuntu Linux.</span><span class="sxs-lookup"><span data-stu-id="d7f26-102">We'll start by creating an Ubuntu Linux server.</span></span>

## <a name="create-a-new-linux-virtual-machine"></a><span data-ttu-id="d7f26-103">Creare una nuova macchina virtuale Linux</span><span class="sxs-lookup"><span data-stu-id="d7f26-103">Create a new Linux virtual machine</span></span>

<span data-ttu-id="d7f26-104">È possibile creare macchine virtuali Linux con il portale di Azure, l'interfaccia della riga di comando di Azure o Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="d7f26-104">We can create Linux VMs with the Azure portal, Azure CLI, or Azure PowerShell.</span></span> <span data-ttu-id="d7f26-105">L'approccio più semplice quando si inizia a usare Azure prevede l'uso del portale, perché richiede le informazioni necessarie in sequenza e fornisce suggerimenti e messaggi utili durante la creazione.</span><span class="sxs-lookup"><span data-stu-id="d7f26-105">The easiest approach when you are starting with Azure is to use the portal because it walks you through the required information and provides hints and helpful messages during the creation.</span></span>

1. <span data-ttu-id="d7f26-106">Accedere al [portale di Azure](https://portal.azure.com?azure-portal=true).</span><span class="sxs-lookup"><span data-stu-id="d7f26-106">Sign into the [Azure portal](https://portal.azure.com?azure-portal=true).</span></span>

1. <span data-ttu-id="d7f26-107">Fare clic su **Crea una risorsa** nell'angolo in alto a sinistra del portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="d7f26-107">Click **Create a resource** in the upper left corner of the Azure portal.</span></span>

1. <span data-ttu-id="d7f26-108">Nella casella di ricerca immettere **Ubuntu Server** per visualizzare le diverse versioni disponibili.</span><span class="sxs-lookup"><span data-stu-id="d7f26-108">In the search box, enter  **Ubuntu Server** to see the different versions available.</span></span> <span data-ttu-id="d7f26-109">Selezionare **Ubuntu Server 18.04** nell'elenco presentato.</span><span class="sxs-lookup"><span data-stu-id="d7f26-109">Select **Ubuntu Server 18.04** from the presented list.</span></span>

1. <span data-ttu-id="d7f26-110">Fare clic sul pulsante **Crea** per avviare la configurazione della macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="d7f26-110">Click the **Create** button to start configuring the VM.</span></span>

## <a name="configure-the-vm-settings"></a><span data-ttu-id="d7f26-111">Configurare le impostazioni della macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="d7f26-111">Configure the VM settings</span></span>

<span data-ttu-id="d7f26-112">L'esperienza di creazione della macchina virtuale nel portale viene presentata sotto forma di "procedura guidata", che offre tutte le informazioni dettagliate necessarie per le aree di configurazione della macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="d7f26-112">The VM creation experience in the portal is presented in a "wizard" format to walk you through all the configuration areas for the VM.</span></span> <span data-ttu-id="d7f26-113">Facendo clic sul pulsante "Avanti" si passerà alla sezione configurabile successiva.</span><span class="sxs-lookup"><span data-stu-id="d7f26-113">Clicking the "Next" button will take you to the next configurable section.</span></span> <span data-ttu-id="d7f26-114">È comunque possibile spostarsi tra le sezioni nel modo preferito usando le schede nella parte superiore che identificano ogni parte.</span><span class="sxs-lookup"><span data-stu-id="d7f26-114">However, you can move between the sections at will with the tabs running across the top that identify each part.</span></span>

![Creare una macchina virtuale nel portale di Azure](../media-drafts/3-azure-portal-create-vm.png)

<span data-ttu-id="d7f26-116">Dopo aver compilato tutte le opzioni obbligatorie (identificate con asterischi rossi), è possibile ignorare il resto della procedura guidata e iniziare a creare la macchina virtuale tramite il pulsante **Rivedi e crea** nella parte inferiore.</span><span class="sxs-lookup"><span data-stu-id="d7f26-116">Once you fill in all the required options (identified with red stars), you can skip the remainder of the wizard experience and start creating the VM through the **Review + Create** button at the bottom.</span></span>

<span data-ttu-id="d7f26-117">Si inizierà con la sezione **Informazioni di base**.</span><span class="sxs-lookup"><span data-stu-id="d7f26-117">We'll start with the **Basics** section.</span></span>

### <a name="configure-basic-vm-settings"></a><span data-ttu-id="d7f26-118">Configurare le impostazioni di base della macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="d7f26-118">Configure basic VM settings</span></span>

1. <span data-ttu-id="d7f26-119">Selezionare la **sottoscrizione** per cui devono essere fatturate le ore della macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="d7f26-119">Select the **Subscription** that should be billed for VM hours.</span></span>

1. <span data-ttu-id="d7f26-120">In **Gruppo di risorse** selezionare **Crea nuovo** e assegnare al gruppo di risorse il nome **ExerciseResources**.</span><span class="sxs-lookup"><span data-stu-id="d7f26-120">For **Resource group**, select **Create new** and give the resource group the name **ExerciseResources**.</span></span>

> [!NOTE]
> <span data-ttu-id="d7f26-121">Quando si cambiano le impostazioni e si esce da ogni campo, Azure convaliderà automaticamente ogni valore e visualizzerà un segno di spunta verde accanto se è corretto.</span><span class="sxs-lookup"><span data-stu-id="d7f26-121">As you change settings and tab out of each field Azure will validate each value automatically and place a green check-mark next to it when it's good.</span></span> <span data-ttu-id="d7f26-122">È possibile passare il mouse sopra gli indicatori di errore per ottenere altre informazioni sui problemi individuati.</span><span class="sxs-lookup"><span data-stu-id="d7f26-122">You can hover over error indicators to get more information on issues it discovers.</span></span>

1. <span data-ttu-id="d7f26-123">Nella sezione **Dettagli istanza** immettere un nome per la macchina virtuale del server Web, ad esempio "test-web-eus-vm1".</span><span class="sxs-lookup"><span data-stu-id="d7f26-123">In the **INSTANCE DETAILS** section, enter a name for your web server VM, such as "test-web-eus-vm1".</span></span> <span data-ttu-id="d7f26-124">Questo nome indica l'ambiente ("test"), il ruolo ("web"), la località ("eus" ossia Stati Uniti orientali), il servizio ("vm") e il numero di istanza ("1").</span><span class="sxs-lookup"><span data-stu-id="d7f26-124">This indicates the environment ("test"), the role ("web"), location ("East US"), service ("vm"), and instance number ("1").</span></span>
    - <span data-ttu-id="d7f26-125">È consigliabile standardizzare i nomi delle risorse in modo da poterne identificare rapidamente lo scopo.</span><span class="sxs-lookup"><span data-stu-id="d7f26-125">It's best practice to standardize your resource names so you can quickly identify their purpose.</span></span> <span data-ttu-id="d7f26-126">I nomi di macchine virtuali Linux devono avere una lunghezza compresa tra 1 e 64 caratteri ed essere composti da numeri, lettere e trattini.</span><span class="sxs-lookup"><span data-stu-id="d7f26-126">Linux VM names must be between 1 and 64 characters and be comprised of numbers, letters, and dashes.</span></span>

1. <span data-ttu-id="d7f26-127">Selezionare un'area vicina. Per l'esempio è stata scelta l'area Stati Uniti orientali.</span><span class="sxs-lookup"><span data-stu-id="d7f26-127">Select a region close to you; we've chosen East US.</span></span>

1. <span data-ttu-id="d7f26-128">Lasciare **Availability options** (Opzioni di disponibilità) impostato su "Nessuno".</span><span class="sxs-lookup"><span data-stu-id="d7f26-128">Leave **Availability options** as "None".</span></span> <span data-ttu-id="d7f26-129">Questa opzione viene usata per assicurarsi che la macchina virtuale sia a disponibilità elevata mediante il raggruppamento di più macchine virtuali tra loro in un set per gestire gli eventi di manutenzione pianificata o non pianificata oppure le interruzioni.</span><span class="sxs-lookup"><span data-stu-id="d7f26-129">This option is used to ensure the VM is highly available by grouping multiple VMs together a set to deal with planned or unplanned maintenance events or outages.</span></span>

1. <span data-ttu-id="d7f26-130">Verificare che l'immagine sia impostata su "Ubuntu Server 18.04 LTS".</span><span class="sxs-lookup"><span data-stu-id="d7f26-130">Ensure the image is set to "Ubuntu Server 18.04 LTS".</span></span> <span data-ttu-id="d7f26-131">È possibile aprire l'elenco a discesa per vedere tutte le opzioni disponibili.</span><span class="sxs-lookup"><span data-stu-id="d7f26-131">You can open the drop-down list to see all the options available.</span></span>

1. <span data-ttu-id="d7f26-132">Il campo **Dimensioni** non è direttamente modificabile ed è impostato sulla dimensione predefinita **DS2_v3**, che è una delle selezioni di calcolo per l'utilizzo generico.</span><span class="sxs-lookup"><span data-stu-id="d7f26-132">The **Size** field is not directly editable and has a **DS2_v3** default size which is one of the General purpose computing selections.</span></span> <span data-ttu-id="d7f26-133">Questa scelta è perfetta per un server Web pubblico, ma fare clic sul collegamento **Modifica dimensioni** per esplorare altre dimensioni di macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="d7f26-133">This choice is perfect for a public web server, but click the **Change size** link to explore other VM sizes.</span></span> <span data-ttu-id="d7f26-134">Nella finestra di dialogo risultante è possibile filtrare in base al numero di CPU, al nome e al tipo di disco.</span><span class="sxs-lookup"><span data-stu-id="d7f26-134">The resulting dialog allows you to filter based on # of CPUs, Name, and Disk Type.</span></span> <span data-ttu-id="d7f26-135">Selezionare di nuovo **DS2_v3** che include due vCPU con 8 GB di RAM.</span><span class="sxs-lookup"><span data-stu-id="d7f26-135">Select the same **DS2_v3** choice which gives you two vCPUs with 8 GB of RAM.</span></span>

    > [!TIP]
    > <span data-ttu-id="d7f26-136">È anche possibile far scorrere la visualizzazione verso sinistra per tornare alle impostazioni della macchina virtuale, dato che è stata aperta una nuova finestra a destra, e fare scorrere la finestra per visualizzarla.</span><span class="sxs-lookup"><span data-stu-id="d7f26-136">You can also slide the view to the left to get back to the VM settings as it opened a new window off to the right and slid the window over to view it.</span></span>

1. <span data-ttu-id="d7f26-137">Nella sezione **Accesso amministratore** selezionare l'opzione per la chiave pubblica SSH in **Tipo di autenticazione**.</span><span class="sxs-lookup"><span data-stu-id="d7f26-137">In the **ADMINISTRATOR ACCESS** section, select the SSH public key option for **Authentication type**.</span></span>

1. <span data-ttu-id="d7f26-138">Immettere un **nomeutente** che verrà usato per accedere con SSH.</span><span class="sxs-lookup"><span data-stu-id="d7f26-138">Enter a **username** you'll use to sign in with SSH.</span></span>

1. <span data-ttu-id="d7f26-139">Copiare la chiave SSH dal file di chiave pubblica e incollarla nel campo **Chiave pubblica SSH**.</span><span class="sxs-lookup"><span data-stu-id="d7f26-139">Copy the SSH key from your public key file and paste it into the **SSH public key** field.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="d7f26-140">Quando si copia la chiave pubblica nel portale di Azure, assicurarsi di non aggiungere spazi o caratteri di avanzamento riga.</span><span class="sxs-lookup"><span data-stu-id="d7f26-140">When you copy the public key into the Azure portal, make sure not to add any additional whitespace or linefeed characters.</span></span>

1. <span data-ttu-id="d7f26-141">Nella sezione **Regole porta in ingresso** aprire l'elenco e _deselezionare_ "Nessuna".</span><span class="sxs-lookup"><span data-stu-id="d7f26-141">In the **INBOUND PORT RULES** section, open the list and _uncheck_ "None".</span></span> <span data-ttu-id="d7f26-142">Trattandosi di una macchina virtuale Linux, è necessario avere la possibilità di accedere alla macchina virtuale con SSH da remoto.</span><span class="sxs-lookup"><span data-stu-id="d7f26-142">Since this is a Linux VM, we want to be able to access the VM using SSH remotely.</span></span> <span data-ttu-id="d7f26-143">Scorrere l'elenco, se necessario, fino a individuare ssh (22) e selezionare questa opzione.</span><span class="sxs-lookup"><span data-stu-id="d7f26-143">Scroll the list if necessary until you find ssh (22) and select it.</span></span> <span data-ttu-id="d7f26-144">Come indicato nella nota nell'interfaccia utente, è anche possibile modificare le porte di rete dopo aver creato la macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="d7f26-144">As the note in the UI indicates, we can also adjust the network ports after we create the VM.</span></span>

    ![Aprire la porta per l'accesso SSH nella macchina virtuale Linux](../media-drafts/3-open-ports.png)

## <a name="configure-disks-for-the-vm"></a><span data-ttu-id="d7f26-146">Configurare i dischi per la macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="d7f26-146">Configure Disks for the VM</span></span>

1. <span data-ttu-id="d7f26-147">Fare clic su **Avanti** per passare alla sezione Dischi.</span><span class="sxs-lookup"><span data-stu-id="d7f26-147">Click **Next** to move to the Disks section.</span></span>

    ![Configurare i dischi per la macchina virtuale](../media-drafts/3-configure-disks.png)

1. <span data-ttu-id="d7f26-149">Scegliere "SSD Premium" per **Tipo di disco del sistema operativo**.</span><span class="sxs-lookup"><span data-stu-id="d7f26-149">Choose "Premium SSD" for the **OS disk type**.</span></span>

1. <span data-ttu-id="d7f26-150">Si useranno dischi gestiti per evitare di dover utilizzare account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="d7f26-150">Use managed disks, so we don't have to work with storage accounts.</span></span> <span data-ttu-id="d7f26-151">Se lo si desidera, è possibile modificare l'opzione nella GUI per visualizzare le differenze per le informazioni richieste da Azure.</span><span class="sxs-lookup"><span data-stu-id="d7f26-151">You can flip the switch in the GUI to see the difference in information that Azure needs if you like.</span></span>

### <a name="create-a-data-disk"></a><span data-ttu-id="d7f26-152">Creare un disco dati</span><span class="sxs-lookup"><span data-stu-id="d7f26-152">Create a data disk</span></span>

<span data-ttu-id="d7f26-153">È importante ricordare che si otterranno un disco del sistema operativo (dev/sda) e un disco temporaneo (dev/sdb).</span><span class="sxs-lookup"><span data-stu-id="d7f26-153">Recall we will get an OS disk (/dev/sda) and Temporary disk (/dev/sdb).</span></span> <span data-ttu-id="d7f26-154">Aggiungere anche un disco dati.</span><span class="sxs-lookup"><span data-stu-id="d7f26-154">Let's add a data disk as well.</span></span>

1. <span data-ttu-id="d7f26-155">Fare clic sul collegamento **Create and attach a new disk** (Crea e collega un nuovo disco) nella sezione **Dischi dati**.</span><span class="sxs-lookup"><span data-stu-id="d7f26-155">Click the **Create and attach a new disk** link in the **DATA DISKS** section.</span></span>

    ![Creare un disco dati per la macchina virtuale nel portale](../media-drafts/3-add-data-disk.png)

1. <span data-ttu-id="d7f26-157">È possibile accettare tutte le impostazioni predefinite: SSD Premium, 1023 GB e Nessuno (disco vuoto). Si noti, tuttavia, che questa è la posizione in cui si potrebbe usare uno snapshot o un BLOB di archiviazione per creare un disco rigido virtuale.</span><span class="sxs-lookup"><span data-stu-id="d7f26-157">You can take all the defaults: Premium SSD, 1023 GB, and None (empty disk); although notice that here is where we could use a snapshot, or Storage Blob to create a VHD.</span></span>

1. <span data-ttu-id="d7f26-158">Fare clic su **OK** per creare il disco e tornare alla sezione **DISCHI DATI**.</span><span class="sxs-lookup"><span data-stu-id="d7f26-158">Click **OK** to create the disk and go back to the **DATA DISKS** section.</span></span>

1. <span data-ttu-id="d7f26-159">A questo punto, nella prima riga sarà presente un nuovo disco.</span><span class="sxs-lookup"><span data-stu-id="d7f26-159">There should now be a new disk in the first row.</span></span>

    ![Nuovo disco nella macchina virtuale](../media-drafts/3-new-disk.png)

## <a name="configure-the-network"></a><span data-ttu-id="d7f26-161">Configurare la rete</span><span class="sxs-lookup"><span data-stu-id="d7f26-161">Configure the Network</span></span>

1. <span data-ttu-id="d7f26-162">Fare clic su **Avanti** per passare alla sezione Rete.</span><span class="sxs-lookup"><span data-stu-id="d7f26-162">Click **Next** to move to the Networking section.</span></span>

1. <span data-ttu-id="d7f26-163">In un sistema di produzione in cui sono già presenti altri componenti è consigliabile usare una rete virtuale _esistente_.</span><span class="sxs-lookup"><span data-stu-id="d7f26-163">In a production system where we already have other components, we'd want to utilize an _existing_ virtual network.</span></span> <span data-ttu-id="d7f26-164">In questo modo, la macchina virtuale può comunicare con altri servizi cloud nella soluzione.</span><span class="sxs-lookup"><span data-stu-id="d7f26-164">That way our VM can communicate with the other cloud services in our solution.</span></span> <span data-ttu-id="d7f26-165">Se non è già stata definita una rete virtuale per questa località, è possibile crearla e configurare gli elementi seguenti:</span><span class="sxs-lookup"><span data-stu-id="d7f26-165">If there isn't one defined in this location yet, we can create it here and configure the:</span></span>
    - <span data-ttu-id="d7f26-166">**Spazio di indirizzi**: spazio IPV4 complessivo disponibile per questa rete.</span><span class="sxs-lookup"><span data-stu-id="d7f26-166">**Address space**: the overall IPV4 space available to this network.</span></span>
    - <span data-ttu-id="d7f26-167">**Intervallo di subnet**: la prima subnet per suddividere lo spazio di indirizzi. Deve rientrare nello spazio di indirizzi definito.</span><span class="sxs-lookup"><span data-stu-id="d7f26-167">**Subnet range**: the first subnet to subdivide the address space - it must fit within the defined address space.</span></span> <span data-ttu-id="d7f26-168">Dopo aver creato la rete virtuale, è possibile aggiungere altre subnet.</span><span class="sxs-lookup"><span data-stu-id="d7f26-168">Once the VNet is created, you can add additional subnets.</span></span>

> [!NOTE]
> <span data-ttu-id="d7f26-169">Per impostazione predefinita, Azure creerà una rete virtuale, l'interfaccia di rete e l'indirizzo IP pubblico per la macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="d7f26-169">By default, Azure will create a virtual network, network interface, and public IP for your VM.</span></span> <span data-ttu-id="d7f26-170">Poiché non è facile modificare le opzioni di rete dopo aver creato la macchina virtuale, controllare sempre con attenzione le assegnazioni di rete per i servizi creati in Azure.</span><span class="sxs-lookup"><span data-stu-id="d7f26-170">It's not trivial to change the networking options after the VM has been created so always double-check the network assignments on services you create in Azure.</span></span>

## <a name="finish-configuring-the-vm-and-create-the-image"></a><span data-ttu-id="d7f26-171">Completare la configurazione della macchina virtuale e creare l'immagine</span><span class="sxs-lookup"><span data-stu-id="d7f26-171">Finish configuring the VM and create the image</span></span>

<span data-ttu-id="d7f26-172">Le opzioni rimanenti hanno impostazioni predefinite ragionevoli che non è necessario modificare.</span><span class="sxs-lookup"><span data-stu-id="d7f26-172">The rest of the options have reasonable defaults, and there's no need to change any of them.</span></span> <span data-ttu-id="d7f26-173">Se lo si desidera, è possibile esplorare le altre schede.</span><span class="sxs-lookup"><span data-stu-id="d7f26-173">You can explore the other tabs if you like.</span></span> <span data-ttu-id="d7f26-174">Accanto alle singole opzioni è disponibile un'icona `(i)` che permette di visualizzare una finestra della Guida con una spiegazione dell'opzione.</span><span class="sxs-lookup"><span data-stu-id="d7f26-174">The individual options have an `(i)` icon next to them that will show a help bubble to explain the option.</span></span> <span data-ttu-id="d7f26-175">Questo è un ottimo modo per ottenere informazioni sulle varie opzioni che è possibile usare per configurare la macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="d7f26-175">This is a great way to learn about the various options you can use to configure the VM.</span></span>

1. <span data-ttu-id="d7f26-176">Fare clic sul pulsante **Rivedi e crea** nella parte inferiore del pannello.</span><span class="sxs-lookup"><span data-stu-id="d7f26-176">Click the **Review + create** button at the bottom of the panel.</span></span>

1. <span data-ttu-id="d7f26-177">Il sistema convaliderà le opzioni e fornirà informazioni dettagliate sulla macchina virtuale in fase di creazione.</span><span class="sxs-lookup"><span data-stu-id="d7f26-177">The system will validate your options and give you details about the VM being created.</span></span>

1. <span data-ttu-id="d7f26-178">Fare clic su **Crea** per creare e distribuire la macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="d7f26-178">Click **Create** to create and deploy the VM.</span></span> <span data-ttu-id="d7f26-179">Il dashboard di Azure mostrerà la macchina virtuale da distribuire.</span><span class="sxs-lookup"><span data-stu-id="d7f26-179">The Azure dashboard will show the VM that's being deployed.</span></span> <span data-ttu-id="d7f26-180">Questa operazione può richiedere alcuni minuti.</span><span class="sxs-lookup"><span data-stu-id="d7f26-180">This may take several minutes.</span></span>

<span data-ttu-id="d7f26-181">Durante la distribuzione, si esaminerà che cosa si può fare con questa macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="d7f26-181">While that's deploying, let's look at what we can do with this VM.</span></span>