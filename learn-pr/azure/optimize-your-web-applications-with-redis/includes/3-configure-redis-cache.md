<span data-ttu-id="9f897-101">Il team di sviluppo dell'app per le statistiche sportive ha deciso che la memorizzazione nella cache potrebbe migliorare notevolmente le prestazioni per i dati richiesti di recente.</span><span class="sxs-lookup"><span data-stu-id="9f897-101">Your sports statistics development team has decided that caching could dramatically improve performance for recently requested data.</span></span> <span data-ttu-id="9f897-102">Il passaggio successivo consiste nel creare e configurare un'istanza di Cache Redis di Azure.</span><span class="sxs-lookup"><span data-stu-id="9f897-102">Your next step is to create and configure an Azure Redis Cache instance.</span></span>

### <a name="create-and-configure-the-azure-redis-cache-instance"></a><span data-ttu-id="9f897-103">Creare e configurare l'istanza di Cache Redis di Azure</span><span class="sxs-lookup"><span data-stu-id="9f897-103">Create and configure the Azure Redis Cache instance</span></span>

1. <span data-ttu-id="9f897-104">È possibile aggiungere un'istanza di Cache Redis di Azure dalle risorse del database nel portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="9f897-104">You can add an Azure Redis Cache instance from the database resources in the Azure portal.</span></span>

1. <span data-ttu-id="9f897-105">Specificare un nome globalmente univoco.</span><span class="sxs-lookup"><span data-stu-id="9f897-105">Provide a globally unique name.</span></span> <span data-ttu-id="9f897-106">Il nome deve essere una stringa contenente da 1 a 63 caratteri che possono includere solo numeri, lettere e il carattere '-'.</span><span class="sxs-lookup"><span data-stu-id="9f897-106">The name must be a string between 1 and 63 characters and include only numbers, letters, and the '-' character.</span></span> <span data-ttu-id="9f897-107">Il nome della cache non può iniziare o terminare con il carattere '-' e più caratteri '-' consecutivi non sono validi.</span><span class="sxs-lookup"><span data-stu-id="9f897-107">The cache name can't start or end with the '-' character, and consecutive '-' characters aren't valid.</span></span>

1. <span data-ttu-id="9f897-108">Specificare la sottoscrizione in cui viene creata questa nuova istanza di Cache Redis di Azure.</span><span class="sxs-lookup"><span data-stu-id="9f897-108">Provide the subscription under which this new Azure Redis Cache instance is created.</span></span>

1. <span data-ttu-id="9f897-109">Assegnare un nome al gruppo di risorse in cui creare la cache.</span><span class="sxs-lookup"><span data-stu-id="9f897-109">Name the resource group in which to create your cache.</span></span> <span data-ttu-id="9f897-110">Inserendo tutte le risorse per un'app in un gruppo è possibile gestirle insieme.</span><span class="sxs-lookup"><span data-stu-id="9f897-110">By putting all the resources for an app in a group, you can manage them together.</span></span>

1. <span data-ttu-id="9f897-111">Scegliere una località vicina al consumer di dati.</span><span class="sxs-lookup"><span data-stu-id="9f897-111">Choose a location that is close to the consumer of the data.</span></span>

    > [!NOTE]
    > <span data-ttu-id="9f897-112">È molto più importante che la cache sia vicino al consumer di dati piuttosto che all'archivio dati.</span><span class="sxs-lookup"><span data-stu-id="9f897-112">It's far more important that the cache is close to the data consumer than the data store.</span></span>

1. <span data-ttu-id="9f897-113">Selezionare il piano tariffario.</span><span class="sxs-lookup"><span data-stu-id="9f897-113">Select the pricing tier.</span></span> <span data-ttu-id="9f897-114">Tenere presente che per sfruttare i vantaggi della persistenza dei dati, sarà necessario scegliere un piano tariffario Premium.</span><span class="sxs-lookup"><span data-stu-id="9f897-114">Remember, to take advantage of data persistence, you'll need to choose a premium tier.</span></span>

    - <span data-ttu-id="9f897-115">Il livello Premium consente di rendere persistenti i dati in uno di due modi per tenere conto del ripristino di emergenza:</span><span class="sxs-lookup"><span data-stu-id="9f897-115">The premium tier allows you to persist data in one of two ways to provide disaster recovery:</span></span>

        - <span data-ttu-id="9f897-116">Con la persistenza RDB viene creato uno snapshot periodico ed è possibile ricostruire la cache usando lo snapshot in caso di errore.</span><span class="sxs-lookup"><span data-stu-id="9f897-116">RDB persistence takes a periodic snapshot and can rebuild the cache using the snapshot in case of failure.</span></span>

            ![Screenshot del portale di Azure che illustra le opzioni di persistenza RDB per una nuova istanza di Cache Redis.](../media/3-redis-persistence-1.png)

        - <span data-ttu-id="9f897-118">La persistenza AOF salva ogni operazione di scrittura in un log che viene salvato almeno una volta al secondo.</span><span class="sxs-lookup"><span data-stu-id="9f897-118">AOF persistence saves every write operation to a log that is saved at least once per second.</span></span> <span data-ttu-id="9f897-119">Vengono così creati file di dimensioni maggiori rispetto a RDB ma con minore perdita di dati.</span><span class="sxs-lookup"><span data-stu-id="9f897-119">This creates bigger files than RDB but has less data loss.</span></span>

            ![Screenshot del portale di Azure che illustra le opzioni di persistenza AOF per una nuova istanza di Cache Redis.](../media/3-redis-persistence-2.png)

    - <span data-ttu-id="9f897-121">Proteggere la cache con una rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="9f897-121">Secure your cache with a virtual network.</span></span>
      <span data-ttu-id="9f897-122">Se è disponibile una cache Redis di livello Premium, è possibile distribuirla in una rete virtuale nel cloud.</span><span class="sxs-lookup"><span data-stu-id="9f897-122">If you have a premium tier Redis cache, you can deploy it to a virtual network in the cloud.</span></span> <span data-ttu-id="9f897-123">La cache sarà disponibile solo per altre macchine virtuali e applicazioni nella stessa rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="9f897-123">Your cache will be available to only other virtual machines and applications in the same virtual network.</span></span>

    - <span data-ttu-id="9f897-124">Distribuire la cache con il clustering.</span><span class="sxs-lookup"><span data-stu-id="9f897-124">Distribute your cache with clustering.</span></span>
      <span data-ttu-id="9f897-125">Con una cache Redis di livello Premium, è possibile implementare il clustering per suddividere automaticamente i set di dati tra più nodi.</span><span class="sxs-lookup"><span data-stu-id="9f897-125">With a premium tier Redis cache, you can implement clustering to automatically split your dataset among multiple nodes.</span></span> <span data-ttu-id="9f897-126">Per implementare il clustering, specificare il numero di partizioni per un massimo di 10.</span><span class="sxs-lookup"><span data-stu-id="9f897-126">To implement clustering, you specify the number of shards to a maximum of 10.</span></span> <span data-ttu-id="9f897-127">Il costo è il costo del nodo originale moltiplicato per il numero di partizioni.</span><span class="sxs-lookup"><span data-stu-id="9f897-127">The cost is the cost of the original node multiplied by the number of shards.</span></span>

    - <span data-ttu-id="9f897-128">Eseguire la migrazione dal Servizio cache gestita di Azure.</span><span class="sxs-lookup"><span data-stu-id="9f897-128">Migrate from Azure Managed Cache Service.</span></span>
      <span data-ttu-id="9f897-129">A seconda delle funzionalità del Servizio cache gestita usate, la migrazione delle applicazioni che usano il Servizio cache gestita di Azure in Cache Redis di Azure può essere eseguita con modifiche minime all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="9f897-129">Depending on the Managed Cache Service features you use, migrating applications that use Azure Managed Cache Service to Azure Redis Cache can be accomplished with minimal changes to your application.</span></span> <span data-ttu-id="9f897-130">Anche se le API non sono esattamente uguali, sono simili.</span><span class="sxs-lookup"><span data-stu-id="9f897-130">While the APIs aren't exactly the same, they're similar.</span></span> <span data-ttu-id="9f897-131">Gran parte del codice esistente che accede alla cache con il Servizio cache gestita può essere riutilizzata con modifiche minime.</span><span class="sxs-lookup"><span data-stu-id="9f897-131">Much of your existing code that accesses the cache with Managed Cache Service can be reused with minimal changes.</span></span>

### <a name="configure-your-client"></a><span data-ttu-id="9f897-132">Configurare il client</span><span class="sxs-lookup"><span data-stu-id="9f897-132">Configure your client</span></span>

<span data-ttu-id="9f897-133">Le applicazioni client devono essere configurate per l'uso di Cache Redis.</span><span class="sxs-lookup"><span data-stu-id="9f897-133">Client applications need to be configured to use the Redis cache.</span></span> <span data-ttu-id="9f897-134">Un client Redis ad alte prestazioni diffuso per il linguaggio .NET è **StackExchange.Redis**.</span><span class="sxs-lookup"><span data-stu-id="9f897-134">A popular high-performance Redis client for the .NET language is **StackExchange.Redis**.</span></span> <span data-ttu-id="9f897-135">Per aggiungere il client Redis si usa **Gestione pacchetti NuGet** in Visual Studio con il comando **Install-Package**.</span><span class="sxs-lookup"><span data-stu-id="9f897-135">You add the Redis client using the **NuGet Package Manager** in Visual Studio using the **Install-Package** command.</span></span>

<span data-ttu-id="9f897-136">È quindi necessario configurare il client per connettersi alla cache.</span><span class="sxs-lookup"><span data-stu-id="9f897-136">You then need to configure your client to connect to your cache.</span></span> <span data-ttu-id="9f897-137">Creare un file di testo con estensione **config** che contiene le impostazioni per il nome host e la chiave primaria o secondaria.</span><span class="sxs-lookup"><span data-stu-id="9f897-137">Create a text file with a **.config** file extension that contains the settings for the host name and primary, or secondary, key.</span></span> <span data-ttu-id="9f897-138">Il file deve avere la struttura seguente:</span><span class="sxs-lookup"><span data-stu-id="9f897-138">The file should have the following structure:</span></span>

```XML
    <appSettings>
        <add key="CacheConnection" value="HOST-NAME.redis.cache.windows.net,abortConnect=false,ssl=true,password=PRIMARY-KEY"/>
    </appSettings>
```

<span data-ttu-id="9f897-139">Il file **App.config** verrà quindi modificato e aggiornato per includere un attributo di file **appSettings** che fa riferimento al file config appena creato.</span><span class="sxs-lookup"><span data-stu-id="9f897-139">You will then edit your **App.config** file and update it to include an **appSettings** file attribute that references the config file that you just created.</span></span>

### <a name="what-are-access-keys"></a><span data-ttu-id="9f897-140">Cosa sono le chiavi di accesso?</span><span class="sxs-lookup"><span data-stu-id="9f897-140">What are access keys?</span></span>

<span data-ttu-id="9f897-141">Per connettersi a un'istanza di Cache Redis di Azure, è necessario specificare il nome host, le porte e una chiave per la cache.</span><span class="sxs-lookup"><span data-stu-id="9f897-141">When connecting to an Azure Redis Cache instance, cache clients need the host name, ports, and a key for the cache.</span></span> <span data-ttu-id="9f897-142">Queste informazioni possono essere recuperate nel portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="9f897-142">You can retrieve this information in the Azure portal.</span></span>

### <a name="connection-settings"></a><span data-ttu-id="9f897-143">Impostazioni di connessione</span><span class="sxs-lookup"><span data-stu-id="9f897-143">Connection settings</span></span>

<span data-ttu-id="9f897-144">Per connettersi a Cache Redis di Azure, saranno necessari il nome host e la chiave di accesso.</span><span class="sxs-lookup"><span data-stu-id="9f897-144">To connect to your Azure Redis Cache, you'll need the host name and access key.</span></span> <span data-ttu-id="9f897-145">Il nome host è l'indirizzo Internet della cache, ad esempio *sportsresults.redis.cache.windows.net*.</span><span class="sxs-lookup"><span data-stu-id="9f897-145">The host name is the internet address of your cache, for example *sportsresults.redis.cache.windows.net*.</span></span> <span data-ttu-id="9f897-146">La chiave di accesso funge da password per la cache.</span><span class="sxs-lookup"><span data-stu-id="9f897-146">The access key acts as a password for your cache.</span></span> <span data-ttu-id="9f897-147">Sono disponibili due chiavi di accesso, una primaria e una secondaria.</span><span class="sxs-lookup"><span data-stu-id="9f897-147">There are primary and secondary access keys.</span></span> <span data-ttu-id="9f897-148">È possibile usare una delle due chiavi, ma ne vengono fornite due nel caso diventi necessario modificare la chiave primaria.</span><span class="sxs-lookup"><span data-stu-id="9f897-148">You can use either key, but two are provided in case you need to change the primary key.</span></span> <span data-ttu-id="9f897-149">È possibile passare tutti i client alla chiave secondaria e quindi apportare la modifica alla chiave primaria, evitando così la perdita del servizio.</span><span class="sxs-lookup"><span data-stu-id="9f897-149">You can switch all of your clients to the secondary key and then make the change to the primary key, which would prevent any loss of service.</span></span>
