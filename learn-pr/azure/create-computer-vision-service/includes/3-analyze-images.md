<span data-ttu-id="019a3-101">In questa unità verranno analizzate le immagini con il servizio API Visione artificiale creato nel passaggio precedente.</span><span class="sxs-lookup"><span data-stu-id="019a3-101">In this unit, you will analyze images with the Computer Vision API service that we created in the previous step.</span></span>

# <a name="analyzing-an-image-with-computer-vision-api"></a><span data-ttu-id="019a3-102">Analisi di un'immagine con l'API Visione artificiale</span><span class="sxs-lookup"><span data-stu-id="019a3-102">Analyzing an image with Computer Vision API</span></span>

<span data-ttu-id="019a3-103">Eseguire il comando `az cognitiveservices account keys list` per recuperare una chiave usata per l'autenticazione nell'API.</span><span class="sxs-lookup"><span data-stu-id="019a3-103">Execute the `az cognitiveservices account keys list` command to retrieve a key used to authenticate against the API.</span></span> <span data-ttu-id="019a3-104">Archiviare l'output del comando entro la variabile `key`.</span><span class="sxs-lookup"><span data-stu-id="019a3-104">Store the output of that command within the `key` variable.</span></span>

```azurecli
key=$(az cognitiveservices account keys list -g ComputerVisionRG --name ComputerVisionService --query key1 -o tsv)
```

<span data-ttu-id="019a3-105">Eseguire un comando `curl` per effettuare una richiesta HTTP per l'API Visione artificiale e riutilizzare la variabile `key` dichiarata in precedenza.</span><span class="sxs-lookup"><span data-stu-id="019a3-105">Execute a `curl` command to do an HTTP request against the Computer Vision API and reuse the previously declared variable `key`.</span></span>

<span data-ttu-id="019a3-106">I parametri inviati al servizio sono `visualFeatures`, `details` e `languages`.</span><span class="sxs-lookup"><span data-stu-id="019a3-106">The parameters that are sent to the service are `visualFeatures`, `details`, and `languages`.</span></span> <span data-ttu-id="019a3-107">Anche se il servizio funziona ugualmente senza di essi, forniscono al servizio informazioni sul contenuto delle immagini.</span><span class="sxs-lookup"><span data-stu-id="019a3-107">While without them, the service will still work, it provides hints to the service on the content of the images.</span></span> <span data-ttu-id="019a3-108">Ad esempio, è possibile impostare `details` su `Landmarks` o `Celebrities` per identificare luoghi di interesse o celebrità.</span><span class="sxs-lookup"><span data-stu-id="019a3-108">As an example, `details` can be set to `Landmarks` or `Celebrities` to help you identify landmarks or celebrities.</span></span> <span data-ttu-id="019a3-109">`visualFeatures` identifica la tipologia di informazioni che deve essere restituita dal servizio.</span><span class="sxs-lookup"><span data-stu-id="019a3-109">`visualFeatures` identify what kind of information you want the service to return you.</span></span> <span data-ttu-id="019a3-110">L'opzione `Categories` classifica il contenuto delle immagini, ad esempio alberi, edifici e così via.</span><span class="sxs-lookup"><span data-stu-id="019a3-110">The `Categories` option will categorize the content of the images like trees, buildings, and more.</span></span> <span data-ttu-id="019a3-111">`Faces` identifica i visi delle persone e fornisce indicazioni su sesso ed età.</span><span class="sxs-lookup"><span data-stu-id="019a3-111">`Faces` will identify people's faces and give you their gender and age.</span></span>

<span data-ttu-id="019a3-112">Per informazioni dettagliate, vedere la [documentazione](https://westus.dev.cognitive.microsoft.com/docs/services/56f91f2d778daf23d8ec6739/operations/56f91f2e778daf14a499e1fa).</span><span class="sxs-lookup"><span data-stu-id="019a3-112">More details can be found in [the documentation](https://westus.dev.cognitive.microsoft.com/docs/services/56f91f2d778daf23d8ec6739/operations/56f91f2e778daf14a499e1fa).</span></span>

<span data-ttu-id="019a3-113">Per adesso, verranno identificati i luoghi di interesse e verrà richiesto al servizio di restituire `Categories` e `Description`.</span><span class="sxs-lookup"><span data-stu-id="019a3-113">For now, let's identify landmarks and have the service return us `Categories` and `Description`.</span></span>

```azurecli
curl -H "Ocp-Apim-Subscription-Key: $key" -H "Content-Type: application/json" "https://westus2.api.cognitive.microsoft.com/vision/v1.0/analyze?visualFeatures=Categories,Description&details=Landmarks" -d "{\"url\":\"https://docs.microsoft.com/en-us/learn/modules/create-computer-vision-service/mountains.jpg\"}"
```

<span data-ttu-id="019a3-114">Il risultato della richiesta è costituito dal file JSON non elaborato che descrive l'immagine in `url`.</span><span class="sxs-lookup"><span data-stu-id="019a3-114">The result of the request is the raw JSON describing the picture in the `url`.</span></span> <span data-ttu-id="019a3-115">È anche possibile aggiungere ` | jq '.'` alla fine per migliorare l'output del file JSON.</span><span class="sxs-lookup"><span data-stu-id="019a3-115">We can also add ` | jq '.'` at the end to prettify the JSON output.</span></span>

```azurecli
curl -H "Ocp-Apim-Subscription-Key: $key" -H "Content-Type: application/json" "https://westus2.api.cognitive.microsoft.com/vision/v1.0/analyze?visualFeatures=Categories,Description&details=Landmarks&language=en" -d "{\"url\":\"https://docs.microsoft.com/en-us/learn/modules/create-computer-vision-service/mountains.jpg\"}" | jq '.'
```

<span data-ttu-id="019a3-116">Copiare il collegamento ad altre immagini trovate online e provare il servizio sostituendo l'URL nei comandi illustrati in precedenza.</span><span class="sxs-lookup"><span data-stu-id="019a3-116">Copy the link to any other images found online, and try it with the service by replacing the URL in the above commands.</span></span>