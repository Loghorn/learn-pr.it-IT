<span data-ttu-id="3e844-101">La progettazione per la disponibilità elevata consente di mantenere un'applicazione o un processo in esecuzione nonostante condizioni avverse ed eventi sfavorevoli.</span><span class="sxs-lookup"><span data-stu-id="3e844-101">Designing for high availability helps keep an application or process running despite unfavorable events and adverse conditions.</span></span> <span data-ttu-id="3e844-102">Tuttavia, come si procede quando si verifica un evento talmente significativo da determinare la perdita dei dati e rendere impossibile mantenere disponibili le app e i processi?</span><span class="sxs-lookup"><span data-stu-id="3e844-102">But what do you do when something so significant happens that you've lost data and it's impossible to keep your apps and processes from going down?</span></span> <span data-ttu-id="3e844-103">In caso di emergenza è necessario avere un piano per ripristinare il funzionamento dei servizi.</span><span class="sxs-lookup"><span data-stu-id="3e844-103">When disaster strikes, you need to have a plan to get your services running again.</span></span> <span data-ttu-id="3e844-104">È necessario conoscere gli obiettivi e le aspettative per il ripristino, essere consapevoli dei costi e dei limiti del piano e sapere come metterlo in atto.</span><span class="sxs-lookup"><span data-stu-id="3e844-104">You should know what your goals and expectations are for recovering, what are the costs and limitations of your plan, and how to execute on it.</span></span>

## <a name="what-is-disaster-recovery"></a><span data-ttu-id="3e844-105">Che cos'è il ripristino di emergenza?</span><span class="sxs-lookup"><span data-stu-id="3e844-105">What is disaster recovery?</span></span>

<span data-ttu-id="3e844-106">Il ripristino di emergenza è il *recupero delle configurazioni e dei dati in seguito a eventi a impatto elevato* che comportano tempi di inattività e perdite di dati.</span><span class="sxs-lookup"><span data-stu-id="3e844-106">Disaster recovery is about *recovering from high-impact events* that result in downtime and data loss.</span></span> <span data-ttu-id="3e844-107">Una situazione di emergenza è un singolo evento importante con un impatto molto più grande e di lunga durata rispetto alle capacità di attenuare il problema offerte dalla parte relativa alla disponibilità elevata della progettazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="3e844-107">A disaster is a single, major event with an impact much larger and long-lasting than the application can mitigate through the high-availability portion of its design.</span></span>

<span data-ttu-id="3e844-108">Il termine "emergenza" spesso evoca scenari relativi a calamità *naturali* ed eventi esterni (terremoti, alluvioni, tempeste tropicali e così via), ma esistono molti altri tipi di emergenze.</span><span class="sxs-lookup"><span data-stu-id="3e844-108">The word "disaster" often evokes thoughts of *natural* disasters and external events (earthquakes, floods, tropical storms, and so on) but many other kinds of disasters exist as well.</span></span> <span data-ttu-id="3e844-109">Un problema che si verifica nel corso di una distribuzione o un aggiornamento può lasciare un'app in uno stato non riconoscibile.</span><span class="sxs-lookup"><span data-stu-id="3e844-109">A failed deployment or upgrade can leave an app in an unrecognizable state.</span></span> <span data-ttu-id="3e844-110">I pirati informatici possono crittografare o eliminare i dati e causare danni di altro tipo, che portano offline un'app o eliminano una parte delle relative funzionalità.</span><span class="sxs-lookup"><span data-stu-id="3e844-110">Malicious hackers can encrypt or delete data and inflict other kinds of damage that take an app offline or eliminate some of its functionality.</span></span>

<span data-ttu-id="3e844-111">Indipendentemente dalla causa, una volta che si è verificata una situazione di emergenza, il rimedio migliore sono un piano di ripristino di emergenza ben definito e accuratamente testato e un'applicazione che supporta attivamente le attività di ripristino di emergenza a livello di progettazione.</span><span class="sxs-lookup"><span data-stu-id="3e844-111">Regardless of its cause, the best remedy for a disaster once it has occurred is a well-defined, tested disaster recovery plan and an application that actively supports disaster recovery efforts through its design.</span></span>

## <a name="how-to-create-a-disaster-recovery-plan"></a><span data-ttu-id="3e844-112">Come creare un piano di ripristino di emergenza</span><span class="sxs-lookup"><span data-stu-id="3e844-112">How to create a disaster recovery plan</span></span>

<span data-ttu-id="3e844-113">Un piano di ripristino di emergenza è un singolo documento, che descrive in dettaglio le procedure necessarie per il recupero dalla perdita di dati e dai tempi di inattività causati da una situazione di emergenza e identifica il responsabile della gestione di tali procedure.</span><span class="sxs-lookup"><span data-stu-id="3e844-113">A disaster recovery plan is a single document that details the procedures that are required to recover from data loss and downtime caused by a disaster, and identifies who's in charge of directing those procedures.</span></span> <span data-ttu-id="3e844-114">Gli operatori devono saper usare il piano come un manuale per ripristinare la connettività dell'applicazione e i dati quando si verifica un'emergenza.</span><span class="sxs-lookup"><span data-stu-id="3e844-114">Operators should be able to use the plan as a manual to restore application connectivity and recover data after a disaster occurs.</span></span> <span data-ttu-id="3e844-115">Un piano dettagliato, messo per iscritto e dedicato al ripristino di emergenza è essenziale per garantire un risultato favorevole.</span><span class="sxs-lookup"><span data-stu-id="3e844-115">A detailed, written plan that's dedicated to disaster recovery is critical to ensuring a favorable outcome.</span></span> <span data-ttu-id="3e844-116">Il processo di creazione del piano consente anche di definire un quadro completo dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="3e844-116">The process of creating the plan will help to assemble a complete picture of the application.</span></span> <span data-ttu-id="3e844-117">I passaggi scritti risultanti favoriscono la presa di decisioni ottimali e l'implementazione di azioni opportune nei momenti potenzialmente caotici che seguono un evento grave.</span><span class="sxs-lookup"><span data-stu-id="3e844-117">The resulting written steps will promote good decision-making and follow-through in the panicked, chaotic aftermath of a disaster event.</span></span>

<span data-ttu-id="3e844-118">La creazione di un piano di ripristino di emergenza richiede una conoscenza approfondita dei flussi di lavoro, dei dati, dell'infrastruttura e delle dipendenze dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="3e844-118">Creating a disaster recovery plan requires expert knowledge of the application's workflows, data, infrastructure, and dependencies.</span></span>

### <a name="risk-assessment-and-process-inventory"></a><span data-ttu-id="3e844-119">Valutazione dei rischi e inventario dei processi</span><span class="sxs-lookup"><span data-stu-id="3e844-119">Risk assessment and process inventory</span></span>

<span data-ttu-id="3e844-120">Il primo passaggio per la creazione di un piano di ripristino di emergenza è l'esecuzione di un'analisi dei rischi per determinare l'impatto dei diversi tipi di emergenze sull'applicazione.</span><span class="sxs-lookup"><span data-stu-id="3e844-120">The first step in creating a disaster recovery plan is performing a risk analysis that examines the impact of different kinds of disasters on the application.</span></span> <span data-ttu-id="3e844-121">Per l'analisi dei rischi, l'esatta natura di un'emergenza è meno importante del potenziale impatto in termini di perdita di dati e tempo di inattività dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="3e844-121">The exact nature of a disaster isn't as important to the risk analysis as its potential impact through data loss and application downtime.</span></span> <span data-ttu-id="3e844-122">Esplorare i vari tipi di emergenze ipotetiche e analizzare in modo specifico gli effetti corrispondenti.</span><span class="sxs-lookup"><span data-stu-id="3e844-122">Explore various kinds of hypothetical disasters and try to be specific when thinking about their effects.</span></span> <span data-ttu-id="3e844-123">Ad esempio, un attacco dannoso mirato potrebbe modificare il codice o i dati, generando un impatto di tipo diverso rispetto a quello di un terremoto, che interrompe la connettività di rete e rende non disponibile un data center.</span><span class="sxs-lookup"><span data-stu-id="3e844-123">For example, a targeted malicious attack may modify code or data that results in a different kind of impact than an earthquake that disrupts network connectivity and datacenter availability.</span></span>

<span data-ttu-id="3e844-124">La valutazione dei rischi deve prendere in considerazione *tutti* i processi che non possono tollerare tempi di inattività illimitati e tutte le categorie di dati che non possono tollerare una perdita illimitata.</span><span class="sxs-lookup"><span data-stu-id="3e844-124">The risk assessment needs to consider *every* process that can't afford unlimited downtime, and every category of data that can't afford unlimited loss.</span></span> <span data-ttu-id="3e844-125">Quando si verifica un'emergenza che interessa più componenti dell'applicazione, è fondamentale che i proprietari del piano possano usarlo per eseguire un inventario completo degli elementi che richiedono attenzione e definire le priorità di ogni elemento.</span><span class="sxs-lookup"><span data-stu-id="3e844-125">When a disaster that affects multiple application components occurs, it's critical that the plan owners can use the plan to take a complete inventory of what needs attention and how to prioritize each item.</span></span>

<span data-ttu-id="3e844-126">Alcune app possono costituire un singolo processo o una singola classificazione dei dati.</span><span class="sxs-lookup"><span data-stu-id="3e844-126">Some apps may only constitute a single process or classification of data.</span></span> <span data-ttu-id="3e844-127">È comunque importante tenere presente questo aspetto, dal momento che probabilmente l'applicazione sarà un componente di un piano di ripristino di emergenza più ampio che include più applicazioni dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="3e844-127">This is still important to note, as the application will likely be one component of a larger disaster recovery plan that includes multiple applications with the organization.</span></span>

### <a name="recovery-objectives"></a><span data-ttu-id="3e844-128">Obiettivi di ripristino</span><span class="sxs-lookup"><span data-stu-id="3e844-128">Recovery objectives</span></span>

<span data-ttu-id="3e844-129">Un piano completo deve specificare due requisiti aziendali di importanza critica per ogni processo implementato dall'applicazione:</span><span class="sxs-lookup"><span data-stu-id="3e844-129">A complete plan needs to specify two critical business requirements for each process implemented by the application:</span></span>

* <span data-ttu-id="3e844-130">**Obiettivo del punto di ripristino (RPO)**: la durata massima di perdita dei dati accettabile.</span><span class="sxs-lookup"><span data-stu-id="3e844-130">**Recovery Point Objective (RPO)**: The maximum duration of acceptable data loss.</span></span> <span data-ttu-id="3e844-131">L'obiettivo RPO viene misurato in unità di tempo, non di volume: "30 minuti di dati", "quattro ore di dati" e così via.</span><span class="sxs-lookup"><span data-stu-id="3e844-131">RPO is measured in units of time, not volume: "30 minutes of data", "four hours of data", and so on.</span></span> <span data-ttu-id="3e844-132">L'obiettivo RPO riguarda la limitazione e il ripristino in seguito a una *perdita* di dati, non a un *furto* di dati.</span><span class="sxs-lookup"><span data-stu-id="3e844-132">RPO is about limiting and recovering from data *loss*, not data *theft*.</span></span>
* <span data-ttu-id="3e844-133">**Obiettivo del tempo di ripristino (RTO)**: la durata massima di tempo di inattività accettabile, dove il "tempo di inattività" deve essere definito dalle proprie specifiche.</span><span class="sxs-lookup"><span data-stu-id="3e844-133">**Recovery Time Objective (RTO)**: The maximum duration of acceptable downtime, where "downtime" needs to be defined by your specification.</span></span> <span data-ttu-id="3e844-134">Ad esempio, se la durata del tempo di inattività accettabile è otto ore in caso di un'emergenza, l'obiettivo RPO è di otto ore.</span><span class="sxs-lookup"><span data-stu-id="3e844-134">For example, if the acceptable downtime duration is eight hours in the event of a disaster, then your RPO is eight hours.</span></span>

![Un'illustrazione che mostra la durata in ore dell'obiettivo del punto di ripristino e dell'obiettivo del tempo di ripristino dal momento dell'emergenza.](../media/rto-rpo.png)

<span data-ttu-id="3e844-136">Ogni processo o carico di lavoro principale implementato da un'app deve avere valori RPO e RTO separati.</span><span class="sxs-lookup"><span data-stu-id="3e844-136">Each major process or workload that's implemented by an app should have separate RPO and RTO values.</span></span> <span data-ttu-id="3e844-137">Anche se si arriva agli stessi valori per processi diversi, ognuno di essi deve essere generato con un'analisi distinta, in cui vengono analizzati i rischi di uno scenario di emergenza e le potenziali strategie di ripristino per ogni processo corrispondente.</span><span class="sxs-lookup"><span data-stu-id="3e844-137">Even if you arrive at the same values for different processes, each one should be generated through a separate analysis that examines disaster scenario risks and potential recovery strategies for each respective process.</span></span>

<span data-ttu-id="3e844-138">Il processo di specificazione dei valori RPO e RTO rappresenta di fatto la creazione dei requisiti di ripristino di emergenza per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="3e844-138">The process of specifying an RPO and RTO is effectively the creation of disaster recovery requirements for your application.</span></span> <span data-ttu-id="3e844-139">Richiede di stabilire la priorità di ogni carico di lavoro e categoria di dati e di eseguire un'analisi costi/benefici.</span><span class="sxs-lookup"><span data-stu-id="3e844-139">It requires establishing the priority of each workload and category of data and performing a cost-benefit analysis.</span></span> <span data-ttu-id="3e844-140">L'analisi include problematiche quali costi di implementazione e manutenzione, spese operative, overhead del processo, impatto sulle prestazioni e impatto del tempo di inattività e della perdita di dati.</span><span class="sxs-lookup"><span data-stu-id="3e844-140">The analysis includes concerns, such as implementation and maintenance cost, operational expense, process overhead, performance impact, and the impact of downtime and lost data.</span></span> <span data-ttu-id="3e844-141">È necessario definire esattamente il significato di "tempo di inattività" per l'applicazione e in alcuni casi è possibile stabilire valori RPO e RTO distinti per diversi livelli di funzionalità.</span><span class="sxs-lookup"><span data-stu-id="3e844-141">You'll need to define exactly what "downtime" means for your application, and in some cases, you may establish separate RPO and RTO values for different levels of functionality.</span></span> <span data-ttu-id="3e844-142">Specificare gli obiettivi RPO e RTO non significa semplicemente scegliere valori arbitrari.</span><span class="sxs-lookup"><span data-stu-id="3e844-142">Specifying RPO and RTO should be more than simply choosing arbitrary values.</span></span> <span data-ttu-id="3e844-143">Gran parte del valore di un piano di ripristino di emergenza deriva dalle ricerche e dalle analisi per l'individuazione del potenziale impatto di un'emergenza e del costo dell'attenuazione dei rischi.</span><span class="sxs-lookup"><span data-stu-id="3e844-143">Much of the value of a disaster recovery plan comes from the research and analysis that goes into discovering the potential impact of a disaster and the cost of mitigating the risks.</span></span>

### <a name="detailing-recovery-steps"></a><span data-ttu-id="3e844-144">Definizione dei dettagli delle procedure di ripristino</span><span class="sxs-lookup"><span data-stu-id="3e844-144">Detailing recovery steps</span></span>

<span data-ttu-id="3e844-145">Il piano finale deve descrivere in dettaglio le esatte procedure da eseguire per il ripristino dei dati persi e della connettività dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="3e844-145">The final plan should go into detail about exactly what steps should be taken to restore lost data and application connectivity.</span></span> <span data-ttu-id="3e844-146">Le procedure spesso includono informazioni relative a:</span><span class="sxs-lookup"><span data-stu-id="3e844-146">Steps often include information about:</span></span>

* <span data-ttu-id="3e844-147">**Backup**: frequenza di creazione dei backup, posizione in cui si trovano e modalità per il ripristino dei dati.</span><span class="sxs-lookup"><span data-stu-id="3e844-147">**Backups**: How often they're created, where they're located, and how to restore data from them.</span></span>
* <span data-ttu-id="3e844-148">**Repliche dei dati**: numero e posizioni delle repliche, natura e caratteristiche di coerenza dei dati replicati e modalità per il passaggio a una replica diversa.</span><span class="sxs-lookup"><span data-stu-id="3e844-148">**Data replicas**: The number and locations of replicas, the nature and consistency characteristics of the replicated data, and how to switch over to a different replica.</span></span>
* <span data-ttu-id="3e844-149">**Distribuzioni**: modalità di esecuzione delle distribuzioni, modalità di esecuzione del rollback e scenari di errore per le distribuzioni.</span><span class="sxs-lookup"><span data-stu-id="3e844-149">**Deployments**: How deployments are executed, how rollbacks occur, and failure scenarios for deployments.</span></span>
* <span data-ttu-id="3e844-150">**Infrastruttura**: risorse locali e cloud, infrastruttura di rete e inventario hardware.</span><span class="sxs-lookup"><span data-stu-id="3e844-150">**Infrastructure**: On-premises and cloud resources, network infrastructure, and hardware inventory.</span></span>
* <span data-ttu-id="3e844-151">**Dipendenze**: servizi esterni usati dall'applicazione, inclusi contratti di servizio e informazioni di contatto.</span><span class="sxs-lookup"><span data-stu-id="3e844-151">**Dependencies**: External services that are used by the application, including SLAs and contact information.</span></span>
* <span data-ttu-id="3e844-152">**Configurazione e notifica**: flag o opzioni che possono essere impostati per ridurre in modo graduale le prestazioni dell'applicazione e servizi usati per notificare agli utenti l'impatto sull'applicazione.</span><span class="sxs-lookup"><span data-stu-id="3e844-152">**Configuration and notification**: Flags or options that can be set to gracefully degrade the application, and services that are used to notify users of application impact.</span></span>

<span data-ttu-id="3e844-153">I passaggi esatti necessari dipenderanno principalmente dai dettagli di implementazione dell'app, quindi è importante mantenere aggiornato il piano.</span><span class="sxs-lookup"><span data-stu-id="3e844-153">The exact steps that are required will depend heavily on implementation details of the app, making it important to keep the plan updated.</span></span> <span data-ttu-id="3e844-154">L'esecuzione di test periodici del piano consentirà di identificare le lacune e le sezioni non aggiornate.</span><span class="sxs-lookup"><span data-stu-id="3e844-154">Routinely testing the plan will help identify gaps and outdated sections.</span></span>

## <a name="designing-for-disaster-recovery"></a><span data-ttu-id="3e844-155">Progettazione per il ripristino di emergenza</span><span class="sxs-lookup"><span data-stu-id="3e844-155">Designing for disaster recovery</span></span>

<span data-ttu-id="3e844-156">Il ripristino di emergenza non è una funzionalità automatica.</span><span class="sxs-lookup"><span data-stu-id="3e844-156">Disaster recovery is not an automatic feature.</span></span> <span data-ttu-id="3e844-157">Deve essere progettato, realizzato e testato.</span><span class="sxs-lookup"><span data-stu-id="3e844-157">It must be designed, built, and tested.</span></span> <span data-ttu-id="3e844-158">Un'app che deve supportare un'efficace strategia di ripristino di emergenza deve essere completamente sviluppata per il ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="3e844-158">An app that needs to support a solid disaster recovery strategy must be built from the ground up with disaster recovery in mind.</span></span> <span data-ttu-id="3e844-159">Azure offre servizi, funzionalità e indicazioni che aiutano a creare app che supportano il ripristino di emergenza, ma è possibile scegliere se includerli o meno nella progettazione.</span><span class="sxs-lookup"><span data-stu-id="3e844-159">Azure offers services, features, and guidance to help you create apps that support disaster recovery, but it's up to you to include them in your design.</span></span>

<span data-ttu-id="3e844-160">La progettazione per il ripristino di emergenza presenta due problemi principali:</span><span class="sxs-lookup"><span data-stu-id="3e844-160">Designing for disaster recovery has two main concerns:</span></span>

* <span data-ttu-id="3e844-161">**Ripristino dei dati**: usare i backup e la replica per ripristinare i dati persi.</span><span class="sxs-lookup"><span data-stu-id="3e844-161">**Data recovery**: Using backups and replication to restore lost data.</span></span>
* <span data-ttu-id="3e844-162">**Processo di ripristino**: ripristinare i servizi e distribuire il codice per il ripristino in seguito a interruzioni.</span><span class="sxs-lookup"><span data-stu-id="3e844-162">**Process recovery**: Recovering services and deploying code to recover from outages.</span></span>

### <a name="data-recovery-and-replication"></a><span data-ttu-id="3e844-163">Replica e ripristino dei dati</span><span class="sxs-lookup"><span data-stu-id="3e844-163">Data recovery and replication</span></span>

<span data-ttu-id="3e844-164">La replica consente di duplicare i dati archiviati tra diverse repliche di un archivio dati.</span><span class="sxs-lookup"><span data-stu-id="3e844-164">Replication duplicates stored data between multiple data store replicas.</span></span> <span data-ttu-id="3e844-165">A differenza del *backup*, che crea snapshot dei dati di sola lettura e di lunga durata da usare per il ripristino, la replica crea copie dei dati in tempo reale o quasi in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="3e844-165">Unlike *backup*, which creates long-lived, read-only snapshots of data for use in recovery, replication creates real-time or near-real-time copies of live data.</span></span> <span data-ttu-id="3e844-166">L'obiettivo della replica è mantenere sincronizzate le repliche con la minima latenza possibile, garantendo al tempo stesso la velocità di risposta dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="3e844-166">The goal of replication is to keep replicas synchronized with as little latency as possible while maintaining application responsiveness.</span></span> <span data-ttu-id="3e844-167">La replica è un componente fondamentale della progettazione per la disponibilità elevata e il ripristino di emergenza e rappresenta una caratteristica comune delle applicazioni a livello di produzione.</span><span class="sxs-lookup"><span data-stu-id="3e844-167">Replication is a key component of designing for high availability and disaster recovery, and is a common feature of production-grade applications.</span></span>

<span data-ttu-id="3e844-168">La replica viene usata per attenuare i problemi causati da un archivio dati non raggiungibile o in cui si è verificato un errore con l'esecuzione di un *failover*: la modifica della configurazione dell'applicazione per instradare le richieste di dati a una replica funzionante.</span><span class="sxs-lookup"><span data-stu-id="3e844-168">Replication is used to mitigate a failed or unreachable data store by executing a *failover*: changing application configuration to route data requests to a working replica.</span></span> <span data-ttu-id="3e844-169">Il failover è spesso automatizzato, attivato dal rilevamento degli errori incorporato in un prodotto di archiviazione dati o dalle funzionalità di rilevamento implementate con la propria soluzione di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="3e844-169">Failover is often automated, triggered by error detection built into a data storage product, or detection that you implement through your monitoring solution.</span></span> <span data-ttu-id="3e844-170">A seconda dell'implementazione e dello scenario, il failover potrebbe dover essere eseguito manualmente dagli operatori del sistema.</span><span class="sxs-lookup"><span data-stu-id="3e844-170">Depending on the implementation and the scenario, failover may need to be manually executed by system operators.</span></span>

<span data-ttu-id="3e844-171">La replica non è un elemento che è possibile implementare da zero.</span><span class="sxs-lookup"><span data-stu-id="3e844-171">Replication is not something you implement from scratch.</span></span> <span data-ttu-id="3e844-172">La maggior parte dei sistemi di database completi e altri prodotti e servizi di archiviazione dati includono un qualche tipo di replica come una funzionalità strettamente integrata, a causa dei relativi requisiti funzionali e di prestazioni.</span><span class="sxs-lookup"><span data-stu-id="3e844-172">Most fully featured database systems and other data storage products and services include some kind of replication as a tightly integrated feature due to its functional and performance requirements.</span></span> <span data-ttu-id="3e844-173">È tuttavia lo sviluppatore a decidere se includere queste funzionalità nella progettazione dell'applicazione e a doverle usarle in modo appropriato.</span><span class="sxs-lookup"><span data-stu-id="3e844-173">However, it's up to you to include these features in your application design and make appropriate use of them.</span></span>

<span data-ttu-id="3e844-174">Diversi servizi di Azure supportano vari livelli e concetti di replica.</span><span class="sxs-lookup"><span data-stu-id="3e844-174">Different Azure services support various levels and concepts of replication.</span></span> <span data-ttu-id="3e844-175">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="3e844-175">For example:</span></span>

* <span data-ttu-id="3e844-176">Le funzionalità di replica di **Archiviazione di Azure** dipendono dal tipo di replica selezionato per l'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="3e844-176">**Azure Storage** replication capabilities depend on the replication type of selected for the storage account.</span></span> <span data-ttu-id="3e844-177">Questa replica può essere locale (all'interno di un data center), a livello di zona (tra data center in un'area geografica) o a livello di area (tra aree geografiche).</span><span class="sxs-lookup"><span data-stu-id="3e844-177">This replication can be local (within a datacenter), zonal (between data centers within a region), or regional (between regions).</span></span> <span data-ttu-id="3e844-178">Né l'applicazione né gli operatori interagiscono direttamente con questa caratteristica.</span><span class="sxs-lookup"><span data-stu-id="3e844-178">Neither your application nor your operators interact with it directly.</span></span> <span data-ttu-id="3e844-179">I failover sono automatici e trasparenti ed è sufficiente selezionare un livello di replica che consente di bilanciare i costi e i rischi.</span><span class="sxs-lookup"><span data-stu-id="3e844-179">Failovers are automatic and transparent, and you simply need to select a replication level that balances cost and risk.</span></span>
* <span data-ttu-id="3e844-180">La replica del **database SQL di Azure** è automatica su scala ridotta, ma il ripristino in seguito a un'interruzione di un intero data center di Azure o a livello regionale richiede la replica geografica.</span><span class="sxs-lookup"><span data-stu-id="3e844-180">**Azure SQL Database** replication is automatic at a small scale, but recovery from a full Azure datacenter or regional outage requires geo-replication.</span></span> <span data-ttu-id="3e844-181">L'impostazione della replica geografica è manuale, ma si tratta di una funzionalità di alto livello del servizio ed è ampiamente supportata dalla documentazione.</span><span class="sxs-lookup"><span data-stu-id="3e844-181">Setting up geo-replication is manual, but it's a first-class feature of the service and well supported by documentation.</span></span>
* <span data-ttu-id="3e844-182">**Cosmos DB** è un sistema di database distribuito a livello globale e la replica è fondamentale per la sua implementazione.</span><span class="sxs-lookup"><span data-stu-id="3e844-182">**Cosmos DB** is a globally distributed database system, and replication is central to its implementation.</span></span> <span data-ttu-id="3e844-183">Con Azure Cosmos DB anziché configurare direttamente la replica si configurano le opzioni correlate al partizionamento e alla coerenza dei dati.</span><span class="sxs-lookup"><span data-stu-id="3e844-183">With Azure Cosmos DB, instead of configuring replication directly, you configure options related to partitioning and data consistency.</span></span>

<span data-ttu-id="3e844-184">Esistono molte progettazioni di replica differenti, che presentano diverse priorità in termini di costi, prestazioni e coerenza dei dati.</span><span class="sxs-lookup"><span data-stu-id="3e844-184">Many different replication designs exist that place different priorities on data consistency, performance, and cost.</span></span> <span data-ttu-id="3e844-185">La replica *attiva* richiede l'esecuzione di aggiornamenti in più repliche contemporaneamente, assicurando la coerenza a spese della velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="3e844-185">*Active* replication requires updates to take place on multiple replicas simultaneously, guaranteeing consistency at the cost of throughput.</span></span> <span data-ttu-id="3e844-186">Al contrario la replica *passiva* esegue la sincronizzazione in background, rimuovendo la replica come vincolo per le prestazioni dell'applicazione ma incrementando il valore RPO.</span><span class="sxs-lookup"><span data-stu-id="3e844-186">In contrast, *passive* replication performs synchronization in the background, removing replication as a constraint on application performance, but increasing RPO.</span></span> <span data-ttu-id="3e844-187">La replica *attiva-attiva* o *multimaster* rende possibile l'uso di più repliche contemporaneamente, consentendo il bilanciamento del carico al costo di complicare la coerenza dei dati, mentre la replica *attiva-passiva* mantiene repliche di riserva da usare esclusivamente durante il failover.</span><span class="sxs-lookup"><span data-stu-id="3e844-187">*Active-active* or *multi-master* replication enables multiple replicas to be used simultaneously, enabling load balancing at the cost of complicating data consistency, while *active-passive* replication reserves replicas for live use only during failover.</span></span>

![Un'illustrazione che mostra un esempio di replica geografica.](../media/geo-replication.png)

> [!IMPORTANT]
> <span data-ttu-id="3e844-190">**Né la replica né il backup da soli offrono una soluzione completa per il ripristino di emergenza**.</span><span class="sxs-lookup"><span data-stu-id="3e844-190">**Neither replication nor backup are complete disaster recovery solutions on their own**.</span></span> <span data-ttu-id="3e844-191">Il ripristino dei dati è un solo componente del ripristino di emergenza e la replica non soddisfa completamente molti tipi di scenari di ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="3e844-191">Data recovery is only one component of disaster recovery, and replication will not fully satisfy many kinds of disaster recovery scenarios.</span></span> <span data-ttu-id="3e844-192">Ad esempio, in uno scenario di danneggiamento dei dati, la natura del danno potrebbe consentirne la diffusione dall'archivio dati primario alle repliche, rendendo inutili tutte le repliche e richiedendo un backup per il ripristino.</span><span class="sxs-lookup"><span data-stu-id="3e844-192">For example, in a data corruption scenario, the nature of the corruption may allow it to spread from the primary data store to the replicas, rendering all the replicas useless and requiring a backup for recovery.</span></span>

### <a name="process-recovery"></a><span data-ttu-id="3e844-193">Ripristino dei processi</span><span class="sxs-lookup"><span data-stu-id="3e844-193">Process recovery</span></span>

<span data-ttu-id="3e844-194">Dopo un'emergenza, i dati aziendali non sono l'unica risorsa di cui è necessario il ripristino.</span><span class="sxs-lookup"><span data-stu-id="3e844-194">After a disaster, business data isn't the only asset that needs recovering.</span></span> <span data-ttu-id="3e844-195">Gli scenari di emergenza spesso determinano tempi di inattività, che si tratti di problemi di connettività di rete, interruzioni del data center o istanze di macchine virtuali o distribuzioni software danneggiate.</span><span class="sxs-lookup"><span data-stu-id="3e844-195">Disaster scenarios will also commonly result in downtime, whether it's due to network connectivity problems, datacenter outages, or damaged VM instances or software deployments.</span></span> <span data-ttu-id="3e844-196">La progettazione dell'applicazione deve consentire di eseguire il ripristino a uno stato funzionante.</span><span class="sxs-lookup"><span data-stu-id="3e844-196">The design of your application needs to enable you to restore it to a working state.</span></span>

<span data-ttu-id="3e844-197">Nella maggior parte dei casi il ripristino dei processi comporta il failover a una distribuzione funzionante distinta.</span><span class="sxs-lookup"><span data-stu-id="3e844-197">In most cases, process restoration involves failover to a separate, working deployment.</span></span> <span data-ttu-id="3e844-198">A seconda dello scenario, la posizione geografica può essere un aspetto critico.</span><span class="sxs-lookup"><span data-stu-id="3e844-198">Depending on the scenario, geographic location may be a critical aspect.</span></span> <span data-ttu-id="3e844-199">Ad esempio, una calamità naturale su larga scala che porta offline un'intera area di Azure richiederà il ripristino del servizio in un'altra area.</span><span class="sxs-lookup"><span data-stu-id="3e844-199">For example, a large-scale natural disaster that brings an entire Azure region offline will necessitate restoring service in another region.</span></span> <span data-ttu-id="3e844-200">I requisiti di ripristino di emergenza dell'applicazione, in particolare l'obiettivo RTO, dovrebbero guidare la progettazione e aiutare a decidere quanti ambienti replicati sono necessari, dove devono essere posizionati e se devono essere mantenuti in uno stato pronto per l'esecuzione o devono essere pronti ad accettare una distribuzione in caso di emergenza.</span><span class="sxs-lookup"><span data-stu-id="3e844-200">Your application's disaster recovery requirements, especially RTO, should drive your design and help you decide how many replicated environments you should have, where they should be located, and whether they should be maintained in a ready-to-run state or should be ready to accept a deployment in the event of disaster.</span></span>

<span data-ttu-id="3e844-201">A seconda della struttura dell'applicazione, esistono diverse strategie, servizi e funzionalità di Azure che è possibile sfruttare per migliorare il supporto dell'app per il ripristino dei processi dopo un'emergenza.</span><span class="sxs-lookup"><span data-stu-id="3e844-201">Depending on the design of your application, there are a few different strategies and Azure services and features that you can take advantage of to improve your app's support for process recovery after a disaster.</span></span>

#### <a name="azure-site-recovery"></a><span data-ttu-id="3e844-202">Azure Site Recovery</span><span class="sxs-lookup"><span data-stu-id="3e844-202">Azure Site Recovery</span></span>

<span data-ttu-id="3e844-203">Azure Site Recovery è un servizio dedicato per la gestione del ripristino dei processi per carichi di lavoro in esecuzione in macchine virtuali distribuite in Azure, macchine virtuali in esecuzione in server fisici e carichi di lavoro in esecuzione direttamente nei server fisici.</span><span class="sxs-lookup"><span data-stu-id="3e844-203">Azure Site Recovery is a service that's dedicated to managing process recovery for workloads running on VMs deployed to Azure, VMs running on physical servers, and workloads running directly on physical servers.</span></span> <span data-ttu-id="3e844-204">Site Recovery replica i carichi di lavoro in posizioni alternative, consente di eseguire il failover quando si verifica un'interruzione del servizio e supporta il test di un piano di ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="3e844-204">Site Recovery replicates workloads to alternate locations and helps you to failover when an outage occurs and supports testing of a disaster recovery plan.</span></span>

![Un'illustrazione che mostra il ruolo di Azure Site Recovery nella replica di carichi di lavoro in tre macchine virtuali ubicate dagli Stati Uniti orientali agli Stati Uniti occidentali.](../media/asr.png)

<span data-ttu-id="3e844-206">Site Recovery supporta la replica di intere macchine virtuali e immagini di server fisici, nonché di singoli *carichi di lavoro*, dove un carico di lavoro può essere una singola applicazione, un'intera macchina virtuale o un sistema operativo con le relative applicazioni.</span><span class="sxs-lookup"><span data-stu-id="3e844-206">Site Recovery supports replicating whole VMs and physical server images as well as individual *workloads*, where a workload may be an individual application or an entire VM or operating system with its applications.</span></span> <span data-ttu-id="3e844-207">È possibile replicare qualsiasi carico di lavoro dell'applicazione, ma Site Recovery offre un supporto integrato di alto livello per numerose applicazioni server Microsoft, come SQL Server e SharePoint, nonché per un numero limitato di applicazioni di terze parti come SAP.</span><span class="sxs-lookup"><span data-stu-id="3e844-207">Any application workload can be replicated, but Site Recovery has first-class integrated support for many Microsoft server applications, such as SQL Server and SharePoint, as well as a handful of third-party applications like SAP.</span></span>

<span data-ttu-id="3e844-208">Per tutte le app eseguite su macchine virtuali o server fisici, è consigliabile quantomeno investigare la possibilità di usare Azure Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="3e844-208">Any app that runs on VMs or physical servers should at least investigate the use of Azure Site Recovery.</span></span> <span data-ttu-id="3e844-209">Questo approccio è ideale per scoprire e valutare scenari e possibilità per il ripristino dei processi.</span><span class="sxs-lookup"><span data-stu-id="3e844-209">It's a great way to discover and explore scenarios and possibilities for process recovery.</span></span>

#### <a name="service-specific-features"></a><span data-ttu-id="3e844-210">Funzionalità specifiche dei servizi</span><span class="sxs-lookup"><span data-stu-id="3e844-210">Service-specific features</span></span>

<span data-ttu-id="3e844-211">Per le app eseguite nelle offerte PaaS di Azure come Servizio app, la maggior parte di questi servizi offre funzionalità e indicazioni per il supporto del ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="3e844-211">For apps that run on Azure PaaS offerings like App Service, most such services offer features and guidance for supporting disaster recovery.</span></span> <span data-ttu-id="3e844-212">In alcuni scenari è possibile usare funzionalità specifiche dei servizi per supportare il ripristino rapido.</span><span class="sxs-lookup"><span data-stu-id="3e844-212">For certain scenarios, you can use service-specific features to support fast recovery.</span></span> <span data-ttu-id="3e844-213">Ad esempio, il server SQL Azure supporta la replica geografica per il ripristino rapido del servizio in un'altra area.</span><span class="sxs-lookup"><span data-stu-id="3e844-213">For example, Azure SQL Server supports geo-replication for quickly restoring service in another region.</span></span> <span data-ttu-id="3e844-214">Il servizio app di Azure offre funzionalità di backup e ripristino; la documentazione include indicazioni per l'uso di Gestione traffico di Azure per il supporto del routing del traffico a un'area secondaria.</span><span class="sxs-lookup"><span data-stu-id="3e844-214">Azure App Service has a Backup and Restore feature, and the documentation includes guidance for using Azure Traffic Manager to support routing traffic to a secondary region.</span></span>

![Un'illustrazione che mostra all'interno di un'area geografica una coppia di aree costituite da singoli data center.](../media/AzRegionPairs.png)

## <a name="testing-a-disaster-recovery-plan"></a><span data-ttu-id="3e844-216">Test di un piano di ripristino di emergenza</span><span class="sxs-lookup"><span data-stu-id="3e844-216">Testing a disaster recovery plan</span></span>

<span data-ttu-id="3e844-217">La pianificazione del ripristino di emergenza non termina con il completamento del piano.</span><span class="sxs-lookup"><span data-stu-id="3e844-217">Disaster recovery planning doesn't end once you have a completed plan in hand.</span></span> <span data-ttu-id="3e844-218">Testare il piano è un aspetto fondamentale del ripristino di emergenza, per garantire che le indicazioni e le spiegazioni siano chiare e aggiornate.</span><span class="sxs-lookup"><span data-stu-id="3e844-218">Testing the plan is a crucial aspect of disaster recovery, to ensure that the directions and explanations are clear and up-to-date.</span></span>

<span data-ttu-id="3e844-219">Scegliere gli intervalli per l'esecuzione dei diversi tipi e ambiti di test, ad esempio test dei backup e dei meccanismi di failover ogni mese e simulazione di ripristino di emergenza su larga scala ogni sei mesi.</span><span class="sxs-lookup"><span data-stu-id="3e844-219">Choose intervals to perform different types and scopes of tests, such as testing backups and failover mechanisms every month, and performing a full-scale disaster recovery simulation every six months.</span></span> <span data-ttu-id="3e844-220">Seguire sempre le procedure e i dettagli esattamente come sono documentati nel piano. Eventualmente, è possibile richiedere a qualcuno che non ha familiarità con il piano di comunicare il proprio punto di vista su tutto ciò che potrebbe essere reso più chiaro.</span><span class="sxs-lookup"><span data-stu-id="3e844-220">Always follow the steps and details exactly as they're documented in the plan, and consider having someone unfamiliar with the plan give perspective on anything that could be made clearer.</span></span> <span data-ttu-id="3e844-221">Quando si esegue il test, identificare le lacune, le aree di miglioramento e le operazioni da automatizzare e aggiungere tutti questi miglioramenti al piano.</span><span class="sxs-lookup"><span data-stu-id="3e844-221">As you execute the test, identify gaps, areas of improvement, and places to automate and add these enhancements to your plan.</span></span>

<span data-ttu-id="3e844-222">Assicurarsi di includere nei test anche il sistema di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="3e844-222">Make sure to include your monitoring system in your testing as well.</span></span> <span data-ttu-id="3e844-223">Ad esempio, se l'applicazione supporta il failover automatizzato, introdurre errori in una dipendenza o un altro componente di importanza critica per assicurarsi che l'applicazione funzioni correttamente end-to-end, con rilevamento dell'errore e attivazione del failover automatizzato.</span><span class="sxs-lookup"><span data-stu-id="3e844-223">For example, if your application supports automated failover, introduce failures in a dependency or other critical component to ensure that the application behaves correctly end-to-end, including detection of the failure and triggering of the automated failover.</span></span>

 <span data-ttu-id="3e844-224">Identificando attentamente i requisiti e articolando un piano, sarà possibile determinare i tipi di servizi da usare per soddisfare gli obiettivi di ripristino.</span><span class="sxs-lookup"><span data-stu-id="3e844-224">By carefully identifying your requirements and laying out a plan, you'll be able to determine what types of services you'll need to use to meet your recovery objectives.</span></span> <span data-ttu-id="3e844-225">Azure offre diversi servizi e funzionalità che consentono di soddisfare questi obiettivi.</span><span class="sxs-lookup"><span data-stu-id="3e844-225">Azure provides several services and features to help you meet these objectives.</span></span>
