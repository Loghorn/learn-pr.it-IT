<span data-ttu-id="2d751-101">Di recente Lamna Healthcare ha sperimentato un'interruzione significativa in un'applicazione Web lato clienti.</span><span class="sxs-lookup"><span data-stu-id="2d751-101">Lamna Healthcare recently experienced a significant outage to a customer-facing web application.</span></span> <span data-ttu-id="2d751-102">A un tecnico è stato concesso l'accesso completo a un gruppo di risorse contenente l'applicazione Web di produzione.</span><span class="sxs-lookup"><span data-stu-id="2d751-102">An engineer was granted full access to a resource group containing the production web application.</span></span> <span data-ttu-id="2d751-103">Questa persona ha accidentalmente eliminato il gruppo di risorse e tutte le risorse figlio, incluso il database che ospitava i dati dei clienti in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="2d751-103">This person accidentally deleted the resource group and all child resources, including the database hosting live customer data.</span></span> 

<span data-ttu-id="2d751-104">Per fortuna, il codice sorgente dell'applicazione e le risorse erano disponibili nel controllo del codice sorgente e venivano eseguiti automaticamente backup periodici in base a una pianificazione.</span><span class="sxs-lookup"><span data-stu-id="2d751-104">Fortunately, the application source code and resources were available in source control and regular database backups were running automatically on a schedule.</span></span> <span data-ttu-id="2d751-105">Pertanto il servizio è stato ripristinato in modo relativamente semplice.</span><span class="sxs-lookup"><span data-stu-id="2d751-105">Therefore the service was reinstated relatively easily.</span></span> <span data-ttu-id="2d751-106">In questo articolo verrà illustrato il modo in cui questa interruzione avrebbe potuto essere evitata usando le funzionalità in Azure per proteggere l'accesso all'infrastruttura.</span><span class="sxs-lookup"><span data-stu-id="2d751-106">Here, we will explore how this outage could have been avoided by utilizing capabilities on Azure to protect the access to infrastructure.</span></span>

## <a name="criticality-of-infrastructure"></a><span data-ttu-id="2d751-107">Criticità dell'infrastruttura</span><span class="sxs-lookup"><span data-stu-id="2d751-107">Criticality of infrastructure</span></span>

<span data-ttu-id="2d751-108">L'infrastruttura cloud sta diventando un elemento fondamentale di molte aziende.</span><span class="sxs-lookup"><span data-stu-id="2d751-108">Cloud infrastructure is becoming a critical piece of many businesses.</span></span> <span data-ttu-id="2d751-109">È essenziale assicurarsi che persone e processi abbiano solo i diritti strettamente necessari per svolgere il proprio compito.</span><span class="sxs-lookup"><span data-stu-id="2d751-109">It is critical to ensure people and processes have only the rights they need to get their job done.</span></span> <span data-ttu-id="2d751-110">L'assegnazione di un accesso non corretto può comportare perdita o divulgazione accidentale di dati o indisponibilità di servizi.</span><span class="sxs-lookup"><span data-stu-id="2d751-110">Assigning incorrect access can result in data loss, data leakage, or cause services to become unavailable.</span></span> 

<span data-ttu-id="2d751-111">Gli amministratori di sistema possono essere responsabili di un numero elevato di utenti, sistemi e set di autorizzazioni.</span><span class="sxs-lookup"><span data-stu-id="2d751-111">System administrators can be responsible for a large number of users, systems, and permission sets.</span></span> <span data-ttu-id="2d751-112">Di conseguenza, la concessione dell'accesso appropriato può diventare rapidamente ingestibile, traducendosi nell'applicazione di un approccio unico in tutti i casi.</span><span class="sxs-lookup"><span data-stu-id="2d751-112">So correctly granting access can quickly become unmanageable and can lead to a 'one size fits all' approach.</span></span> <span data-ttu-id="2d751-113">Questo approccio può ridurre la complessità dell'amministrazione, ma rende molto più facile concedere involontariamente un accesso più permissivo di quanto necessario.</span><span class="sxs-lookup"><span data-stu-id="2d751-113">This approach can reduce the complexity of administration, but makes it far easier to inadvertently grant more permissive access than required.</span></span>

## <a name="role-based-access-control"></a><span data-ttu-id="2d751-114">Controllo degli accessi in base al ruolo</span><span class="sxs-lookup"><span data-stu-id="2d751-114">Role-based access control</span></span>

<span data-ttu-id="2d751-115">Il controllo degli accessi in base al ruolo offre un approccio leggermente diverso.</span><span class="sxs-lookup"><span data-stu-id="2d751-115">Role-based access control (RBAC) offers a slightly different approach.</span></span> <span data-ttu-id="2d751-116">I ruoli sono definiti come raccolte di autorizzazioni di accesso.</span><span class="sxs-lookup"><span data-stu-id="2d751-116">Roles are defined as collections of access permissions.</span></span> <span data-ttu-id="2d751-117">Le entità di sicurezza vengono mappate ai ruoli direttamente o tramite l'appartenenza a gruppi.</span><span class="sxs-lookup"><span data-stu-id="2d751-117">Security principals are mapped to roles directly or through group membership.</span></span> <span data-ttu-id="2d751-118">La separazione di entità di sicurezza, autorizzazioni di accesso e risorse fornisce una gestione semplificata degli accessi e un controllo più granulare.</span><span class="sxs-lookup"><span data-stu-id="2d751-118">Separating security principals, access permissions, and resources provides simplified access management and more fine-grained control.</span></span>

<span data-ttu-id="2d751-119">In Azure, gli utenti, i gruppi e i ruoli vengono archiviati in Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="2d751-119">On Azure, users, groups, and roles are all stored in Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="2d751-120">L'API di Azure Resource Manager usa il controllo degli accessi in base al ruolo per proteggere la gestione dell'accesso a tutte le risorse all'interno di Azure.</span><span class="sxs-lookup"><span data-stu-id="2d751-120">The Azure Resource Manager API uses role-based access control to secure all resource access management within Azure.</span></span>

![Accesso basato su ACL](../media-draft/ACL_Based_Access.png)

<!-- ![Role-based access control](../media-draft/Role_Based_Access.png)
 -->

### <a name="roles-and-management-groups"></a><span data-ttu-id="2d751-122">Ruoli e gruppi di gestione</span><span class="sxs-lookup"><span data-stu-id="2d751-122">Roles and management groups</span></span>

<span data-ttu-id="2d751-123">I ruoli sono set di autorizzazioni, ad esempio "Sola lettura" o "Collaboratore", che è possibile concedere agli utenti per l'accesso a un'istanza di un servizio di Azure.</span><span class="sxs-lookup"><span data-stu-id="2d751-123">Roles are sets of permissions, like "Read-only" or "Contributor", that users can be granted to access an Azure service instance.</span></span> <span data-ttu-id="2d751-124">I ruoli possono essere concessi a livello di singola istanza del servizio, ma vengono anche propagati verso il basso nella gerarchia di Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="2d751-124">Roles can be granted at the individual service instance level, but they also flow down the Azure Resource Manager hierarchy.</span></span> <span data-ttu-id="2d751-125">I ruoli assegnati in un ambito più elevato, ad esempio un'intera sottoscrizione, vengono ereditati dagli ambiti figlio, come le istanze del servizio.</span><span class="sxs-lookup"><span data-stu-id="2d751-125">Roles assigned at a higher scope, like an entire subscription, are inherited by child scopes, like service instances.</span></span> 

<span data-ttu-id="2d751-126">I gruppi di gestione sono un ulteriore livello gerarchico recentemente introdotto nel modello di controllo degli accessi in base al ruolo.</span><span class="sxs-lookup"><span data-stu-id="2d751-126">Management groups are an additional hierarchical level recently introduced into the RBAC model.</span></span> <span data-ttu-id="2d751-127">I gruppi di gestione aggiungono la capacità di raggruppare le sottoscrizioni e applicare criteri a un livello ancora superiore.</span><span class="sxs-lookup"><span data-stu-id="2d751-127">Management groups add the ability to group subscriptions together and apply policy at an even higher level.</span></span>

<span data-ttu-id="2d751-128">La possibilità di propagare i ruoli tramite una gerarchia definita in modo arbitrario consente inoltre agli amministratori di concedere l'accesso temporaneo a un intero ambiente per gli utenti autenticati.</span><span class="sxs-lookup"><span data-stu-id="2d751-128">The ability to flow roles through an arbitrarily defined subscription hierarchy also allows administrators to grant temporary access to an entire environment for authenticated users.</span></span> <span data-ttu-id="2d751-129">Ad esempio, un revisore potrebbe richiedere l'accesso temporaneo in sola lettura a tutte le sottoscrizioni.</span><span class="sxs-lookup"><span data-stu-id="2d751-129">For example, an auditor may require temporary read-only access to all subscriptions.</span></span>

![Gruppi di gestione](../media-draft/management_groups.png)

### <a name="privileged-identity-management"></a><span data-ttu-id="2d751-131">Privileged Identity Management</span><span class="sxs-lookup"><span data-stu-id="2d751-131">Privileged Identity Management</span></span>

<span data-ttu-id="2d751-132">Oltre alla gestione dell'accesso alle risorse di Azure tramite il controllo degli accessi in base al ruolo, per un approccio completo alla protezione dell'infrastruttura è consigliabile includere il controllo continuativo dei membri dei ruoli man mano che l'organizzazione cambia e si evolve.</span><span class="sxs-lookup"><span data-stu-id="2d751-132">In addition to managing Azure resource access with RBAC, a comprehensive approach to infrastructure protection should consider including the ongoing auditing of role members as their organization changes and evolves.</span></span> <span data-ttu-id="2d751-133">Azure AD Privileged Identity Management (PIM) è un'offerta a pagamento aggiuntiva che fornisce supervisione delle assegnazioni di ruolo, funzionalità self-service, attivazione dei ruoli just-in-time e verifiche di accesso alle risorse di Azure AD e Azure.</span><span class="sxs-lookup"><span data-stu-id="2d751-133">Azure AD Privileged Identity Management (PIM) is an additional paid-for offering that provides oversight of role assignments, self-service, and just-in-time role activation and Azure AD & Azure resource access reviews.</span></span>

![Privileged Identity Management](../media-draft/PIM_Dashboard.PNG)

## <a name="providing-identities-to-services"></a><span data-ttu-id="2d751-135">Assegnazione di identità ai servizi</span><span class="sxs-lookup"><span data-stu-id="2d751-135">Providing identities to services</span></span>

<span data-ttu-id="2d751-136">Spesso è utile assegnare ai servizi un'identità.</span><span class="sxs-lookup"><span data-stu-id="2d751-136">It's often valuable for services to have identities.</span></span> <span data-ttu-id="2d751-137">Di frequente, e in contrasto con le procedure consigliate, le informazioni relative alle credenziali vengono incorporate nei file di configurazione.</span><span class="sxs-lookup"><span data-stu-id="2d751-137">Often times, and against best practices, credential information is embedded in configuration files.</span></span> <span data-ttu-id="2d751-138">Se questi file di configurazione non sono protetti, chiunque disponga di accesso ai sistemi o ai repository può accedere alle credenziali e rischiare l'esposizione.</span><span class="sxs-lookup"><span data-stu-id="2d751-138">With no security around these configuration files, anyone with access to the systems or repositories can access these credentials and risk exposure.</span></span>

<span data-ttu-id="2d751-139">Azure AD risolve questo problema tramite due metodi: entità servizio e identità del servizio gestite.</span><span class="sxs-lookup"><span data-stu-id="2d751-139">Azure AD addresses this problem through two methods: service principals and managed service identities.</span></span>

### <a name="service-principals"></a><span data-ttu-id="2d751-140">Entità servizio</span><span class="sxs-lookup"><span data-stu-id="2d751-140">Service principals</span></span>

<span data-ttu-id="2d751-141">Per comprendere le entità servizio, è utile comprendere prima di tutto i termini **identità** ed **entità di sicurezza** nell'accezione in cui vengono usati nell'ambito della gestione delle identità.</span><span class="sxs-lookup"><span data-stu-id="2d751-141">To understand service principals, it's useful to first understand the words **identity** and **principal** as they are used in Identity management world.</span></span>

<span data-ttu-id="2d751-142">Un'**identità** è semplicemente un elemento che può essere autenticato.</span><span class="sxs-lookup"><span data-stu-id="2d751-142">An **identity** is just a thing that can be authenticated.</span></span> <span data-ttu-id="2d751-143">Ovviamente questo include gli utenti con nome utente e password, ma può anche includere applicazioni o altri server, che possono eseguire l'autenticazione con certificati o chiavi private.</span><span class="sxs-lookup"><span data-stu-id="2d751-143">Obviously this includes users with username and password, but it can also include applications or other servers, which might authenticate with secret keys or certificates.</span></span> <span data-ttu-id="2d751-144">Un **account** rappresenta i dati associati a un'identità.</span><span class="sxs-lookup"><span data-stu-id="2d751-144">As a bonus definition, an **account** is data associated with an identity.</span></span>

<span data-ttu-id="2d751-145">Un'**entità di sicurezza** è un'identità che agisce con determinati ruoli o attestazioni.</span><span class="sxs-lookup"><span data-stu-id="2d751-145">A **principal** is an identity acting with certain roles or claims.</span></span> <span data-ttu-id="2d751-146">Spesso non è utile considerare identità ed entità di sicurezza separatamente. Si pensi all'uso di "sudo" in un prompt di Bash o al comando "Esegui come amministratore" di Windows.</span><span class="sxs-lookup"><span data-stu-id="2d751-146">Often it is not useful to consider identity and principal separately, but think of using 'sudo' on a bash prompt or on Windows using "run as Administrator".</span></span> <span data-ttu-id="2d751-147">In entrambi i casi si resta connessi con l'identità precedente, ma cambia il ruolo con cui si sta operando.</span><span class="sxs-lookup"><span data-stu-id="2d751-147">In both of those cases, you are still logged in as the same identity as before, but you've changed the role under which you are executing.</span></span>

<span data-ttu-id="2d751-148">Pertanto, un'**entità servizio** è, letteralmente,</span><span class="sxs-lookup"><span data-stu-id="2d751-148">So a **Service Principal** is literally named.</span></span> <span data-ttu-id="2d751-149">un'identità che viene usata da un servizio o un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="2d751-149">It is an identity that is used by a service or application.</span></span> <span data-ttu-id="2d751-150">Come le altre identità, possono esserle assegnati dei ruoli.</span><span class="sxs-lookup"><span data-stu-id="2d751-150">Like other identities, it can be assigned roles.</span></span> 

<span data-ttu-id="2d751-151">Ad esempio, Lamna Healthcare può stabilire che l'esecuzione degli script di distribuzione avvenga previa autenticazione come entità servizio.</span><span class="sxs-lookup"><span data-stu-id="2d751-151">For example, Lamna Healthcare can assign its deployment scripts to run authenticated as a service principal.</span></span> <span data-ttu-id="2d751-152">Se questa è l'unica identità autorizzata a eseguire azioni distruttive, Lamna avrà compiuto notevoli progressi per assicurarsi che non si verifichi nuovamente un caso di eliminazione accidentale di risorse.</span><span class="sxs-lookup"><span data-stu-id="2d751-152">If that is the only identity that has permission to perform destructive actions, Lamna will have gone a long way toward making sure they don't have a repeat of the accidental resource deletion.</span></span>

### <a name="managed-service-identities"></a><span data-ttu-id="2d751-153">Identità del servizio gestite</span><span class="sxs-lookup"><span data-stu-id="2d751-153">Managed Service Identities</span></span>

<span data-ttu-id="2d751-154">La creazione di entità servizio può essere un'operazione laboriosa e la presenza di numerosi touch point può complicarne la gestione.</span><span class="sxs-lookup"><span data-stu-id="2d751-154">The creation of service principals can be a tedious process, and there are a lot of touch points that can make maintaining them difficult.</span></span> <span data-ttu-id="2d751-155">Le identità del servizio gestite sono molto più semplici e svolgono la maggior parte del lavoro automaticamente.</span><span class="sxs-lookup"><span data-stu-id="2d751-155">Manage Service Identities (MSI) are much easier and will do most of the work for you.</span></span> 

<span data-ttu-id="2d751-156">È possibile creare immediatamente un'identità del servizio gestita per qualsiasi servizio di Azure che la supporti (l'elenco è in continua espansione).</span><span class="sxs-lookup"><span data-stu-id="2d751-156">An MSI can be instantly created for any Azure service that supports it (the list is constantly growing).</span></span> <span data-ttu-id="2d751-157">Quando si crea un'identità del servizio gestita per un servizio, si crea di fatto un account nel tenant di Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="2d751-157">When you create an MSI for a service, you are creating an account on the Azure Active Directory tenant.</span></span> <span data-ttu-id="2d751-158">L'infrastruttura di Azure si occuperà automaticamente di autenticare il servizio e gestire l'account.</span><span class="sxs-lookup"><span data-stu-id="2d751-158">Azure infrastructure will automatically take care of authenticating the service and managing the account.</span></span> <span data-ttu-id="2d751-159">Si può quindi usare questo account come qualsiasi altro account di Active Directory, incluso permettere in tutta sicurezza che il servizio autenticato acceda ad altre risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="2d751-159">You can then use that account like any other AD account including securely letting the authenticated service access other Azure resources.</span></span>

<span data-ttu-id="2d751-160">Lamna Healthcare compie un ulteriore passo avanti nella gestione delle identità e utilizza identità del servizio gestite per tutti i servizi supportati che devono avere la capacità di eseguire distribuzioni e operazioni di gestione dell'infrastruttura.</span><span class="sxs-lookup"><span data-stu-id="2d751-160">Lamna Healthcare takes their identity management a step further and uses MSIs for all supported services that need the ability to perform infrastructure management and deployments.</span></span>

## <a name="infrastructure-protection-at-lamna-healthcare"></a><span data-ttu-id="2d751-161">Protezione dell'infrastruttura in Lamna Healthcare</span><span class="sxs-lookup"><span data-stu-id="2d751-161">Infrastructure protection at Lamna Healthcare</span></span>

<span data-ttu-id="2d751-162">Abbiamo visto come Lamna Healthcare ha risolto i problemi emersi dall'incidente in cui l'infrastruttura è stata eliminata involontariamente.</span><span class="sxs-lookup"><span data-stu-id="2d751-162">We've seen how Lamna Healthcare has addressed issues from their incident where infrastructure was inadvertently deleted.</span></span> <span data-ttu-id="2d751-163">Ha usato il controllo degli accessi in base al ruolo per gestire meglio la sicurezza dell'infrastruttura e usa le identità del servizio gestite per mantenere le credenziali all'esterno del codice e semplificare l'amministrazione delle identità necessarie per i propri servizi.</span><span class="sxs-lookup"><span data-stu-id="2d751-163">They've used role-based access control to better manage the security of their infrastructure, and are using managed service identities to keep their credentials out of code and ease administration of the identities needed for their services.</span></span>

## <a name="summary"></a><span data-ttu-id="2d751-164">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="2d751-164">Summary</span></span>

<span data-ttu-id="2d751-165">Per garantire la disponibilità e l'integrità dell'infrastruttura, è importante proteggerla adeguatamente.</span><span class="sxs-lookup"><span data-stu-id="2d751-165">To ensure the availability and integrity of infrastructure, it's important to properly secure your infrastructure.</span></span> <span data-ttu-id="2d751-166">L'uso corretto di funzionalità come il controllo degli accessi in base al ruolo e le identità del servizio gestite consente di proteggere l'ambiente Azure da accessi non autorizzati o non previsti e migliorerà la sicurezza delle identità nell'architettura.</span><span class="sxs-lookup"><span data-stu-id="2d751-166">Properly using features such as RBAC and managed service identities will help protect your Azure environment from unauthorized or unintended access, and will enhance the identity security capabilities in your architecture.</span></span>