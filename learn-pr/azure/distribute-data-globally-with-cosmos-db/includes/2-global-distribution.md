<span data-ttu-id="955ef-101">Fornire ai clienti l'accesso più rapido ai prodotti in un sito di abbigliamento online è fondamentale per i clienti e il successo di un'azienda.</span><span class="sxs-lookup"><span data-stu-id="955ef-101">Providing your customers the fastest access to the products on your online clothing site is paramount to your customers, and your businesses success.</span></span> <span data-ttu-id="955ef-102">Riducendo la distanza tra i dati e l'utente, è possibile distribuire più contenuti più rapidamente.</span><span class="sxs-lookup"><span data-stu-id="955ef-102">By decreasing the distance data has to travel to your users, you can deliver more content faster.</span></span> <span data-ttu-id="955ef-103">Se i dati sono archiviati in Azure Cosmos DB, per la replica dei dati del sito in più aree in tutto il mondo è sufficiente un clic.</span><span class="sxs-lookup"><span data-stu-id="955ef-103">If your data is stored in Azure Cosmos DB, replicating your site's data to multiple regions around the world is a point and click operation.</span></span> 

<!-- Activate the sandbox -->
[!include[](../../../includes/azure-sandbox-activate.md)]

<span data-ttu-id="955ef-104">In questa unità vengono illustrati i vantaggi della distribuzione globale e un servizio di database multimaster nativo, quindi l'account verrà replicato in tre aree aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="955ef-104">In this unit you'll learn the benefits of global distribution and a natively multi-mastered database service, and then replicate your account into three additional regions.</span></span>

## <a name="global-distribution-basics"></a><span data-ttu-id="955ef-105">Nozioni fondamentali sulla distribuzione globale</span><span class="sxs-lookup"><span data-stu-id="955ef-105">Global distribution basics</span></span>

<span data-ttu-id="955ef-106">La distribuzione globale consente di replicare i dati da un'area in più aree di Azure.</span><span class="sxs-lookup"><span data-stu-id="955ef-106">Global distribution enables you to replicate data from one region into multiple Azure regions.</span></span> <span data-ttu-id="955ef-107">È possibile aggiungere o rimuovere le aree in cui il database viene replicato in qualsiasi momento e Azure Cosmos DB garantisce che, quando si aggiunge una nuova area, i dati siano disponibili per le operazioni entro 30 minuti, presupponendo che i dati siano di 100 TB o meno.</span><span class="sxs-lookup"><span data-stu-id="955ef-107">You can add or remove regions in which your database is replicated at any time, and Azure Cosmos DB ensures that when you add an additional region, your data is available for operations within 30 minutes, assuming your data is 100 TBs or less.</span></span>

<span data-ttu-id="955ef-108">Esistono due scenari comuni per la replica dei dati in due o più aree:</span><span class="sxs-lookup"><span data-stu-id="955ef-108">There are two common scenarios for replicating data in two or more regions:</span></span>

1. <span data-ttu-id="955ef-109">Offerta di accesso ai dati con bassa latenza indipendentemente dalla posizione del mondo in cui si trovano gli utenti finali</span><span class="sxs-lookup"><span data-stu-id="955ef-109">Delivering low-latency data access to end users no matter where they are located around the globe</span></span>
2. <span data-ttu-id="955ef-110">Aggiunta di resilienza a livello di area per garantire continuità aziendale e ripristino di emergenza (BCDR)</span><span class="sxs-lookup"><span data-stu-id="955ef-110">Adding regional resiliency for business continuity and disaster recovery (BCDR)</span></span>

<span data-ttu-id="955ef-111">Per offrire accesso con bassa latenza ai clienti, è consigliabile replicare i dati nelle aree più vicine alla posizione degli utenti.</span><span class="sxs-lookup"><span data-stu-id="955ef-111">To deliver low-latency access to customers, it is recommended that you replicate the data to regions closest to where your users are.</span></span> <span data-ttu-id="955ef-112">L'azienda di abbigliamento online di esempio ha clienti a Los Angeles, New York e Tokyo.</span><span class="sxs-lookup"><span data-stu-id="955ef-112">For your online clothing company, you have customers in Los Angeles, New York, and Tokyo.</span></span> <span data-ttu-id="955ef-113">Esaminiamo la pagina [Aree di Azure](https://azure.microsoft.com/global-infrastructure/regions/)e determiniamo le aree più vicine a questi gruppi di clienti, in quanto si tratta delle posizioni in cui verranno replicati gli utenti.</span><span class="sxs-lookup"><span data-stu-id="955ef-113">Take a look at the [Azure regions](https://azure.microsoft.com/global-infrastructure/regions/) page, and determine the closest regions to those sets of customers, as those are the locations you'll replicate users to.</span></span>

<span data-ttu-id="955ef-114">Per offrire una soluzione BCDR, è consigliabile aggiungere le aree in base alle coppie di aree descritte nell'articolo [Continuità aziendale e ripristino di emergenza nelle aree geografiche abbinate di Azure](https://azure.microsoft.com/documentation/articles/best-practices-availability-paired-regions/).</span><span class="sxs-lookup"><span data-stu-id="955ef-114">To provide a BCDR solution, it is recommended to add regions based on the region pairs described in the [Business continuity and disaster recovery (BCDR): Azure Paired Regions](https://azure.microsoft.com/documentation/articles/best-practices-availability-paired-regions/) article.</span></span>

<span data-ttu-id="955ef-115">Quando un database viene replicato, vengono replicate in modo uniforme anche la velocità effettiva e la risorsa di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="955ef-115">When a database is replicated, the throughput and storage are replicated equally as well.</span></span> <span data-ttu-id="955ef-116">Pertanto, se il database originale ha uno spazio di archiviazione di 10 GB e una velocità effettiva di 1.000 UR/s e viene replicato in altre tre aree, ogni area includerà 10 GB di dati e 1.000 UR/s di velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="955ef-116">So if your original database had 10GB of storage, and throughput of 1,000 RU/s, and if you replicated that to three additional regions, each region would have 10GB of data and 1,000 RU/s of throughput.</span></span> <span data-ttu-id="955ef-117">Poiché la risorsa di archiviazione e la velocità effettiva vengono replicate in ogni area, il costo della replica in un'area è lo stesso dell'area originale, pertanto la replica in 3 aree aggiuntive costerà circa quattro volte in più rispetto al database originale non replicato.</span><span class="sxs-lookup"><span data-stu-id="955ef-117">Because the storage and throughput is replicated in each region, the cost of replicating to a region is the same as the original region, so replicating to 3 additional regions, would cost approximately four times the original non-replicated database.</span></span>

## <a name="creating-an-azure-cosmos-db-account-in-the-portal"></a><span data-ttu-id="955ef-118">Creare un account Azure Cosmos DB nel portale</span><span class="sxs-lookup"><span data-stu-id="955ef-118">Creating an Azure Cosmos DB account in the portal</span></span>

1. <span data-ttu-id="955ef-119">Accedere al [portale di Azure](https://portal.azure.com/triplecrownlabs.onmicrosoft.com?azure-portal=true) usando lo stesso account con cui è stato attivato il sandbox.</span><span class="sxs-lookup"><span data-stu-id="955ef-119">Sign in to the [Azure portal](https://portal.azure.com/triplecrownlabs.onmicrosoft.com?azure-portal=true) using the same account you used to activate the sandbox.</span></span>

    > [!IMPORTANT]
    > <span data-ttu-id="955ef-120">Accedere al portale di Azure e all'ambiente sandbox con lo stesso account.</span><span class="sxs-lookup"><span data-stu-id="955ef-120">Login to the Azure portal and the sandbox with the same account.</span></span>
    > 
    > <span data-ttu-id="955ef-121">Accedere al portale di Azure usando il collegamento precedente per assicurarsi di connettersi connessi al sandbox, che fornisce l'accesso a una sottoscrizione Concierge.</span><span class="sxs-lookup"><span data-stu-id="955ef-121">Login to the Azure portal using the link above to ensure you are connected to the sandbox, which provides access to a Concierge Subscription.</span></span>

1. <span data-ttu-id="955ef-122">Fare clic su **Crea una risorsa** > **Database** > **Azure Cosmos DB**.</span><span class="sxs-lookup"><span data-stu-id="955ef-122">Click **Create a resource** > **Databases** > **Azure Cosmos DB**.</span></span>
   
   ![Riquadro Database nel portale di Azure](../media/2-global-distribution/2-create-nosql-db-databases-json-tutorial.png)

1. <span data-ttu-id="955ef-124">Nella pagina **Crea un account Azure Cosmos DB** immettere le impostazioni per il nuovo account Azure Cosmos DB, inclusa la posizione.</span><span class="sxs-lookup"><span data-stu-id="955ef-124">On the **Create Azure Cosmos DB Account** page, enter the settings for the new Azure Cosmos DB account, including the location.</span></span>

    <span data-ttu-id="955ef-125"><!-- Resource selection --> [!include[](../../../includes/azure-sandbox-regions-first-mention-note-friendly.md)]</span><span class="sxs-lookup"><span data-stu-id="955ef-125"><!-- Resource selection --> [!include[](../../../includes/azure-sandbox-regions-first-mention-note-friendly.md)]</span></span>
     
    <span data-ttu-id="955ef-126">Impostazione</span><span class="sxs-lookup"><span data-stu-id="955ef-126">Setting</span></span>|<span data-ttu-id="955ef-127">Valore</span><span class="sxs-lookup"><span data-stu-id="955ef-127">Value</span></span>|<span data-ttu-id="955ef-128">Descrizione</span><span class="sxs-lookup"><span data-stu-id="955ef-128">Description</span></span>
    ---|---|---
    <span data-ttu-id="955ef-129">ID</span><span class="sxs-lookup"><span data-stu-id="955ef-129">ID</span></span>|<span data-ttu-id="955ef-130">*Immettere un nome univoco*</span><span class="sxs-lookup"><span data-stu-id="955ef-130">*Enter a unique name*</span></span>|<span data-ttu-id="955ef-131">Immettere un nome univoco per identificare l'account Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="955ef-131">Enter a unique name to identify this Azure Cosmos DB account.</span></span> <span data-ttu-id="955ef-132">Dato che all'ID specificato viene aggiunto *documents.azure.com* per creare l'URI, usare un ID univoco ma identificabile.</span><span class="sxs-lookup"><span data-stu-id="955ef-132">Because *documents.azure.com* is appended to the ID that you provide to create your URI, use a unique but identifiable ID.</span></span><br><br><span data-ttu-id="955ef-133">L'ID può contenere solo lettere minuscole, numeri e il segno meno (-) e deve avere una lunghezza compresa tra 3 e 50 caratteri.</span><span class="sxs-lookup"><span data-stu-id="955ef-133">The ID can contain only lowercase letters, numbers, and the hyphen (-) character, and it must contain 3 to 50 characters.</span></span>
    <span data-ttu-id="955ef-134">API</span><span class="sxs-lookup"><span data-stu-id="955ef-134">API</span></span>|<span data-ttu-id="955ef-135">SQL</span><span class="sxs-lookup"><span data-stu-id="955ef-135">SQL</span></span>|<span data-ttu-id="955ef-136">L'API determina il tipo di account da creare.</span><span class="sxs-lookup"><span data-stu-id="955ef-136">The API determines the type of account to create.</span></span> <span data-ttu-id="955ef-137">Azure Cosmos DB offre cinque API per soddisfare le esigenze dell'applicazione: SQL (database di documenti), Gremlin (database a grafo), MongoDB (database di documenti), Tabella di Azure e Cassandra. Per ogni API è attualmente necessario un account separato.</span><span class="sxs-lookup"><span data-stu-id="955ef-137">Azure Cosmos DB provides five APIs to suit the needs of your application: SQL (document database), Gremlin (graph database), MongoDB (document database), Azure Table, and Cassandra, each of which currently requires a separate account.</span></span> <br><br><span data-ttu-id="955ef-138">Selezionare **SQL** perché in questo modulo si crea un database di documenti disponibile per query con sintassi SQL e accessibile con l'API SQL.</span><span class="sxs-lookup"><span data-stu-id="955ef-138">Select **SQL** because in this module you are creating a document database that is queryable using SQL syntax and accessible with the SQL API.</span></span>|
    <span data-ttu-id="955ef-139">Sottoscrizione</span><span class="sxs-lookup"><span data-stu-id="955ef-139">Subscription</span></span>|<span data-ttu-id="955ef-140">*Concierge Subscription* (Sottoscrizione Concierge)</span><span class="sxs-lookup"><span data-stu-id="955ef-140">*Concierge Subscription*</span></span>|<span data-ttu-id="955ef-141">Selezionare la sottoscrizione Concierge.</span><span class="sxs-lookup"><span data-stu-id="955ef-141">Select your Concierge Subscription.</span></span> <span data-ttu-id="955ef-142">Se la sottoscrizione Concierge non è elencata, saranno abilitati più tenant nella sottoscrizione ed è necessario cambiarli.</span><span class="sxs-lookup"><span data-stu-id="955ef-142">If you do not see the Concierge Subscription listed, you have multiple tenants enabled on your subscription, and you need to change tenants.</span></span> <span data-ttu-id="955ef-143">A tale scopo, accedere nuovamente usando il collegamento del portale seguente: [portale di Azure per sandbox](https://portal.azure.com/triplecrownlabs.onmicrosoft.com?azure-portal=true).</span><span class="sxs-lookup"><span data-stu-id="955ef-143">To do so, login again using the following portal link: [Azure portal for Sandbox](https://portal.azure.com/triplecrownlabs.onmicrosoft.com?azure-portal=true).</span></span>
    <span data-ttu-id="955ef-144">Gruppo di risorse</span><span class="sxs-lookup"><span data-stu-id="955ef-144">Resource Group</span></span>|<span data-ttu-id="955ef-145">Usa esistente</span><span class="sxs-lookup"><span data-stu-id="955ef-145">Use existing</span></span><br><br><span data-ttu-id="955ef-146"><rgn>[Nome gruppo di risorse sandbox]</rgn></span><span class="sxs-lookup"><span data-stu-id="955ef-146"><rgn>[Sandbox resource group name]</rgn></span></span>|<span data-ttu-id="955ef-147">Selezionare **Usa esistente**, quindi immettere il <rgn>[nome gruppo di risorse sandbox]</rgn>.</span><span class="sxs-lookup"><span data-stu-id="955ef-147">Select **Use existing**, and then enter <rgn>[Sandbox resource group name]</rgn>.</span></span>
    <span data-ttu-id="955ef-148">Località</span><span class="sxs-lookup"><span data-stu-id="955ef-148">Location</span></span>|<span data-ttu-id="955ef-149">*Selezionare l'area più vicina*</span><span class="sxs-lookup"><span data-stu-id="955ef-149">*Select the region closest to you*</span></span>|<span data-ttu-id="955ef-150">Selezionare l'area più vicina all'utente nell'elenco delle aree precedente.</span><span class="sxs-lookup"><span data-stu-id="955ef-150">Select the region closest to you from the list of regions above.</span></span>
    <span data-ttu-id="955ef-151">Ridondanza geografica</span><span class="sxs-lookup"><span data-stu-id="955ef-151">Geo-Redundancy</span></span>| <span data-ttu-id="955ef-152">Disabilita</span><span class="sxs-lookup"><span data-stu-id="955ef-152">Disable</span></span> | <span data-ttu-id="955ef-153">Questa impostazione crea una versione replicata del database in una seconda area associata.</span><span class="sxs-lookup"><span data-stu-id="955ef-153">This setting creates a replicated version of your database in a second (paired) region.</span></span> <span data-ttu-id="955ef-154">Per il momento lasciare impostato su disabilitato, in quanto il database verrà replicato in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="955ef-154">Leave this set to disabled for now, as you will replicate the database later.</span></span>
    <span data-ttu-id="955ef-155">Multimaster</span><span class="sxs-lookup"><span data-stu-id="955ef-155">Multi Master</span></span> | <span data-ttu-id="955ef-156">Abilita</span><span class="sxs-lookup"><span data-stu-id="955ef-156">Enable</span></span> | <span data-ttu-id="955ef-157">Questa impostazione consente di scrivere in più aree nello stesso momento.</span><span class="sxs-lookup"><span data-stu-id="955ef-157">This setting enables you to write to multiple regions at the same time.</span></span> <span data-ttu-id="955ef-158">Questa impostazione può essere configurata solo durante la creazione dell'account.</span><span class="sxs-lookup"><span data-stu-id="955ef-158">This setting can only be configured during account creation.</span></span>
    <span data-ttu-id="955ef-159">Rete virtuale</span><span class="sxs-lookup"><span data-stu-id="955ef-159">Virtual Network</span></span>|<span data-ttu-id="955ef-160">Lasciare vuoto</span><span class="sxs-lookup"><span data-stu-id="955ef-160">Leave blank</span></span>|<span data-ttu-id="955ef-161">Per il momento, lasciare vuoto il campo delle reti virtuali.</span><span class="sxs-lookup"><span data-stu-id="955ef-161">Leave virtual networks blank for now.</span></span> <span data-ttu-id="955ef-162">Il servizio può essere configurato in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="955ef-162">This can be configured later.</span></span>

1. <span data-ttu-id="955ef-163">Fare clic su **Rivedi e crea**.</span><span class="sxs-lookup"><span data-stu-id="955ef-163">Click **Review + Create**.</span></span>

    ![Pagina del nuovo account per Azure Cosmos DB](../media/2-global-distribution/2-azure-cosmos-db-create-new-account.png)

1. <span data-ttu-id="955ef-165">In seguito alla convalida delle impostazioni, fare clic su **Crea** per creare l'account.</span><span class="sxs-lookup"><span data-stu-id="955ef-165">After the settings are validated, click **Create** to create the account.</span></span>

1. <span data-ttu-id="955ef-166">La creazione dell'account richiede alcuni minuti.</span><span class="sxs-lookup"><span data-stu-id="955ef-166">The account creation takes a few minutes.</span></span> <span data-ttu-id="955ef-167">Attendere che nel portale venga visualizzata la notifica del completamento della distribuzione e fare clic sulla notifica.</span><span class="sxs-lookup"><span data-stu-id="955ef-167">Wait for the portal to display the notification that the deployment succeeded and click the notification.</span></span>

    ![Avviso di notifica](../media/2-global-distribution/2-azure-cosmos-db-notification.png)

1. <span data-ttu-id="955ef-169">Nella finestra della notifica fare clic su **Vai alla risorsa**.</span><span class="sxs-lookup"><span data-stu-id="955ef-169">In the notification window, click **Go to resource**.</span></span>

    ![Vai alla risorsa](../media/2-global-distribution/2-azure-cosmos-db-go-to-resource.png)

    <span data-ttu-id="955ef-171">Nel portale verrà visualizzata la pagina **L'account Azure Cosmos DB è stato creato**.</span><span class="sxs-lookup"><span data-stu-id="955ef-171">The portal displays the **Congratulations! Your Azure Cosmos DB account was created** page.</span></span>

    ![Riquadro delle notifiche nel portale di Azure](../media/2-global-distribution/2-azure-cosmos-db-account-created.png)

## <a name="replicate-data-in-multiple-regions"></a><span data-ttu-id="955ef-173">Replicare i dati in più aree</span><span class="sxs-lookup"><span data-stu-id="955ef-173">Replicate data in multiple regions</span></span>

<span data-ttu-id="955ef-174">È possibile ora eseguire la replica del database più vicino agli utenti globali a Los Angeles, New York e Tokyo.</span><span class="sxs-lookup"><span data-stu-id="955ef-174">Let's now replicate your database closest to your global users in Los Angeles, New York, and Tokyo.</span></span>

1. <span data-ttu-id="955ef-175">Nella pagina dell'account fare clic su **Replica i dati a livello globale** dal menu.</span><span class="sxs-lookup"><span data-stu-id="955ef-175">In the account page, click **Replicate data globally** from the menu.</span></span>
1. <span data-ttu-id="955ef-176">Nella pagina **Replica i dati a livello globale** selezionare le aree Stati Uniti occidentali 2, Stati Uniti orientali e Giappone orientale e quindi fare clic su **Salva**.</span><span class="sxs-lookup"><span data-stu-id="955ef-176">In the **Replicate data globally** page, select the West US 2, East US, and Japan East regions, and then click **Save**.</span></span>

    <span data-ttu-id="955ef-177">Se non viene visualizzata la mappa nel portale di Azure, ridurre a icona i menu del lato sinistro della schermata.</span><span class="sxs-lookup"><span data-stu-id="955ef-177">If you don't see the map in the Azure portal, minimize the menus of the left side of the screen to display it.</span></span>
  
    <span data-ttu-id="955ef-178">La pagina mostra un messaggio di **aggiornamento** mentre i dati vengono scritti nelle nuove aree.</span><span class="sxs-lookup"><span data-stu-id="955ef-178">The page will display an **Updating** message while the data is written to the new regions.</span></span> <span data-ttu-id="955ef-179">I dati nelle nuove aree saranno disponibili entro 30 minuti.</span><span class="sxs-lookup"><span data-stu-id="955ef-179">Data in the new regions will be available within 30 minutes.</span></span>
   
    ![Fare clic sulle aree nella mappa per aggiungerle](../media/2-global-distribution/2-global-replication.gif)
 
## <a name="summary"></a><span data-ttu-id="955ef-181">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="955ef-181">Summary</span></span>

<span data-ttu-id="955ef-182">In questa unità il database è stato replicato nelle aree del mondo in cui sono concentrati più utenti, garantendo loro accesso a latenza inferiore ai dati nel sito.</span><span class="sxs-lookup"><span data-stu-id="955ef-182">In this unit, you replicated your database to the regions of the world in which your users are most concentrated, providing them lower-latency access to the data on your site.</span></span>
