<span data-ttu-id="3e9f6-101">Dopo aver creato una macchina virtuale Linux in Azure, il passaggio successivo consiste nel configurarla per le attività da spostare in Azure.</span><span class="sxs-lookup"><span data-stu-id="3e9f6-101">Now that we have a Linux VM in Azure, the next thing you’ll want to do is configure it for the tasks we want to move to Azure.</span></span>

<span data-ttu-id="3e9f6-102">Se non è stata configurata una VPN da sito a sito in Azure, le macchine virtuali di Azure non saranno accessibili dalla rete locale.</span><span class="sxs-lookup"><span data-stu-id="3e9f6-102">Unless you’ve set up a site-to-site VPN to Azure, your Azure VMs won’t be accessible from your local network.</span></span> <span data-ttu-id="3e9f6-103">Se si sta iniziando a usare Azure, è improbabile che sia presente una VPN da sito a sito funzionante.</span><span class="sxs-lookup"><span data-stu-id="3e9f6-103">If you’re just getting started with Azure, it’s unlikely that you have a working site-to-site VPN.</span></span> <span data-ttu-id="3e9f6-104">Come è possibile quindi connettersi alla macchina virtuale?</span><span class="sxs-lookup"><span data-stu-id="3e9f6-104">So how can you connect to the virtual machine?</span></span>

## <a name="azure-vm-ip-addresses"></a><span data-ttu-id="3e9f6-105">Indirizzi IP della VM di Azure</span><span class="sxs-lookup"><span data-stu-id="3e9f6-105">Azure VM IP addresses</span></span>

<span data-ttu-id="3e9f6-106">Come si è visto poco fa, le VM di Azure comunicano in una rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="3e9f6-106">As we saw a moment ago, Azure VMs communicate on a virtual network.</span></span> <span data-ttu-id="3e9f6-107">Possono anche avere un indirizzo IP pubblico facoltativo assegnato.</span><span class="sxs-lookup"><span data-stu-id="3e9f6-107">They can also have an optional public IP address assigned to them.</span></span> <span data-ttu-id="3e9f6-108">Con un IP pubblico è possibile interagire con la macchina virtuale tramite Internet.</span><span class="sxs-lookup"><span data-stu-id="3e9f6-108">With a public IP, we can interact with the VM over the Internet.</span></span> <span data-ttu-id="3e9f6-109">In alternativa, è possibile configurare una rete privata virtuale (VPN, Virtual Private Network) che connette la rete locale ad Azure, permettendo di connettersi in modo sicuro alla macchina virtuale senza esporre un indirizzo IP pubblico.</span><span class="sxs-lookup"><span data-stu-id="3e9f6-109">Alternatively, we can set up a virtual private network (VPN) that connects our on-premises network to Azure - letting us securely connect to the VM without exposing a public IP.</span></span> <span data-ttu-id="3e9f6-110">Questo approccio è descritto in un altro modulo ed è completamente documentato, se si è interessati a esplorare tale opzione.</span><span class="sxs-lookup"><span data-stu-id="3e9f6-110">This approach is covered in another module and is fully documented if you are interested in exploring that option.</span></span>

<span data-ttu-id="3e9f6-111">Un aspetto da tenere presente con gli indirizzi IP pubblici in Azure è che vengono spesso allocati in modo dinamico.</span><span class="sxs-lookup"><span data-stu-id="3e9f6-111">One thing to be aware of with public IP addresses in Azure is they are often dynamically allocated.</span></span> <span data-ttu-id="3e9f6-112">Ciò significa che l'indirizzo IP può cambiare nel corso del tempo, ad esempio quando la macchina virtuale viene riavviata.</span><span class="sxs-lookup"><span data-stu-id="3e9f6-112">That means the IP address can change over time - for VMs, this happens when the VM is restarted.</span></span> <span data-ttu-id="3e9f6-113">È possibile pagare una tariffa aggiuntiva per assegnare indirizzi statici, se ci si vuole connettere direttamente a un indirizzo IP invece che a un nome ed è necessario fare in modo che l'indirizzo IP non cambi.</span><span class="sxs-lookup"><span data-stu-id="3e9f6-113">You can pay more to assign static addresses if you want to connect directly to an IP address instead of a name and need to ensure that the IP address will not change.</span></span>

## <a name="connect-to-an-azure-linux-vm-with-ssh"></a><span data-ttu-id="3e9f6-114">Connettersi a una VM Linux di Azure con SSH</span><span class="sxs-lookup"><span data-stu-id="3e9f6-114">Connect to an Azure Linux VM with SSH</span></span>

<span data-ttu-id="3e9f6-115">La connessione a una macchina virtuale in Azure con SSH è molto semplice.</span><span class="sxs-lookup"><span data-stu-id="3e9f6-115">Connecting to a VM in Azure using SSH is straightforward.</span></span> <span data-ttu-id="3e9f6-116">Nel portale di Azure aprire le proprietà della macchina virtuale e nella parte superiore fare clic su **Connetti**.</span><span class="sxs-lookup"><span data-stu-id="3e9f6-116">In the Azure portal, open the properties of your VM, and at the top, click **Connect**.</span></span> <span data-ttu-id="3e9f6-117">Verranno visualizzati gli indirizzi IP assegnati alla macchina virtuale insieme a tutti i dettagli di accesso per SSH.</span><span class="sxs-lookup"><span data-stu-id="3e9f6-117">This will show you the IP addresses assigned to the VM along with all the login details for SSH.</span></span> 

![Screenshot del portale di Azure che illustra il pannello di connessione a una macchina virtuale configurato per connettersi tramite SSH alla VM Linux appena creata.](../media/5-connect-ssh.png)

<span data-ttu-id="3e9f6-119">Con questi dettagli è possibile usare il comando seguente per accedere alla macchina virtuale Linux:</span><span class="sxs-lookup"><span data-stu-id="3e9f6-119">With these details, we can use the following command to get into our Linux VM:</span></span>

```bash
ssh jim@137.117.101.249
```

<span data-ttu-id="3e9f6-120">La prima volta che ci si connette, SSH richiederà l'autenticazione con un host sconosciuto.</span><span class="sxs-lookup"><span data-stu-id="3e9f6-120">The first time we connect, SSH will ask us about authenticating against an unknown host.</span></span> <span data-ttu-id="3e9f6-121">SSH informa che non è stata mai stabilita una connessione a questo server.</span><span class="sxs-lookup"><span data-stu-id="3e9f6-121">SSH is telling you that you've never connected to this server before.</span></span> <span data-ttu-id="3e9f6-122">Se ciò è vero, è perfettamente normale, ed è possibile rispondere **sì** per salvare l'impronta digitale del server nel file host noto:</span><span class="sxs-lookup"><span data-stu-id="3e9f6-122">If that's true, then it's perfectly normal, and you can respond with **yes** to save the fingerprint of the server in the known host file:</span></span>

```output
The authenticity of host '137.117.101.249 (137.117.101.249)' can't be established.
ECDSA key fingerprint is SHA256:w1h08h4ie1iMq7ibIVSQM/PhcXFV7O7EEhjEqhPYMWY.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added '137.117.101.249' (ECDSA) to the list of known hosts.
```

## <a name="transferring-files-to-the-vm"></a><span data-ttu-id="3e9f6-123">Trasferimento di file nella macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="3e9f6-123">Transferring files to the VM</span></span>

<span data-ttu-id="3e9f6-124">Un'altra attività comune consiste nel copiare i dati o i file locali da un server a un altro.</span><span class="sxs-lookup"><span data-stu-id="3e9f6-124">Another common task is to copy local files or data from one server to another.</span></span> <span data-ttu-id="3e9f6-125">In questo caso, verranno copiati i dati del sito Web in una macchina virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="3e9f6-125">In our case, we'll eventually want to copy our website data up to our Azure VM.</span></span> <span data-ttu-id="3e9f6-126">Con macchine virtuali Linux e SSH è possibile usare il comando `scp`.</span><span class="sxs-lookup"><span data-stu-id="3e9f6-126">With Linux VMs and SSH, we can use the `scp` command.</span></span> <span data-ttu-id="3e9f6-127">Il comando è simile alla copia dei file locali con `cp`, ma sarà necessario specificare l'utente remoto e l'host nel comando.</span><span class="sxs-lookup"><span data-stu-id="3e9f6-127">The command is similar to copying local files with `cp`, except you'll have to specify the remote user and host in your command.</span></span>

<span data-ttu-id="3e9f6-128">Ad esempio, per copiare `somefile.txt` dalla directory corrente in `~/folder` in un computer Linux con l'indirizzo IP `192.168.1.25`, è possibile digitare:</span><span class="sxs-lookup"><span data-stu-id="3e9f6-128">For example, to copy `somefile.txt` from our current directory to `~/folder` on a Linux machine with the IP address `192.168.1.25`, you can type:</span></span>

```bash
scp somefile.txt someuser@192.168.1.25:~/folder/
```

<span data-ttu-id="3e9f6-129">Verrà eseguita l'autenticazione come `someuser` nel sistema remoto richiedendo una password o usando la chiave privata SSH.</span><span class="sxs-lookup"><span data-stu-id="3e9f6-129">This will authenticate as `someuser` on the remote system, prompting for a password, or using your SSH private key.</span></span> <span data-ttu-id="3e9f6-130">Tale utente dovrà avere le autorizzazioni di scrittura per `~/folder/` nel server di destinazione.</span><span class="sxs-lookup"><span data-stu-id="3e9f6-130">That user will need to have write permissions to `~/folder/` on the destination server.</span></span>

> [!WARNING]
> <span data-ttu-id="3e9f6-131">`scp` eseguirà le copie dei file locali se la riga di comando non è corretta.</span><span class="sxs-lookup"><span data-stu-id="3e9f6-131">`scp` will do local file copies if you don't get the command line quite right.</span></span> <span data-ttu-id="3e9f6-132">Il componente mancante più comune è la cartella di destinazione.</span><span class="sxs-lookup"><span data-stu-id="3e9f6-132">The most common missing piece is the destination folder.</span></span>

<span data-ttu-id="3e9f6-133">Provare a usare SSH per connettersi a una macchina virtuale Linux in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="3e9f6-133">Let's try using SSH to connect to our running Linux VM.</span></span>