<span data-ttu-id="0cbb6-101">Una volta configurata e avviata la Data Science Virtual Machine, si deciderà di eseguire il training del primo modello di apprendimento profondo.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-101">Now that you have your Data Science Virtual Machine up and running, you decide to train your first deep learning model.</span></span> <span data-ttu-id="0cbb6-102">Si intende eseguire gli esperimenti in modo isolato da tutti gli altri elementi sul server.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-102">You want to run your experiments in isolation from everything else on your server.</span></span> <span data-ttu-id="0cbb6-103">A tale scopo, verranno eseguiti in un contenitore Docker.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-103">To do that, you run them within a Docker container.</span></span>

## <a name="connect-to-the-vm-with-ssh"></a><span data-ttu-id="0cbb6-104">Connettersi alla macchina virtuale con SSH</span><span class="sxs-lookup"><span data-stu-id="0cbb6-104">Connect to the VM with ssh</span></span>

<span data-ttu-id="0cbb6-105">Accertarsi di essere ancora connessi alla macchina virtuale tramite SSH.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-105">Make sure you're still connected to your VM through ssh.</span></span> <span data-ttu-id="0cbb6-106">In caso contrario, è sufficiente eseguire nuovamente questo comando per collegarsi in remoto alla macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-106">If not, just run this command again to remote back into the virtual machine.</span></span>

1. <span data-ttu-id="0cbb6-107">Eseguire il comando seguente in Azure Cloud Shell per accedere alla VM.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-107">Execute the following command in Azure Cloud Shell to sign into the VM.</span></span>

    ```azurecli 
    ssh <USERNAME>@<IP>
    ``` 
    
    <span data-ttu-id="0cbb6-108">Sostituire `<USERNAME>` con il nome dell'account amministratore definito durante la creazione della VM.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-108">Replace  `<USERNAME>` with the admin account name you defined when creating the VM.</span></span> <span data-ttu-id="0cbb6-109">Sostituire `<IP>` con l'indirizzo IP della VM salvato nell'esercizio precedente.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-109">Replace `<IP>` with the IP address of the VM you saved in the preceding exercise.</span></span>  

1. <span data-ttu-id="0cbb6-110">Quando richiesto, immettere la password per l'account amministratore per completare il processo di accesso.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-110">When prompted, enter your password for the admin account to complete the sign-in process.</span></span>

## <a name="run-a-jupyter-notebook-server-in-a-docker-container-in-the-vm"></a><span data-ttu-id="0cbb6-111">Eseguire un server Jupyter Notebook in un contenitore Docker nella VM</span><span class="sxs-lookup"><span data-stu-id="0cbb6-111">Run a Jupyter Notebook server in a Docker container in the VM</span></span>

> [!NOTE]
> <span data-ttu-id="0cbb6-112">Poiché è presente solo un account amministratore o radice nella VM, è necessario eseguire tutti i comandi di Docker come radice usando `sudo`</span><span class="sxs-lookup"><span data-stu-id="0cbb6-112">Since we only have an admin, or root, account on our VM, we have to run all Docker commands as root using `sudo`</span></span>

1. <span data-ttu-id="0cbb6-113">Per vedere quali contenitori Docker sono presenti nella VM, eseguire questo comando al prompt dei comandi.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-113">To see what Docker containers exist on the VM, run the following command at the command prompt.</span></span>

    ```azurecli 
    sudo docker ps
    ```

1. <span data-ttu-id="0cbb6-114">Eseguire questo comando al prompt dei comandi per creare un nuovo contenitore per i nostri esperimenti.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-114">Run the following command at the command prompt to create a new container for our experiments.</span></span>

    ```azurecli 
    sudo docker run --rm -it --entrypoint '/bin/sh' -p 8888:8888 pytorch/pytorch -c \
    'conda install jupyter matplotlib -y &&\
    curl https://pytorch.org/tutorials/_downloads/cifar10_tutorial.ipynb > first_pytorch_classifier.ipynb &&\
    jupyter notebook --ip=0.0.0.0 --no-browser --allow-root'
    ``` 

    <span data-ttu-id="0cbb6-115">Questo comando rimarrà in esecuzione a lungo.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-115">This command will run for quite a while.</span></span> <span data-ttu-id="0cbb6-116">Nel frattempo, ecco una descrizione della sua funzione.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-116">So, while we have some time, let's discuss what the command does.</span></span> 
    - <span data-ttu-id="0cbb6-117">`docker run` esegue un comando in un nuovo contenitore.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-117">`docker run` runs a command in a new container.</span></span> <span data-ttu-id="0cbb6-118">L'immagine Docker usata è pytorch/pytorch.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-118">The Docker image being used is pytorch/pytorch.</span></span> <span data-ttu-id="0cbb6-119">In prima istanza crea un livello contenitore scrivibile sull'immagine specificata e ne esegue l'avvio con il comando specificato.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-119">It first creates a writeable container layer over the specified image, and then starts it using the specified command.</span></span>
    - <span data-ttu-id="0cbb6-120">`--rm` rimuoverà il contenitore all'uscita.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-120">`--rm` will remove the container once it exits.</span></span> <span data-ttu-id="0cbb6-121">Per mantenere il contenitore, eliminare questo argomento.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-121">If you want to keep the container around, drop this argument.</span></span> 
    - <span data-ttu-id="0cbb6-122">`--entrypoint 'bin/sh'` sovrascrive il punto di ingresso predefinito dell'immagine con la shell Bash</span><span class="sxs-lookup"><span data-stu-id="0cbb6-122">`--entrypoint 'bin/sh'` overwrites the default entry point of the image to be the Bash shell</span></span>
    - <span data-ttu-id="0cbb6-123">`-c` definisce il comando da eseguire all'avvio del contenitore.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-123">`-c` defines what command to run when the container starts.</span></span> <span data-ttu-id="0cbb6-124">In questo caso, esegue tre comandi:</span><span class="sxs-lookup"><span data-stu-id="0cbb6-124">In this case, it's running three commands:</span></span>
        - <span data-ttu-id="0cbb6-125">Installa Jupyter e matplotlib</span><span class="sxs-lookup"><span data-stu-id="0cbb6-125">Installs Jupyter and matplotlib</span></span>
        - <span data-ttu-id="0cbb6-126">Copia un notebook (cifar10_tutorial.ipynb) da pytorch.org in un file nel contenitore denominato `first_pytorch_classifier.ipynb`</span><span class="sxs-lookup"><span data-stu-id="0cbb6-126">Copies a notebook (cifar10_tutorial.ipynb) from pytorch.org to a file in the container called `first_pytorch_classifier.ipynb`</span></span>
        - <span data-ttu-id="0cbb6-127">Avvia il server notebook nel contenitore come nell'esercizio precedente.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-127">Starts the notebook server in the container in the same way as the preceding exercise.</span></span>  <span data-ttu-id="0cbb6-128">Nessun browser viene avviato. Consentire l'accesso al notebook dalla radice e restare in ascolto su tutte le porte.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-128">No browser is started, allow the notebook to be accessed by root and listen on all ports.</span></span> 
    
    <span data-ttu-id="0cbb6-129">Il server notebook è in ascolto su tutte le porte per il contenitore.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-129">The notebook server listens on all ports for that container.</span></span> <span data-ttu-id="0cbb6-130">In che modo viene ricevuto il traffico dall'esterno del contenitore?</span><span class="sxs-lookup"><span data-stu-id="0cbb6-130">But, how will traffic come from outside the container?</span></span> <span data-ttu-id="0cbb6-131">L'argomento `-p 8888:8888` associa la porta `8888` del contenitore alla porta TCP 8888 sul computer host.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-131">The `-p 8888:8888` argument binds port `8888` of the container to TCP port 8888 on the host machine.</span></span> <span data-ttu-id="0cbb6-132">Pertanto, il traffico in ingresso nella VM sulla porta 8888 verrà rilevato dal contenitore.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-132">So, traffic coming to the VM over port 8888 will be picked up by the container.</span></span> 

## <a name="connect-to-the-jupyter-notebook-server-from-a-remote-browser"></a><span data-ttu-id="0cbb6-133">Connettersi al server Jupyter Notebook da un browser remoto</span><span class="sxs-lookup"><span data-stu-id="0cbb6-133">Connect to the Jupyter Notebook server from a remote browser</span></span> 

<span data-ttu-id="0cbb6-134">Quando Jupyter Notebook è in esecuzione nel contenitore, verrà mostrato un messaggio simile al seguente.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-134">Once the Jupyter notebook is running in the container, you'll  see a message similar to the following message.</span></span> 

> <span data-ttu-id="0cbb6-135">*Copiare/incollare l'URL nel browser quando si esegue la connessione per la prima volta per accedere con un token: http://(5b8783e7911d or 127.0.0.1):8888/?token={sometoken}*</span><span class="sxs-lookup"><span data-stu-id="0cbb6-135">*Copy/paste this URL into your browser when you connect for the first time, to login with a token: http://(5b8783e7911d or 127.0.0.1):8888/?token={sometoken}*</span></span>

1. <span data-ttu-id="0cbb6-136">Sostituire la parte **http://(5b8783e7911d or 127.0.0.1)** dell'URL con `<HOSTNAME>.<REGION>.cloudapp.azure.com` o con l'indirizzo IP della VM e navigare all'indirizzo in una nuova scheda del browser.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-136">Replace the **http://(5b8783e7911d or 127.0.0.1)** part of the URL with `<HOSTNAME>.<REGION>.cloudapp.azure.com` or the IP address of the VM and navigate to the address  in a new a tab of your browser.</span></span>

    ![<span data-ttu-id="0cbb6-137">Screenshot che mostra il dashboard dei Jupyter Notebook.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-137">Screenshot showing Jupyter Notebooks dashboard.</span></span> ](../media/notebook-in-docker.png)
    
    <span data-ttu-id="0cbb6-138">Questa volta viene visualizzato un unico notebook.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-138">This time we only see a single notebook.</span></span> <span data-ttu-id="0cbb6-139">Questo perché ci si trova in un contenitore ed è stato copiato solo questo notebook.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-139">That's because we're in a container and only copied down this notebook.</span></span> <span data-ttu-id="0cbb6-140">Nel prossimo esercizio sarà possibile esercitarsi con questo notebook.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-140">In the next exercise, we'll experiment with this notebook.</span></span> 
    
    > [!TIP]
    > <span data-ttu-id="0cbb6-141">Non arrestare ancora il server notebook.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-141">Don't shut down the notebook server just yet.</span></span> <span data-ttu-id="0cbb6-142">Nel prossimo esercizio si userà il notebook `first_pytorch_classifier.ipynb`.</span><span class="sxs-lookup"><span data-stu-id="0cbb6-142">We'll look at the `first_pytorch_classifier.ipynb` notebook in the next exercise.</span></span>